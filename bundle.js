(()=>{"use strict";var e,t,n,r,o={187:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var o,i,s,c;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=p(e))>0&&s.length>o&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):_(o,o.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return p(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var p=i[e];if(void 0===p)return!1;if("function"==typeof p)r(p,this,t);else{var c=p.length,h=_(p,c);for(n=0;n<c;++n)r(h[n],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},352:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameWorld=void 0;var r=n(540),o=n(215),i=n(105),s=n(808),a=n(728),p=n(847),c=n(38),h=function(){function e(e,t){this._shapeTypesQueue=[],this._movingShape=null,this._shapeTypes=[s.ShapeType.I,s.ShapeType.J,s.ShapeType.L,s.ShapeType.O,s.ShapeType.S,s.ShapeType.Z,s.ShapeType.T],this._shapeFactory=new p.ShapeFactory,this._map=new a.GameMap(e,t),this._map.on("newShape",(function(e){c.SVGContext.drawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("leftShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("rightShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("downShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("rotateShape",(function(e){c.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("changeShape",(function(e){c.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("destroyShape",(function(e){c.SVGContext.destroyShape(e)})),this.init()}return Object.defineProperty(e.prototype,"gameOver",{get:function(){return this._gameOver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),e.prototype.increaseScore=function(e){this._score+=e},e.prototype.handleInput=function(){o.keyboard.isPressed(r.GAME_CONFIG.UP_KEY)?this._map.doShapeAction(this._movingShape,"rotate"):o.keyboard.isPressed(r.GAME_CONFIG.DOWN_KEY)?(this._map.doShapeAction(this._movingShape,"down"),this.increaseScore(r.GAME_CONFIG.LOWERED_SHAPE_BONUS)):o.keyboard.isPressed(r.GAME_CONFIG.LEFT_KEY)?this._map.doShapeAction(this._movingShape,"left"):o.keyboard.isPressed(r.GAME_CONFIG.RIGHT_KEY)&&this._map.doShapeAction(this._movingShape,"right")},e.prototype.handleFilledLines=function(){var e=this._map.removeFilledLines();e>0&&(this.increaseScore(e*r.GAME_CONFIG.FILLED_LINE_BONUS),this._updateEveryXFrames>0&&this._updateEveryXFrames--)},e.prototype.generateRandomShapeType=function(){var e=Math.floor(Math.random()*this._shapeTypes.length);return this._shapeTypes[e]},e.prototype.buildShape=function(e){var t=Math.floor(Math.random()*this._shapeTypes.length),n=r.GAME_CONFIG.SHAPE_COLORS[t];return this._shapeFactory.createShape(e,new i.Vector2(Math.floor(this._map.width/2),3),n)},e.prototype.init=function(){this._gameOver=!1,this._score=0,this._frame=0,this._updateEveryXFrames=r.GAME_CONFIG.UPDATE_AFTER_X_FRAMES,this._map.init();var e=this.generateRandomShapeType();this._shapeTypesQueue=[e],this._movingShape=this.buildShape(this.generateRandomShapeType()),this._map.addShape(this._movingShape)},e.prototype.update=function(){if(this.handleInput(),!(++this._frame%this._updateEveryXFrames||this._map.doShapeAction(this._movingShape,"down"))){this.handleFilledLines();var e=this.generateRandomShapeType();this._shapeTypesQueue.unshift(e),this._movingShape=this.buildShape(this._shapeTypesQueue.pop()),this._gameOver=!this._map.addShape(this._movingShape)}},e.prototype.draw=function(){},e}();t.GameWorld=h},38:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGContext=void 0;var r=n(540),o=n(105),i=function(){function e(e){this._shapes=new Map,this._svg=e}return e.prototype.clear=function(){this._svg.innerHTML=""},e.prototype.drawShape=function(e,t){var n=this;if(this._shapes.has(e))return this._shapes.get(e);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.cells.forEach((function(r){var i=n.drawCell(r,t,e.color);o.appendChild(i)})),r.GAME_CONFIG.SHOW_ORIGINS){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttribute("cx",(e.origin.X*t).toString()),i.setAttribute("cy",(e.origin.Y*t).toString()),i.setAttribute("r","5"),i.setAttribute("fill","#FFFFFF"),o.appendChild(i)}return o.setAttribute("x",(e.position.X*t).toString()),o.setAttribute("y",(e.position.Y*t).toString()),this._svg.appendChild(o),this._shapes.set(e,o),o},e.prototype.drawCell=function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");if(i.setAttribute("x",(e.coords.X*t+t/20).toString()),i.setAttribute("y",(e.coords.Y*t+t/20).toString()),i.setAttribute("width",(t-t/10).toString()),i.setAttribute("height",(t-t/10).toString()),i.setAttribute("ry",(t/10).toString()),i.setAttribute("rx",(t/10).toString()),i.setAttribute("fill",n),r.appendChild(i),!e.shape.cells.find((function(t){return e.coords.X===t.coords.X&&e.coords.Y-1===t.coords.Y}))){var s=document.createElementNS("http://www.w3.org/2000/svg","path"),a=[{command:"M",coords:new o.Vector2(0,0)},{command:"L",coords:new o.Vector2(t/5,t/5)},{command:"L",coords:new o.Vector2(t-t/5,t/5)},{command:"L",coords:new o.Vector2(t,0)},{command:"L",coords:new o.Vector2(0,0)}].map((function(n){return"".concat(n.command).concat(e.coords.X*t+n.coords.X," ").concat(e.coords.Y*t+n.coords.Y)})).join(" ");s.setAttribute("d",a),s.setAttribute("fill","#F0F0F0"),s.setAttribute("fill-opacity","0.5"),r.appendChild(s)}return r},e.prototype.updateShape=function(e,t){if(this._shapes.has(e)){var n=this._shapes.get(e);n.setAttribute("y",(e.position.Y*t).toString()),n.setAttribute("x",(e.position.X*t).toString())}},e.prototype.destroyShape=function(e){this._shapes.has(e)&&(this._shapes.get(e).remove(),this._shapes.delete(e))},e.prototype.redrawShape=function(e,t){var n=this;if(this._shapes.has(e)){var o=this._shapes.get(e);if(o.innerHTML="",e.cells.forEach((function(r){var i=n.drawCell(r,t,e.color);o.appendChild(i)})),r.GAME_CONFIG.SHOW_ORIGINS){var i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttribute("cx",(e.origin.X*t).toString()),i.setAttribute("cy",(e.origin.Y*t).toString()),i.setAttribute("r","5"),i.setAttribute("fill","#FFFFFF"),o.appendChild(i)}o.setAttribute("x",(e.position.X*t).toString()),o.setAttribute("y",(e.position.Y*t).toString())}},e}(),s=document.getElementById("game");t.SVGContext=new i(s)},540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_CONFIG=void 0,t.GAME_CONFIG={SHOW_ORIGINS:!1,UPDATE_AFTER_X_FRAMES:40,GAME_WIDTH:15,GAME_HEIGHT:20,CANVAS_MIN_WIDTH:300,CANVAS_MIN_HEIGHT:400,CELL_SIZE:20,NEXT_SHAPE_CELL_SIZE:5,STROKE_WIDTH:.5,BACKGROUND_COLOR:"#28363B",STROKE_COLOR:"black",SHAPE_COLORS:["#F9B38F","#BF6C86","#84AF9C","#6D5C80","#FFA3D0","#439F9E","#EF5F3C"],SCORE_LABEL_FONT:"10px Comic Sans MS",NEXT_SHAPE_LABEL_FONT:"10px Comic Sans MS",GAME_OVER_LABEL_FONT:"25px Comic Sans MS",GAME_OVER_YOUR_SCORE_LABEL_FONT:"15px Comic Sans MS",FONT_COLOR:"white",SCORE_LABEL:"Score: ",NEXT_SHAPE_LABEL:"Next Shape: ",GAME_OVER_LABEL:"Game Over!",GAME_OVER_YOUR_SCORE_LABEL:"Your Score: ",NEXT_SHAPE_POSITION:{X:283,Y:6},SCORE_LABEL_POSITION:{X:5,Y:13,ALIGNMENT:"left"},NEXT_SHAPE_LABEL_POSITION:{X:215,Y:13,ALIGNMENT:"left"},GAME_OVER_LABEL_POSITION:{X:150,Y:200,ALIGNMENT:"center"},GAME_OVER_YOUR_SCORE_LABEL_POSITION:{X:150,Y:235,ALIGNMENT:"center"},START_KEY:32,LEFT_KEY:37,RIGHT_KEY:39,UP_KEY:38,DOWN_KEY:40,DROP:13,FILLED_LINE_BONUS:100,DROPPED_SHAPE_BONUS:2,LOWERED_SHAPE_BONUS:1}},105:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var n=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Zero",{get:function(){return new e(0,0)},enumerable:!1,configurable:!0}),e.prototype.addX=function(t){return new e(this._x,this._y).addToX(t)},e.prototype.addY=function(t){return new e(this._x,this._y).addToY(t)},e.prototype.addToX=function(e){return this._x+=e,this},e.prototype.addToY=function(e){return this._y+=e,this},e.prototype.add=function(e,t){return this.addToX(e),this.addToY(t),this},e}();t.Vector2=n},215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.keyboard=void 0;var n=function(){function e(){var e=this;this._keysPressed=[],document.addEventListener("keydown",(function(t){e.keyDown(t)}))}return e.prototype.keyDown=function(e){this._keysPressed[e.keyCode]=!0},e.prototype.reset=function(){this._keysPressed=[]},e.prototype.isPressed=function(e){return this._keysPressed[e]},e}();t.keyboard=new n},728:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameMap=void 0;var i=function(e){function t(t,n){var r=e.call(this)||this;return r._shapes=[],r._width=t,r._height=n,r.init(),r}return o(t,e),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._map=[];for(var e=0;e<this._height;e++){this._map[e]=[];for(var t=0;t<this._width;t++)this._map[e][t]=void 0}},t.prototype.addShape=function(e){return!!this.isShapeValidPlace(e)&&(this._shapes.push(e),this.emit("newShape",e),this.cacheShapeCells(e),!0)},t.prototype.doShapeAction=function(e,t){var n=e.clone();return n.do(t),!!this.isShapeValidPlace(n,e)&&(this.clearShapeCache(e),e.do(t),this.cacheShapeCells(e),this.emit("".concat(t,"Shape"),e),!0)},t.prototype.removeShape=function(e){var t=this._shapes.indexOf(e,0);t>-1&&(this.clearShapeCache(e),this._shapes.splice(t,1))},t.prototype.isInMap=function(e){var t=[e.X,e.Y],n=t[0],r=t[1];return n>=0&&n<this._width&&r>=0&&r<this._height},t.prototype.getCell=function(e){if(this.isInMap(e)&&void 0!==this._map[e.Y][e.X])return this._map[e.Y][e.X]},t.prototype.isCellFilled=function(e){return!!this.getCell(e)},t.prototype.clearShapeCache=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=void 0)}))},t.prototype.cacheShapeCells=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=e)}))},t.prototype.anyFilledOnRow=function(e){return this._map[e].some((function(e){return void 0!==e}))},t.prototype.isShapeValidPlace=function(e,t){var n=this;return e.cells.every((function(e){if(!n.isInMap(e.position))return!1;var r=n.getCell(e.position);return!r||!!t&&t.isPartOfShape(r)}))},t.prototype.removeFilledLines=function(){for(var e=this,t=0,n=0;n<this._map.length;n++)if(this._map[n].every((function(e){return void 0!==e}))){t++,this._map[n].forEach((function(t){var n=e._shapes.find((function(e){return e.cells.includes(t)}));n.removeCell(t),0===n.cells.length?(e.removeShape(n),e.emit("destroyShape",n)):e.emit("changeShape",n)}));for(var r=0;r<n;r++)this._map[r].forEach((function(t){t&&(t.coords.addToY(1),e.emit("changeShape",t.shape))}));this._map.splice(n,1);for(var o=[],i=0;i<this._width;i++)o[i]=void 0;this._map.unshift(o)}return t},t}(n(187).EventEmitter);t.GameMap=i},185:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;var r=n(105),o=function(){function e(e,t){this._shape=t,this._coords=e}return Object.defineProperty(e.prototype,"coords",{get:function(){return this._coords},set:function(e){this._coords=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new r.Vector2(this.X,this.Y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){return this._shape.position.X+this._coords.X},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._shape.position.Y+this._coords.Y},enumerable:!1,configurable:!0}),e}();t.Cell=o},189:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var i=n(105),s=n(185),a=function(){function e(){}return e.prototype.move=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),e.position.addToX(t).addToY(n)},e}(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="down",t}return o(t,e),t.prototype.do=function(e){this.move(e,0,1)},t}(a),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="right",t}return o(t,e),t.prototype.do=function(e){this.move(e,1,0)},t}(a),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="left",t}return o(t,e),t.prototype.do=function(e){this.move(e,-1,0)},t}(a),u=function(){function e(){this.name="rotate"}return e.prototype.do=function(e){e.cells.forEach((function(t){var n=t.coords.X,r=t.coords.Y+e.origin.X-e.origin.Y,o=e.origin.X+e.origin.Y-n-1;t.coords=new i.Vector2(r,o)}))},e}(),f=function(){function e(e,t,n,r){void 0===r&&(r=new i.Vector2(.5,.5));var o=this;this._cells=[],this._color="",this._position=null,this._origin=null,this._actions=[new p,new h,new c,new u],this._cells=e,this._cells.forEach((function(e){return e.shape=o})),this._position=t,this._color=n,this._origin=r}return Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},set:function(e){this._cells=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),e.prototype.do=function(e){this._actions.find((function(t){return t.name===e})).do(this)},e.prototype.removeCell=function(e){var t=this._cells.indexOf(e,0);t>-1&&this._cells.splice(t,1)},e.prototype.isPartOfShape=function(e){return this._cells.includes(e)},e.prototype.clone=function(){return new e(this._cells.map((function(e){return new s.Cell(e.coords)})),new i.Vector2(this._position.X,this._position.Y),this._color,new i.Vector2(this._origin.X,this._origin.Y))},e}();t.Shape=f},847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory=void 0;var r=n(808),o=n(105),i=n(189),s=n(185),a=function(){function e(){}return e.prototype.createShape=function(e,t,n){var a,p=[];switch(e){case r.ShapeType.I:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(0,2)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.J:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.L:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.O:p=[new o.Vector2(-1,0),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.S:p=[new o.Vector2(0,0),new o.Vector2(1,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.Z:p=[new o.Vector2(0,0),new o.Vector2(-1,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.T:p=[new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(.5,1.5)}return new i.Shape(p,new o.Vector2(t.X,t.Y),n,a)},e}();t.ShapeFactory=a},808:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeType=void 0,(n=t.ShapeType||(t.ShapeType={}))[n.I=0]="I",n[n.J=1]="J",n[n.L=2]="L",n[n.S=3]="S",n[n.Z=4]="Z",n[n.O=5]="O",n[n.T=6]="T"}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,s),n.exports}t=s(352),n=s(215),r=s(540),e=new t.GameWorld(r.GAME_CONFIG.GAME_WIDTH,r.GAME_CONFIG.GAME_HEIGHT),function t(){e.gameOver||(e.update(),e.draw()),n.keyboard.reset(),requestAnimationFrame(t)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVNxUyxHQUdwRXRTLEVBQU9DLFFackJmLFNBQ0EsU0FDQSxTQUtJekIsRUFBUyxJQUFJLEVBQUEwTCxVQUFVLEVBQUF2QyxZQUFZK0UsV0FBWSxFQUFBL0UsWUFBWWdGLGFBc0MvRCxTQUFTK0YsSUFDRmxVLEVBQU9tVSxXQVZWblUsRUFBT3dMLFNBTVB4TCxFQUFPeUwsUUFXUCxFQUFBNUIsU0FBUzZHLFFBQ1QwRCxzQkFBc0JGLEdBOUN0QkEsSSIsInNvdXJjZXMiOlsid2VicGFjazovL1RldHJpcy8uL3NyYy9HYW1lLnRzIiwid2VicGFjazovL1RldHJpcy8uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9HYW1lV29ybGQudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL1NWRy50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvZ2FtZS5jb25maWcudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL2dlb20vVmVjdG9yMi50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvaW5wdXQvS2V5Ym9hcmQudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL21hcC9HYW1lTWFwLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9DZWxsLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9TaGFwZS50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvc2hhcGUvU2hhcGVGYWN0b3J5LnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9TaGFwZVR5cGUudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svYm9vdHN0cmFwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVXb3JsZCB9IGZyb20gJy4vR2FtZVdvcmxkJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9pbnB1dC9LZXlib2FyZCc7XG5pbXBvcnQgeyBHQU1FX0NPTkZJRyB9IGZyb20gJy4vZ2FtZS5jb25maWcnO1xuXG5sZXQgdGV0cmlzOiBHYW1lV29ybGQ7XG5cbmZ1bmN0aW9uIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRldHJpcyA9IG5ldyBHYW1lV29ybGQoR0FNRV9DT05GSUcuR0FNRV9XSURUSCwgR0FNRV9DT05GSUcuR0FNRV9IRUlHSFQpO1xuICAgIGdhbWVMb29wKCk7XG59XG5cbmZ1bmN0aW9uIGdhbWVPdmVyU2NyZWVuKCk6IHZvaWQge1xuICAgIC8vIGNhbnZhczJELmNsZWFyKCk7XG4gICAgLy8gY2FudmFzMkQuZHJhd0JhY2tncm91bmQoR0FNRV9DT05GSUcuQkFDS0dST1VORF9DT0xPUik7XG4gICAgLy8gY2FudmFzMkQuZHJhd1RleHQoXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTCwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTF9QT1NJVElPTixcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX0xBQkVMX1BPU0lUSU9OLkFMSUdOTUVOVFxuICAgIC8vICk7XG5cbiAgICAvLyBjYW52YXMyRC5kcmF3VGV4dChcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUwgKyB0ZXRyaXMuc2NvcmUsIFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX1BPU0lUSU9OLFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfTEFCRUxfUE9TSVRJT04uQUxJR05NRU5UXG4gICAgLy8gKTtcblxuICAgIC8vIGlmKGtleWJvYXJkLmlzUHJlc3NlZChHQU1FX0NPTkZJRy5TVEFSVF9LRVkpKSB7XG4gICAgLy8gICAgIHRldHJpcy5pbml0KCk7XG4gICAgLy8gfVxufVxuXG5mdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB7XG4gICAgdGV0cmlzLnVwZGF0ZSgpO1xufVxuXG5mdW5jdGlvbiBkcmF3KCk6IHZvaWQge1xuICAgIC8vIGNhbnZhczJELmNsZWFyKCk7XG4gICAgLy8gY2FudmFzMkQuZHJhd0JhY2tncm91bmQoR0FNRV9DT05GSUcuQkFDS0dST1VORF9DT0xPUik7XG4gICAgdGV0cmlzLmRyYXcoKTtcbn1cblxuZnVuY3Rpb24gZ2FtZUxvb3AoKTogdm9pZCB7XG4gICAgaWYodGV0cmlzLmdhbWVPdmVyKSB7XG4gICAgICAgIGdhbWVPdmVyU2NyZWVuKCk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICBkcmF3KCk7XG4gICAgfVxuICAgIGtleWJvYXJkLnJlc2V0KCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcbn1cblxuc3RhcnQoKTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tICcuL2dhbWUuY29uZmlnJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9pbnB1dC9LZXlib2FyZCc7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi9nZW9tL1ZlY3RvcjInO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuL3NoYXBlL1NoYXBlJztcbmltcG9ydCB7IFNoYXBlVHlwZSB9IGZyb20gJy4vc2hhcGUvU2hhcGVUeXBlJztcbmltcG9ydCB7IEdhbWVNYXAgfSBmcm9tICcuL21hcC9HYW1lTWFwJztcbmltcG9ydCB7IFNoYXBlRmFjdG9yeSB9IGZyb20gJy4vc2hhcGUvU2hhcGVGYWN0b3J5JztcbmltcG9ydCB7IFNWR0NvbnRleHQgfSBmcm9tICcuL1NWRyc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lV29ybGQge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgX21hcDogR2FtZU1hcDtcbiAgICBwcml2YXRlIF91cGRhdGVFdmVyeVhGcmFtZXM6IG51bWJlcjtcbiAgICBwcml2YXRlIF9mcmFtZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3NoYXBlVHlwZXNRdWV1ZTogU2hhcGVUeXBlW10gPSBbXTtcbiAgICBwcml2YXRlIF9zY29yZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX2dhbWVPdmVyIDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9zaGFwZUZhY3Rvcnk6IFNoYXBlRmFjdG9yeTtcbiAgICBwcml2YXRlIF9tb3ZpbmdTaGFwZTogU2hhcGUgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBfc2hhcGVUeXBlczogU2hhcGVUeXBlW10gPSBbXG4gICAgICAgIFNoYXBlVHlwZS5JLFxuICAgICAgICBTaGFwZVR5cGUuSixcbiAgICAgICAgU2hhcGVUeXBlLkwsXG4gICAgICAgIFNoYXBlVHlwZS5PLFxuICAgICAgICBTaGFwZVR5cGUuUyxcbiAgICAgICAgU2hhcGVUeXBlLlosXG4gICAgICAgIFNoYXBlVHlwZS5UXG4gICAgXTtcblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG4gICAgXG4gICAgcHVibGljIGdldCBnYW1lT3ZlcigpIDogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nYW1lT3ZlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHNjb3JlKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIC8vLS0tLS0tQ29uc3RydWN0b3ItLS0tLS0vL1xuXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2hhcGVGYWN0b3J5ID0gbmV3IFNoYXBlRmFjdG9yeSgpO1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgR2FtZU1hcCh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCduZXdTaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQuZHJhd1NoYXBlKHNoYXBlLCBHQU1FX0NPTkZJRy5DRUxMX1NJWkUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdsZWZ0U2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LnVwZGF0ZVNoYXBlKHNoYXBlLCBHQU1FX0NPTkZJRy5DRUxMX1NJWkUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdyaWdodFNoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC51cGRhdGVTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbignZG93blNoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC51cGRhdGVTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbigncm90YXRlU2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LnJlZHJhd1NoYXBlKHNoYXBlLCBHQU1FX0NPTkZJRy5DRUxMX1NJWkUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdjaGFuZ2VTaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQucmVkcmF3U2hhcGUoc2hhcGUsIEdBTUVfQ09ORklHLkNFTExfU0laRSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tYXAub24oJ2Rlc3Ryb3lTaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQuZGVzdHJveVNoYXBlKHNoYXBlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHJpdmF0ZSBNZXRob2RzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgaW5jcmVhc2VTY29yZSh0b0FkZDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLl9zY29yZSArPSB0b0FkZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUlucHV0KCk6IHZvaWQge1xuICAgICAgICBpZihrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuVVBfS0VZKSkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLmRvU2hhcGVBY3Rpb24odGhpcy5fbW92aW5nU2hhcGUsICdyb3RhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuRE9XTl9LRVkpKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAuZG9TaGFwZUFjdGlvbih0aGlzLl9tb3ZpbmdTaGFwZSwgJ2Rvd24nKTtcbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTY29yZShHQU1FX0NPTkZJRy5MT1dFUkVEX1NIQVBFX0JPTlVTKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuTEVGVF9LRVkpKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAuZG9TaGFwZUFjdGlvbih0aGlzLl9tb3ZpbmdTaGFwZSwgJ2xlZnQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuUklHSFRfS0VZKSkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLmRvU2hhcGVBY3Rpb24odGhpcy5fbW92aW5nU2hhcGUsICdyaWdodCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVGaWxsZWRMaW5lcygpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBmaWxsZWRMaW5lc0NvdW50ID0gdGhpcy5fbWFwLnJlbW92ZUZpbGxlZExpbmVzKCk7XG5cbiAgICAgICAgaWYoZmlsbGVkTGluZXNDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTY29yZShmaWxsZWRMaW5lc0NvdW50ICogR0FNRV9DT05GSUcuRklMTEVEX0xJTkVfQk9OVVMpO1xuXG4gICAgICAgICAgICBpZih0aGlzLl91cGRhdGVFdmVyeVhGcmFtZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlRXZlcnlYRnJhbWVzLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlKCk6IFNoYXBlVHlwZSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5fc2hhcGVUeXBlcy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlVHlwZXNbaW5kZXhdO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRTaGFwZSh0eXBlOiBTaGFwZVR5cGUpOiBTaGFwZSB7XG4gICAgICAgIGNvbnN0IHJhbmRvbVNoYXBlVHlwZUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5fc2hhcGVUeXBlcy5sZW5ndGgpO1xuICAgICAgICBsZXQgc2hhcGVDb2xvciA9IEdBTUVfQ09ORklHLlNIQVBFX0NPTE9SU1tyYW5kb21TaGFwZVR5cGVJbmRleF07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fc2hhcGVGYWN0b3J5LmNyZWF0ZVNoYXBlKFxuICAgICAgICAgICAgICAgICAgICB0eXBlLCBcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoTWF0aC5mbG9vcih0aGlzLl9tYXAud2lkdGggLyAyKSwgMyksXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlQ29sb3JcbiAgICAgICAgICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIHByaXZhdGUgZHJhd1NoYXBlc0luUXVldWUoKTogdm9pZCB7XG4gICAgLy8gICAgIGNhbnZhczJELmRyYXdUZXh0KFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfTEFCRUwsIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfTEFCRUxfRk9OVCwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9MQUJFTF9QT1NJVElPTixcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0xBQkVMX1BPU0lUSU9OLkFMSUdOTUVOVFxuICAgIC8vICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgLy8gICAgIGZvcihsZXQgaSA9IHRoaXMuX3NoYXBlVHlwZXNRdWV1ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG4gICAgLy8gICAgICAgICBsZXQgc2hhcGVUeXBlID0gdGhpcy5fc2hhcGVUeXBlc1F1ZXVlW2ldO1xuICAgIC8vICAgICAgICAgbGV0IGluZGV4RnJvbUVuZCA9IHRoaXMuX3NoYXBlVHlwZXNRdWV1ZS5sZW5ndGggLSAxIC0gaTtcbiAgICAvLyAgICAgICAgIGxldCBkZW1vU2hhcGUgPSB0aGlzLl9zaGFwZUZhY3RvcnkuY3JlYXRlU2hhcGUoXG4gICAgLy8gICAgICAgICAgICAgICAgIHNoYXBlVHlwZSwgXG4gICAgLy8gICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9QT1NJVElPTi5YICsgaW5kZXhGcm9tRW5kICogNCAqIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfQ0VMTF9TSVpFLCBcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfUE9TSVRJT04uWSksXG4gICAgLy8gICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNIQVBFX0NPTE9SU1tzaGFwZVR5cGVdLFxuICAgIC8vICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0NFTExfU0laRVxuICAgIC8vICAgICAgICAgICAgICk7XG5cbiAgICAvLyAgICAgICAgIGRlbW9TaGFwZS5jZWxscy5mb3JFYWNoKGNlbGwgPT4gXG4gICAgLy8gICAgICAgICAgICAgY2FudmFzMkQuZHJhd1JlY3QoXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBjZWxsLmNvb3JkcywgXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBkZW1vU2hhcGUuY29sb3IsIFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuU1RST0tFX0NPTE9SLCBcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfQ0VMTF9TSVpFLFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9DRUxMX1NJWkVcbiAgICAvLyAgICAgICAgICAgICAgICAgKVxuICAgIC8vICAgICAgICAgICAgICk7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyBwcml2YXRlIGRyYXdTY29yZSgpOiB2b2lkIHtcbiAgICAvLyAgICAgY2FudmFzMkQuZHJhd1RleHQoXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuU0NPUkVfTEFCRUwgKyB0aGlzLl9zY29yZS50b1N0cmluZygpLCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TQ09SRV9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5GT05UX0NPTE9SLCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TQ09SRV9MQUJFTF9QT1NJVElPTixcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TQ09SRV9MQUJFTF9QT1NJVElPTi5BTElHTk1FTlRcbiAgICAvLyAgICAgICAgICk7XG4gICAgLy8gfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fZ2FtZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLl9mcmFtZSA9IDA7IFxuICAgICAgICB0aGlzLl91cGRhdGVFdmVyeVhGcmFtZXMgPSBHQU1FX0NPTkZJRy5VUERBVEVfQUZURVJfWF9GUkFNRVM7XG4gICAgICAgIHRoaXMuX21hcC5pbml0KCk7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlVHlwZTogU2hhcGVUeXBlID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVNoYXBlVHlwZSgpO1xuICAgICAgICB0aGlzLl9zaGFwZVR5cGVzUXVldWUgPSBbbmV3U2hhcGVUeXBlXTtcbiAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUgPSB0aGlzLmJ1aWxkU2hhcGUodGhpcy5nZW5lcmF0ZVJhbmRvbVNoYXBlVHlwZSgpKTtcblxuICAgICAgICB0aGlzLl9tYXAuYWRkU2hhcGUodGhpcy5fbW92aW5nU2hhcGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXQoKTtcbiAgICAgICAgaWYoKyt0aGlzLl9mcmFtZSAlIHRoaXMuX3VwZGF0ZUV2ZXJ5WEZyYW1lcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKCF0aGlzLl9tYXAuZG9TaGFwZUFjdGlvbih0aGlzLl9tb3ZpbmdTaGFwZSwgJ2Rvd24nKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVGaWxsZWRMaW5lcygpO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdTaGFwZVR5cGU6IFNoYXBlVHlwZSA9IHRoaXMuZ2VuZXJhdGVSYW5kb21TaGFwZVR5cGUoKTtcbiAgICAgICAgICAgIHRoaXMuX3NoYXBlVHlwZXNRdWV1ZS51bnNoaWZ0KG5ld1NoYXBlVHlwZSk7XG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IHRoaXMuYnVpbGRTaGFwZSh0aGlzLl9zaGFwZVR5cGVzUXVldWUucG9wKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9nYW1lT3ZlciA9ICF0aGlzLl9tYXAuYWRkU2hhcGUodGhpcy5fbW92aW5nU2hhcGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGRyYXcoKTogdm9pZCB7XG4gICAgICAgIC8vIHRoaXMuZHJhd1Njb3JlKCk7XG4gICAgICAgIC8vIHRoaXMuZHJhd1NoYXBlc0luUXVldWUoKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tICcuL2dhbWUuY29uZmlnJztcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tICcuL2dlb20vVmVjdG9yMic7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSAnLi9zaGFwZS9DZWxsJztcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi9zaGFwZS9TaGFwZSc7XG5cbmNsYXNzIFNWRyB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfc3ZnIDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfc2hhcGVzID0gbmV3IE1hcDxTaGFwZSwgU1ZHRWxlbWVudD4oKVxuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3RvcihzdmcgOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9zdmcgPSBzdmc7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgY2xlYXIoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLl9zdmcuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuXG4gICAgcHVibGljIGRyYXdTaGFwZShzaGFwZTogU2hhcGUsIGNlbGxTaXplOiBudW1iZXIpIHtcbiAgICAgICAgaWYodGhpcy5fc2hhcGVzLmhhcyhzaGFwZSkpIHsgcmV0dXJuIHRoaXMuX3NoYXBlcy5nZXQoc2hhcGUpIH1cblxuICAgICAgICBjb25zdCBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuXG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5kcmF3Q2VsbChjZWxsLCBjZWxsU2l6ZSwgc2hhcGUuY29sb3IpO1xuXG4gICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChyZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoR0FNRV9DT05GSUcuU0hPV19PUklHSU5TKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKTtcbiAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJjeFwiLCAoc2hhcGUub3JpZ2luLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiY3lcIiwgKHNoYXBlLm9yaWdpbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcInJcIiwgJzUnKTtcbiAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsICcjRkZGRkZGJyk7XG5cbiAgICAgICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKG9yaWdpbik7XG4gICAgICAgIH1cblxuICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChzaGFwZS5wb3NpdGlvbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChzaGFwZS5wb3NpdGlvbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIHRoaXMuX3N2Zy5hcHBlbmRDaGlsZChncm91cCk7XG5cbiAgICAgICAgdGhpcy5fc2hhcGVzLnNldChzaGFwZSwgZ3JvdXApO1xuXG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhd0NlbGwoY2VsbDogQ2VsbCwgY2VsbFNpemU6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xuICAgICAgICBjb25zdCBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJnXCIpO1xuICAgICAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpO1xuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInhcIiwgKGNlbGwuY29vcmRzLlggKiBjZWxsU2l6ZSArIGNlbGxTaXplLzIwKS50b1N0cmluZygpKTtcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChjZWxsLmNvb3Jkcy5ZICogY2VsbFNpemUgKyBjZWxsU2l6ZS8yMCkudG9TdHJpbmcoKSk7XG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgKGNlbGxTaXplIC0gY2VsbFNpemUvMTApLnRvU3RyaW5nKCkpO1xuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCAoY2VsbFNpemUgLSBjZWxsU2l6ZS8xMCkudG9TdHJpbmcoKSk7XG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwicnlcIiwgKGNlbGxTaXplLzEwKS50b1N0cmluZygpKTtcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJyeFwiLCAoY2VsbFNpemUvMTApLnRvU3RyaW5nKCkpO1xuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgY29sb3IpO1xuICAgICAgICBnLmFwcGVuZENoaWxkKHJlY3QpO1xuXG4gICAgICAgIGNvbnN0IHVwcGVyID0gY2VsbC5zaGFwZS5jZWxscy5maW5kKHVwQ2VsbCA9PiBjZWxsLmNvb3Jkcy5YID09PSB1cENlbGwuY29vcmRzLlggJiYgY2VsbC5jb29yZHMuWSAtIDEgPT09IHVwQ2VsbC5jb29yZHMuWSk7XG5cbiAgICAgICAgaWYoIXVwcGVyKSB7XG4gICAgICAgICAgICBjb25zdCBoaWdobGlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBhdGhcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiAnTScsXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkczogbmV3IFZlY3RvcjIoMCwgMClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogJ0wnLFxuICAgICAgICAgICAgICAgICAgICBjb29yZHM6IG5ldyBWZWN0b3IyKGNlbGxTaXplLzUsIGNlbGxTaXplLzUpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdMJyxcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzOiBuZXcgVmVjdG9yMihjZWxsU2l6ZSAtIGNlbGxTaXplLzUsIGNlbGxTaXplLzUpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICdMJyxcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzOiBuZXcgVmVjdG9yMihjZWxsU2l6ZSwgMClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogJ0wnLFxuICAgICAgICAgICAgICAgICAgICBjb29yZHM6IG5ldyBWZWN0b3IyKDAsIDApXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0ubWFwKGMgPT4gYCR7Yy5jb21tYW5kfSR7KGNlbGwuY29vcmRzLlggKiBjZWxsU2l6ZSkgKyBjLmNvb3Jkcy5YfSAkeyhjZWxsLmNvb3Jkcy5ZICogY2VsbFNpemUpICsgYy5jb29yZHMuWX1gKS5qb2luKCcgJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaGlnaGxpZ2h0LnNldEF0dHJpYnV0ZShcImRcIiwgcGF0aCk7XG4gICAgICAgICAgICBoaWdobGlnaHQuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCAnI0YwRjBGMCcpO1xuICAgICAgICAgICAgaGlnaGxpZ2h0LnNldEF0dHJpYnV0ZShcImZpbGwtb3BhY2l0eVwiLCAnMC41Jyk7XG5cbiAgICAgICAgICAgIGcuYXBwZW5kQ2hpbGQoaGlnaGxpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVTaGFwZShzaGFwZTogU2hhcGUsIGNlbGxTaXplOiBudW1iZXIpIHtcbiAgICAgICAgaWYodGhpcy5fc2hhcGVzLmhhcyhzaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5fc2hhcGVzLmdldChzaGFwZSk7XG4gICAgICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChzaGFwZS5wb3NpdGlvbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieFwiLCAoc2hhcGUucG9zaXRpb24uWCAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkZXN0cm95U2hhcGUoc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIGlmKHRoaXMuX3NoYXBlcy5oYXMoc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuX3NoYXBlcy5nZXQoc2hhcGUpO1xuICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLl9zaGFwZXMuZGVsZXRlKHNoYXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZWRyYXdTaGFwZShzaGFwZTogU2hhcGUsIGNlbGxTaXplOiBudW1iZXIpIHtcbiAgICAgICAgaWYodGhpcy5fc2hhcGVzLmhhcyhzaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5fc2hhcGVzLmdldChzaGFwZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGdyb3VwLmlubmVySFRNTCA9ICcnXG5cbiAgICAgICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuZHJhd0NlbGwoY2VsbCwgY2VsbFNpemUsIHNoYXBlLmNvbG9yKTtcbiAgICBcbiAgICAgICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChyZWN0KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZihHQU1FX0NPTkZJRy5TSE9XX09SSUdJTlMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiY3hcIiwgKHNoYXBlLm9yaWdpbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJjeVwiLCAoc2hhcGUub3JpZ2luLlkgKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcInJcIiwgJzUnKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiZmlsbFwiLCAnI0ZGRkZGRicpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChvcmlnaW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChzaGFwZS5wb3NpdGlvbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieVwiLCAoc2hhcGUucG9zaXRpb24uWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3Qgc3ZnRWxlbWVudCA6IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKSBhcyBIVE1MRWxlbWVudDtcbmV4cG9ydCBjb25zdCBTVkdDb250ZXh0ID0gbmV3IFNWRyhzdmdFbGVtZW50KTtcbiIsImV4cG9ydCBjb25zdCBHQU1FX0NPTkZJRyA6IGFueSA9IHtcbiAgICAvLyBDT05GSUdTXG4gICAgU0hPV19PUklHSU5TOiBmYWxzZSxcblxuICAgIC8vIFBIWVNJQ1NcbiAgICBVUERBVEVfQUZURVJfWF9GUkFNRVM6IDQwLFxuXG4gICAgLy8gU0laSU5HXG4gICAgR0FNRV9XSURUSDogMTUsXG4gICAgR0FNRV9IRUlHSFQ6IDIwLFxuICAgIENBTlZBU19NSU5fV0lEVEg6IDMwMCxcbiAgICBDQU5WQVNfTUlOX0hFSUdIVDogNDAwLFxuICAgIENFTExfU0laRTogMjAsXG4gICAgTkVYVF9TSEFQRV9DRUxMX1NJWkU6IDUsXG4gICAgU1RST0tFX1dJRFRIOiAwLjUsXG5cbiAgICAvLyBDT0xPUlNcbiAgICBCQUNLR1JPVU5EX0NPTE9SOiAnIzI4MzYzQicsXG4gICAgU1RST0tFX0NPTE9SOiAnYmxhY2snLFxuICAgIFNIQVBFX0NPTE9SUzogW1wiI0Y5QjM4RlwiLCBcIiNCRjZDODZcIiwgXCIjODRBRjlDXCIsIFwiIzZENUM4MFwiLCBcIiNGRkEzRDBcIiwgXCIjNDM5RjlFXCIsIFwiI0VGNUYzQ1wiXSxcbiAgICBcbiAgICAvLyBURVhUU1xuICAgIFNDT1JFX0xBQkVMX0ZPTlQ6ICcxMHB4IENvbWljIFNhbnMgTVMnLFxuICAgIE5FWFRfU0hBUEVfTEFCRUxfRk9OVDogJzEwcHggQ29taWMgU2FucyBNUycsXG4gICAgR0FNRV9PVkVSX0xBQkVMX0ZPTlQ6ICcyNXB4IENvbWljIFNhbnMgTVMnLFxuICAgIEdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX0ZPTlQ6ICcxNXB4IENvbWljIFNhbnMgTVMnLFxuICAgIEZPTlRfQ09MT1I6ICd3aGl0ZScsXG4gICAgU0NPUkVfTEFCRUw6ICdTY29yZTogJyxcbiAgICBORVhUX1NIQVBFX0xBQkVMOiAnTmV4dCBTaGFwZTogJyxcbiAgICBHQU1FX09WRVJfTEFCRUw6ICdHYW1lIE92ZXIhJyxcbiAgICBHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTDogJ1lvdXIgU2NvcmU6ICcsXG5cbiAgICAvLyBQT1NJVElPTlNcbiAgICBORVhUX1NIQVBFX1BPU0lUSU9OOiB7WDogMjgzLCBZOiA2fSxcbiAgICBTQ09SRV9MQUJFTF9QT1NJVElPTjoge1g6IDUsIFk6IDEzLCBBTElHTk1FTlQ6ICdsZWZ0J30sXG4gICAgTkVYVF9TSEFQRV9MQUJFTF9QT1NJVElPTjoge1g6IDIxNSwgWTogMTMsIEFMSUdOTUVOVDogJ2xlZnQnfSxcbiAgICBHQU1FX09WRVJfTEFCRUxfUE9TSVRJT046IHtYOiAxNTAsIFk6IDIwMCwgQUxJR05NRU5UOiAnY2VudGVyJ30sXG4gICAgR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUxfUE9TSVRJT046IHtYOiAxNTAsIFk6IDIzNSwgQUxJR05NRU5UOiAnY2VudGVyJ30sXG5cbiAgICAvLyBLRVlTXG4gICAgU1RBUlRfS0VZOiAzMixcbiAgICBMRUZUX0tFWTogMzcsXG4gICAgUklHSFRfS0VZOiAzOSxcbiAgICBVUF9LRVk6IDM4LFxuICAgIERPV05fS0VZOiA0MCxcbiAgICBEUk9QOiAxMyxcblxuICAgIC8vIFJVTEVTXG4gICAgRklMTEVEX0xJTkVfQk9OVVM6IDEwMCxcbiAgICBEUk9QUEVEX1NIQVBFX0JPTlVTOiAyLFxuICAgIExPV0VSRURfU0hBUEVfQk9OVVM6IDEsXG59O1xuIiwiXG5leHBvcnQgY2xhc3MgVmVjdG9yMiB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfeDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3k6IG51bWJlcjtcblxuICAgIC8vLS0tLS0tQ29uc3RydWN0b3ItLS0tLS0vL1xuXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgIHRoaXMuX3kgPSB5O1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG5cbiAgICBnZXQgWCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3g7XG4gICAgfVxuICAgIFxuICAgIGdldCBZKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5feTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IFplcm8oKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMigwLCAwKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBhZGRYKHg6IG51bWJlcik6IFZlY3RvcjIge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5feCwgdGhpcy5feSkuYWRkVG9YKHgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRZKHk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5feCwgdGhpcy5feSkuYWRkVG9ZKHkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUb1goeDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgICAgIHRoaXMuX3ggKz0geDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFRvWSh5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICAgICAgdGhpcy5feSArPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkKHggOiBudW1iZXIsIHk6IG51bWJlcik6IFZlY3RvcjJ7XG4gICAgICAgIHRoaXMuYWRkVG9YKHgpO1xuICAgICAgICB0aGlzLmFkZFRvWSh5KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSIsIlxuY2xhc3MgS2V5Ym9hcmQge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIF9rZXlzUHJlc3NlZCA6IGJvb2xlYW5bXSA9IFtdO1xuICAgIFxuICAgIC8vLS0tLS0tQ29uc3RydWN0b3ItLS0tLS0vL1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge3RoaXMua2V5RG93bihlKSB9KTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVByaXZhdGUgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIGtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIDogdm9pZHtcbiAgICAgICAgdGhpcy5fa2V5c1ByZXNzZWRbZXZlbnQua2V5Q29kZV0gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIHJlc2V0KCkgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fa2V5c1ByZXNzZWQgPSBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNQcmVzc2VkKGtleUNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5c1ByZXNzZWRba2V5Q29kZV07XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3Qga2V5Ym9hcmQgPSBuZXcgS2V5Ym9hcmQoKTsiLCJpbXBvcnQgeyBTaGFwZSB9IGZyb20gJy4vLi4vc2hhcGUvU2hhcGUnO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gXCIuLi9zaGFwZS9DZWxsXCI7XG5pbXBvcnQgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi4vZ2VvbS9WZWN0b3IyJztcblxuZXhwb3J0IGNsYXNzIEdhbWVNYXAgZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF9tYXA6IENlbGxbXVtdO1xuICAgIHByaXZhdGUgX3NoYXBlczogU2hhcGVbXSA9IFtdO1xuICAgIHByaXZhdGUgX2hlaWdodDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG5cbiAgICAvLy0tLS0tLVByb3BlcnRpZXMtLS0tLS0vL1xuICAgIFxuICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0IHdpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIGluaXQoKTogdm9pZHtcbiAgICAgICAgdGhpcy5fbWFwID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IobGV0IGk6IG51bWJlciA9IDAgOyBpIDwgdGhpcy5faGVpZ2h0IDsgaSsrICl7XG4gICAgICAgICAgICB0aGlzLl9tYXBbaV0gPSBbXTtcblxuICAgICAgICAgICAgZm9yKGxldCBqOiBudW1iZXIgPSAwIDsgaiA8IHRoaXMuX3dpZHRoIDsgaisrKXtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBbaV1bal0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkU2hhcGUoc2hhcGU6IFNoYXBlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmKCF0aGlzLmlzU2hhcGVWYWxpZFBsYWNlKHNoYXBlKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgICAgICB0aGlzLl9zaGFwZXMucHVzaChzaGFwZSk7XG4gICAgICAgIHRoaXMuZW1pdCgnbmV3U2hhcGUnLCBzaGFwZSk7XG4gICAgICAgIHRoaXMuY2FjaGVTaGFwZUNlbGxzKHNoYXBlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBkb1NoYXBlQWN0aW9uKHNoYXBlOiBTaGFwZSwgYWN0aW9uTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHByb3BhYmxlU2hhcGUgPSBzaGFwZS5jbG9uZSgpO1xuICAgICAgICBwcm9wYWJsZVNoYXBlLmRvKGFjdGlvbk5hbWUpO1xuXG4gICAgICAgIGlmKHRoaXMuaXNTaGFwZVZhbGlkUGxhY2UocHJvcGFibGVTaGFwZSwgc2hhcGUpKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2hhcGVDYWNoZShzaGFwZSk7XG4gICAgICAgICAgICBzaGFwZS5kbyhhY3Rpb25OYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaGFwZUNlbGxzKHNoYXBlKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuZW1pdChgJHthY3Rpb25OYW1lfVNoYXBlYCwgc2hhcGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVTaGFwZShzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9zaGFwZXMuaW5kZXhPZihzaGFwZSwgMCk7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTaGFwZUNhY2hlKHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMuX3NoYXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzSW5NYXAoY29vcmRzOiBWZWN0b3IyKSB7XG4gICAgICAgIGNvbnN0IFt4LCB5XSA9IFtjb29yZHMuWCwgY29vcmRzLlldO1xuXG4gICAgICAgIHJldHVybiB4ID49IDAgJiYgeCA8IHRoaXMuX3dpZHRoICYmIHkgPj0gMCAmJiB5IDwgdGhpcy5faGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDZWxsKGNvb3JkczogVmVjdG9yMikgOiBDZWxsIHtcbiAgICAgICAgaWYodGhpcy5pc0luTWFwKGNvb3JkcykgJiYgdHlwZW9mIHRoaXMuX21hcFtjb29yZHMuWV1bY29vcmRzLlhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcFtjb29yZHMuWV1bY29vcmRzLlhdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzQ2VsbEZpbGxlZChjb29yZHM6IFZlY3RvcjIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZWxsKGNvb3Jkcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhclNoYXBlQ2FjaGUoc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLmlzSW5NYXAoY2VsbC5wb3NpdGlvbikpIHsgXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2NlbGwuWV1bY2VsbC5YXSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhY2hlU2hhcGVDZWxscyhzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgc2hhcGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNJbk1hcChjZWxsLnBvc2l0aW9uKSkgeyBcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBbY2VsbC5ZXVtjZWxsLlhdID0gY2VsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYW55RmlsbGVkT25Sb3cocm93OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcFtyb3ddLnNvbWUoY2VsbCA9PiB0eXBlb2YgY2VsbCAhPT0gJ3VuZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNTaGFwZVZhbGlkUGxhY2Uoc2hhcGU6IFNoYXBlLCBpZ25vcmVTaGFwZT86IFNoYXBlKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzaGFwZS5jZWxscy5ldmVyeShjZWxsID0+IHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmlzSW5NYXAoY2VsbC5wb3NpdGlvbikpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvbkNlbGwgPSB0aGlzLmdldENlbGwoY2VsbC5wb3NpdGlvbik7XG5cbiAgICAgICAgICAgIGlmKGNvbGxpc2lvbkNlbGwpIHtcbiAgICAgICAgICAgICAgICBpZihpZ25vcmVTaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWdub3JlU2hhcGUuaXNQYXJ0T2ZTaGFwZShjb2xsaXNpb25DZWxsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUZpbGxlZExpbmVzKCk6IG51bWJlciB7XG4gICAgICAgICAgICBcbiAgICAgICAgbGV0IGZpbGxlZExpbmVzQ291bnQgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHRoaXMuX21hcC5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGxlZExpbmUgOiBib29sZWFuID0gdGhpcy5fbWFwW2ldLmV2ZXJ5KGNlbGwgPT4gdHlwZW9mIGNlbGwgIT09ICd1bmRlZmluZWQnKTtcblxuICAgICAgICAgICAgaWYoZmlsbGVkTGluZSkge1xuICAgICAgICAgICAgICAgIGZpbGxlZExpbmVzQ291bnQrKztcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBbaV0uZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFNoYXBlID0gdGhpcy5fc2hhcGVzLmZpbmQoc2hhcGUgPT4gc2hhcGUuY2VsbHMuaW5jbHVkZXMoY2VsbCkpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsU2hhcGUucmVtb3ZlQ2VsbChjZWxsKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmKGNlbGxTaGFwZS5jZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2hhcGUoY2VsbFNoYXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZXN0cm95U2hhcGUnLCBjZWxsU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjaGFuZ2VTaGFwZScsIGNlbGxTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvcihsZXQgbGluZSA9IDA7IGxpbmUgPCBpOyBsaW5lKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwW2xpbmVdLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjZWxsKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29vcmRzLmFkZFRvWSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZVNoYXBlJywgY2VsbC5zaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5zcGxpY2UoaSwxKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93OiB1bmRlZmluZWRbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLl93aWR0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Jvd1tqXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVuc2hpZnQobmV3Um93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWxsZWRMaW5lc0NvdW50O1xuICAgIH1cbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL2dlb20vVmVjdG9yMlwiO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi4vc2hhcGUvU2hhcGVcIjtcblxuZXhwb3J0IGNsYXNzIENlbGwge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgX2Nvb3JkcyA6IFZlY3RvcjI7XG4gICAgcHJpdmF0ZSBfc2hhcGUgOiBTaGFwZTtcblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgZ2V0IGNvb3JkcygpIDogVmVjdG9yMiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb29yZHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgY29vcmRzKHYgOiBWZWN0b3IyKSB7XG4gICAgICAgIHRoaXMuX2Nvb3JkcyA9IHY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzaGFwZSgpIDogU2hhcGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hhcGU7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgc2hhcGUodiA6IFNoYXBlKSB7XG4gICAgICAgIHRoaXMuX3NoYXBlID0gdjtcbiAgICB9XG5cblxuICAgIC8vLS0tLS0tQ29uc3RydWN0b3ItLS0tLS0vL1xuXG4gICAgY29uc3RydWN0b3IoY29vcmRzOiBWZWN0b3IyLCBzaGFwZT86IFNoYXBlKSB7XG4gICAgICAgIHRoaXMuX3NoYXBlID0gc2hhcGU7XG4gICAgICAgIHRoaXMuX2Nvb3JkcyA9IGNvb3JkcztcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBnZXQgcG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLlgsIHRoaXMuWSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBYKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hhcGUucG9zaXRpb24uWCArIHRoaXMuX2Nvb3Jkcy5YO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgWSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlLnBvc2l0aW9uLlkgKyB0aGlzLl9jb29yZHMuWTtcbiAgICB9XG59IiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gJy4vLi4vZ2VvbS9WZWN0b3IyJztcbmltcG9ydCB7IENlbGwgfSBmcm9tICcuL0NlbGwnO1xuXG5pbnRlcmZhY2UgSVNoYXBlQWN0aW9uIHtcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgZG86IChzaGFwZTogU2hhcGUpID0+IHZvaWRcbn1cblxuYWJzdHJhY3QgY2xhc3MgU2hhcGVBY3Rpb25Nb3ZlIHtcbiAgICBtb3ZlKHNoYXBlOiBTaGFwZSwgeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xuICAgICAgICBzaGFwZS5wb3NpdGlvbi5hZGRUb1goeCkuYWRkVG9ZKHkpO1xuICAgIH1cbn1cblxuY2xhc3MgU2hhcGVBY3Rpb25Eb3duIGV4dGVuZHMgU2hhcGVBY3Rpb25Nb3ZlIHtcbiAgICBwdWJsaWMgbmFtZSA9ICdkb3duJztcblxuICAgIHB1YmxpYyBkbyhzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5tb3ZlKHNoYXBlLCAwLCAxKTtcbiAgICB9XG59XG5cbmNsYXNzIFNoYXBlQWN0aW9uUmlnaHQgZXh0ZW5kcyBTaGFwZUFjdGlvbk1vdmUge1xuICAgIHB1YmxpYyBuYW1lID0gJ3JpZ2h0JztcblxuICAgIHB1YmxpYyBkbyhzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5tb3ZlKHNoYXBlLCAxLCAwKTtcbiAgICB9XG59XG5cbmNsYXNzIFNoYXBlQWN0aW9uTGVmdCBleHRlbmRzIFNoYXBlQWN0aW9uTW92ZSB7XG4gICAgcHVibGljIG5hbWUgPSAnbGVmdCc7XG5cbiAgICBwdWJsaWMgZG8oc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHRoaXMubW92ZShzaGFwZSwgLTEsIDApO1xuICAgIH1cbn1cblxuY2xhc3MgU2hhcGVBY3Rpb25Sb3RhdGUge1xuICAgIHB1YmxpYyBuYW1lID0gJ3JvdGF0ZSc7XG5cbiAgICBwdWJsaWMgZG8oc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB4ID0gY2VsbC5jb29yZHMuWDtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBjZWxsLmNvb3Jkcy5ZO1xuXG4gICAgICAgICAgICBsZXQgbmV3WCA9ICh5ICsgc2hhcGUub3JpZ2luLlggLSBzaGFwZS5vcmlnaW4uWSk7XG4gICAgICAgICAgICBsZXQgbmV3WSA9IChzaGFwZS5vcmlnaW4uWCArIHNoYXBlLm9yaWdpbi5ZIC0geCAtIDEpO1xuXG4gICAgICAgICAgICBjZWxsLmNvb3JkcyA9IG5ldyBWZWN0b3IyKG5ld1gsIG5ld1kpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTaGFwZSB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfY2VsbHM6IENlbGxbXSA9IFtdO1xuICAgIHByaXZhdGUgX2NvbG9yOiBzdHJpbmcgPSAnJztcbiAgICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMiA9IG51bGw7XG4gICAgcHJpdmF0ZSBfb3JpZ2luOiBWZWN0b3IyID0gbnVsbDtcbiAgICBwcml2YXRlIF9hY3Rpb25zOiBJU2hhcGVBY3Rpb25bXSA9IFtcbiAgICAgICAgbmV3IFNoYXBlQWN0aW9uRG93bigpLFxuICAgICAgICBuZXcgU2hhcGVBY3Rpb25MZWZ0KCksXG4gICAgICAgIG5ldyBTaGFwZUFjdGlvblJpZ2h0KCksXG4gICAgICAgIG5ldyBTaGFwZUFjdGlvblJvdGF0ZSgpXG4gICAgXTtcblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgZ2V0IGNlbGxzKCkgOiBDZWxsW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VsbHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgY2VsbHMoY2VsbHMgOiBDZWxsW10pIHtcbiAgICAgICAgdGhpcy5fY2VsbHMgPSBjZWxscztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHBvc2l0aW9uKCkgOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0IGNvbG9yKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgb3JpZ2luKCkgOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbjtcbiAgICB9XG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cbiAgICBcbiAgICBjb25zdHJ1Y3RvcihjZWxsczogQ2VsbFtdLCBwb3NpdGlvbjogVmVjdG9yMiwgY29sb3I6IHN0cmluZywgb3JpZ2luOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoMC41LCAwLjUpKSB7XG4gICAgICAgIHRoaXMuX2NlbGxzID0gY2VsbHM7XG4gICAgICAgIHRoaXMuX2NlbGxzLmZvckVhY2goY2VsbCA9PiBjZWxsLnNoYXBlID0gdGhpcyk7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMuX29yaWdpbiA9IG9yaWdpbjtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBkbyhhY3Rpb25OYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5maW5kKGFjdGlvbiA9PiBhY3Rpb24ubmFtZSA9PT0gYWN0aW9uTmFtZSkuZG8odGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUNlbGwoY2VsbDogQ2VsbCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NlbGxzLmluZGV4T2YoY2VsbCwgMCk7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXNQYXJ0T2ZTaGFwZShjZWxsOiBDZWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jZWxscy5pbmNsdWRlcyhjZWxsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvbmUoKTogU2hhcGUge1xuICAgICAgICBjb25zdCBuZXdDZWxscyA9IHRoaXMuX2NlbGxzLm1hcChjZWxsID0+IG5ldyBDZWxsKGNlbGwuY29vcmRzKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IFNoYXBlKFxuICAgICAgICAgICAgbmV3Q2VsbHMsIFxuICAgICAgICAgICAgbmV3IFZlY3RvcjIodGhpcy5fcG9zaXRpb24uWCwgdGhpcy5fcG9zaXRpb24uWSksIFxuICAgICAgICAgICAgdGhpcy5fY29sb3IsIFxuICAgICAgICAgICAgbmV3IFZlY3RvcjIodGhpcy5fb3JpZ2luLlgsIHRoaXMuX29yaWdpbi5ZKVxuICAgICAgICApOyBcbiAgICB9XG59IiwiaW1wb3J0IHsgU2hhcGVUeXBlIH0gZnJvbSBcIi4vU2hhcGVUeXBlXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uL2dlb20vVmVjdG9yMlwiO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tIFwiLi9TaGFwZVwiO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gXCIuL0NlbGxcIjtcblxuZXhwb3J0IGNsYXNzIFNoYXBlRmFjdG9yeSB7XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBjcmVhdGVTaGFwZShzaGFwZVR5cGU6IFNoYXBlVHlwZSwgcG9zaXRpb246IFZlY3RvcjIsIGNvbG9yOiBzdHJpbmcpOiBTaGFwZSB7XG4gICAgICAgIGxldCBzaGFwZUNlbGxzOiBDZWxsW10gPSBbXTtcbiAgICAgICAgbGV0IG9yaWdpbjogVmVjdG9yMjtcblxuICAgICAgICBzd2l0Y2goc2hhcGVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5JOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIC0xKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAyKVxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcblxuICAgICAgICAgICAgICAgIG9yaWdpbiA9IG5ldyBWZWN0b3IyKDAsIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuSjpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAtMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLkw6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgLTEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLk86XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDApLCBcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuICAgICAgICAgICAgICAgIG9yaWdpbiA9IG5ldyBWZWN0b3IyKDAsIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuUzpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMSwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuWjpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuVDpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuXG4gICAgICAgICAgICAgICAgb3JpZ2luID0gbmV3IFZlY3RvcjIoMC41LCAxLjUpO1xuICAgICAgICAgICAgICAgIGJyZWFrOyAgXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFNoYXBlKHNoYXBlQ2VsbHMsIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkpLCBjb2xvciwgb3JpZ2luKTtcbiAgICB9XG59IiwiZXhwb3J0IGVudW0gU2hhcGVUeXBlIHtcbiAgICBJLFxuICAgIEosXG4gICAgTCxcbiAgICBTLFxuICAgIFosXG4gICAgTyxcbiAgICBUXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiJdLCJuYW1lcyI6WyJ0ZXRyaXMiLCJSZWZsZWN0T3duS2V5cyIsIlIiLCJSZWZsZWN0IiwiUmVmbGVjdEFwcGx5IiwiYXBwbHkiLCJ0YXJnZXQiLCJyZWNlaXZlciIsImFyZ3MiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImNhbGwiLCJvd25LZXlzIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNvbmNhdCIsIk51bWJlcklzTmFOIiwiTnVtYmVyIiwiaXNOYU4iLCJ2YWx1ZSIsIkV2ZW50RW1pdHRlciIsImluaXQiLCJ0aGlzIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9uY2UiLCJlbWl0dGVyIiwibmFtZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZXJyb3JMaXN0ZW5lciIsImVyciIsInJlbW92ZUxpc3RlbmVyIiwicmVzb2x2ZXIiLCJzbGljZSIsImFyZ3VtZW50cyIsImV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lciIsImhhbmRsZXIiLCJmbGFncyIsIm9uIiwiYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIiLCJfZXZlbnRzIiwidW5kZWZpbmVkIiwiX2V2ZW50c0NvdW50IiwiX21heExpc3RlbmVycyIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJjaGVja0xpc3RlbmVyIiwibGlzdGVuZXIiLCJUeXBlRXJyb3IiLCJfZ2V0TWF4TGlzdGVuZXJzIiwidGhhdCIsIl9hZGRMaXN0ZW5lciIsInR5cGUiLCJwcmVwZW5kIiwibSIsImV2ZW50cyIsImV4aXN0aW5nIiwid2FybmluZyIsImNyZWF0ZSIsIm5ld0xpc3RlbmVyIiwiZW1pdCIsInVuc2hpZnQiLCJwdXNoIiwibGVuZ3RoIiwid2FybmVkIiwidyIsIkVycm9yIiwiU3RyaW5nIiwiY291bnQiLCJjb25zb2xlIiwid2FybiIsIm9uY2VXcmFwcGVyIiwiZmlyZWQiLCJ3cmFwRm4iLCJfb25jZVdyYXAiLCJzdGF0ZSIsIndyYXBwZWQiLCJiaW5kIiwiX2xpc3RlbmVycyIsInVud3JhcCIsImV2bGlzdGVuZXIiLCJhcnIiLCJyZXQiLCJBcnJheSIsImkiLCJ1bndyYXBMaXN0ZW5lcnMiLCJhcnJheUNsb25lIiwibGlzdGVuZXJDb3VudCIsIm4iLCJjb3B5IiwiYWRkRXZlbnRMaXN0ZW5lciIsIndyYXBMaXN0ZW5lciIsImFyZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJzZXQiLCJSYW5nZUVycm9yIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXRNYXhMaXN0ZW5lcnMiLCJnZXRNYXhMaXN0ZW5lcnMiLCJkb0Vycm9yIiwiZXJyb3IiLCJlciIsIm1lc3NhZ2UiLCJjb250ZXh0IiwibGVuIiwibGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdCIsInBvc2l0aW9uIiwib3JpZ2luYWxMaXN0ZW5lciIsInNoaWZ0IiwiaW5kZXgiLCJwb3AiLCJzcGxpY2VPbmUiLCJvZmYiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJrZXkiLCJrZXlzIiwicmF3TGlzdGVuZXJzIiwiZXZlbnROYW1lcyIsIndpZHRoIiwiaGVpZ2h0IiwiX3NoYXBlVHlwZXNRdWV1ZSIsIl9tb3ZpbmdTaGFwZSIsIl9zaGFwZVR5cGVzIiwiU2hhcGVUeXBlIiwiSSIsIkoiLCJMIiwiTyIsIlMiLCJaIiwiVCIsIl9zaGFwZUZhY3RvcnkiLCJTaGFwZUZhY3RvcnkiLCJfbWFwIiwiR2FtZU1hcCIsInNoYXBlIiwiU1ZHQ29udGV4dCIsImRyYXdTaGFwZSIsIkdBTUVfQ09ORklHIiwiQ0VMTF9TSVpFIiwidXBkYXRlU2hhcGUiLCJyZWRyYXdTaGFwZSIsImRlc3Ryb3lTaGFwZSIsIl9nYW1lT3ZlciIsIl9zY29yZSIsImluY3JlYXNlU2NvcmUiLCJ0b0FkZCIsImhhbmRsZUlucHV0Iiwia2V5Ym9hcmQiLCJpc1ByZXNzZWQiLCJVUF9LRVkiLCJkb1NoYXBlQWN0aW9uIiwiRE9XTl9LRVkiLCJMT1dFUkVEX1NIQVBFX0JPTlVTIiwiTEVGVF9LRVkiLCJSSUdIVF9LRVkiLCJoYW5kbGVGaWxsZWRMaW5lcyIsImZpbGxlZExpbmVzQ291bnQiLCJyZW1vdmVGaWxsZWRMaW5lcyIsIkZJTExFRF9MSU5FX0JPTlVTIiwiX3VwZGF0ZUV2ZXJ5WEZyYW1lcyIsImdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYnVpbGRTaGFwZSIsInJhbmRvbVNoYXBlVHlwZUluZGV4Iiwic2hhcGVDb2xvciIsIlNIQVBFX0NPTE9SUyIsImNyZWF0ZVNoYXBlIiwiVmVjdG9yMiIsIl9mcmFtZSIsIlVQREFURV9BRlRFUl9YX0ZSQU1FUyIsIm5ld1NoYXBlVHlwZSIsImFkZFNoYXBlIiwidXBkYXRlIiwiZHJhdyIsIkdhbWVXb3JsZCIsInN2ZyIsIl9zaGFwZXMiLCJNYXAiLCJfc3ZnIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJjZWxsU2l6ZSIsImhhcyIsImdyb3VwIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJjZWxscyIsImZvckVhY2giLCJjZWxsIiwicmVjdCIsImRyYXdDZWxsIiwiY29sb3IiLCJhcHBlbmRDaGlsZCIsIlNIT1dfT1JJR0lOUyIsInNldEF0dHJpYnV0ZSIsIm9yaWdpbiIsIlgiLCJ0b1N0cmluZyIsIlkiLCJnIiwiY29vcmRzIiwiZmluZCIsInVwQ2VsbCIsImhpZ2hsaWdodCIsInBhdGgiLCJjb21tYW5kIiwibWFwIiwiYyIsImpvaW4iLCJyZW1vdmUiLCJkZWxldGUiLCJzdmdFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJTVkciLCJHQU1FX1dJRFRIIiwiR0FNRV9IRUlHSFQiLCJDQU5WQVNfTUlOX1dJRFRIIiwiQ0FOVkFTX01JTl9IRUlHSFQiLCJORVhUX1NIQVBFX0NFTExfU0laRSIsIlNUUk9LRV9XSURUSCIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJTVFJPS0VfQ09MT1IiLCJTQ09SRV9MQUJFTF9GT05UIiwiTkVYVF9TSEFQRV9MQUJFTF9GT05UIiwiR0FNRV9PVkVSX0xBQkVMX0ZPTlQiLCJHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9GT05UIiwiRk9OVF9DT0xPUiIsIlNDT1JFX0xBQkVMIiwiTkVYVF9TSEFQRV9MQUJFTCIsIkdBTUVfT1ZFUl9MQUJFTCIsIkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMIiwiTkVYVF9TSEFQRV9QT1NJVElPTiIsIlNDT1JFX0xBQkVMX1BPU0lUSU9OIiwiQUxJR05NRU5UIiwiTkVYVF9TSEFQRV9MQUJFTF9QT1NJVElPTiIsIkdBTUVfT1ZFUl9MQUJFTF9QT1NJVElPTiIsIkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX1BPU0lUSU9OIiwiU1RBUlRfS0VZIiwiRFJPUCIsIkRST1BQRURfU0hBUEVfQk9OVVMiLCJ4IiwieSIsIl94IiwiX3kiLCJhZGRYIiwiYWRkVG9YIiwiYWRkWSIsImFkZFRvWSIsImFkZCIsIl9rZXlzUHJlc3NlZCIsImUiLCJrZXlEb3duIiwiZXZlbnQiLCJrZXlDb2RlIiwicmVzZXQiLCJLZXlib2FyZCIsIl93aWR0aCIsIl9oZWlnaHQiLCJqIiwiaXNTaGFwZVZhbGlkUGxhY2UiLCJjYWNoZVNoYXBlQ2VsbHMiLCJhY3Rpb25OYW1lIiwicHJvcGFibGVTaGFwZSIsImNsb25lIiwiZG8iLCJjbGVhclNoYXBlQ2FjaGUiLCJyZW1vdmVTaGFwZSIsImluZGV4T2YiLCJzcGxpY2UiLCJpc0luTWFwIiwiZ2V0Q2VsbCIsImlzQ2VsbEZpbGxlZCIsImFueUZpbGxlZE9uUm93Iiwicm93Iiwic29tZSIsImlnbm9yZVNoYXBlIiwiZXZlcnkiLCJjb2xsaXNpb25DZWxsIiwiaXNQYXJ0T2ZTaGFwZSIsImNlbGxTaGFwZSIsImluY2x1ZGVzIiwicmVtb3ZlQ2VsbCIsImxpbmUiLCJuZXdSb3ciLCJfc2hhcGUiLCJfY29vcmRzIiwidiIsIkNlbGwiLCJtb3ZlIiwiU2hhcGVBY3Rpb25Nb3ZlIiwibmV3WCIsIm5ld1kiLCJfY2VsbHMiLCJfY29sb3IiLCJfcG9zaXRpb24iLCJfb3JpZ2luIiwiX2FjdGlvbnMiLCJTaGFwZUFjdGlvbkRvd24iLCJTaGFwZUFjdGlvbkxlZnQiLCJTaGFwZUFjdGlvblJpZ2h0IiwiU2hhcGVBY3Rpb25Sb3RhdGUiLCJhY3Rpb24iLCJTaGFwZSIsInNoYXBlVHlwZSIsInNoYXBlQ2VsbHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2FtZUxvb3AiLCJnYW1lT3ZlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=