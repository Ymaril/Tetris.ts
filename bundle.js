(()=>{"use strict";var e,t,n,r,o={187:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var o,i,s,h;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=p(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,h=c,console&&console.warn&&console.warn(h)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):_(o,o.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return p(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var p=i[e];if(void 0===p)return!1;if("function"==typeof p)r(p,this,t);else{var h=p.length,c=_(p,h);for(n=0;n<h;++n)r(c[n],this,t)}return!0},i.prototype.addListener=function(e,t){return h(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return h(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},352:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameWorld=void 0;var r=n(540),o=n(215),i=n(105),s=n(808),a=n(728),p=n(847),h=n(38),c=function(){function e(e,t){this._shapeTypesQueue=[],this._movingShape=null,this._shapeTypes=[s.ShapeType.I,s.ShapeType.J,s.ShapeType.L,s.ShapeType.O,s.ShapeType.S,s.ShapeType.Z,s.ShapeType.T],this._shapeFactory=new p.ShapeFactory,this._map=new a.GameMap(e,t),this._map.on("newShape",(function(e){h.SVGContext.drawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("moveShape",(function(e){h.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("rotateShape",(function(e){h.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("changeShape",(function(e){h.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("destroyShape",(function(e){h.SVGContext.destroyShape(e)})),this.init()}return Object.defineProperty(e.prototype,"gameOver",{get:function(){return this._gameOver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),e.prototype.increaseScore=function(e){this._score+=e},e.prototype.dropShape=function(){for(var e=0;!this.lowerShape();)e++;return e},e.prototype.handleInput=function(){var e=this,t=0;if(o.keyboard.isPressed(r.GAME_CONFIG.DROP)){var n=this.dropShape();this.increaseScore(n*r.GAME_CONFIG.DROPPED_SHAPE_BONUS)}else o.keyboard.isPressed(r.GAME_CONFIG.UP_KEY)?this.rotateShape():o.keyboard.isPressed(r.GAME_CONFIG.DOWN_KEY)?(this.lowerShape(),this.increaseScore(r.GAME_CONFIG.LOWERED_SHAPE_BONUS)):o.keyboard.isPressed(r.GAME_CONFIG.LEFT_KEY)?t=-1:o.keyboard.isPressed(r.GAME_CONFIG.RIGHT_KEY)&&(t=1);0!==t&&(this._movingShape.cells.some((function(n){var r=n.position.addX(t),o=e._map.getCell(r);return r.X<0||r.X===e._map.width||o&&!e._movingShape.isPartOfShape(o)}))||this._map.moveShape(this._movingShape,t,0))},e.prototype.rotateShape=function(){var e=this,t=this._movingShape.clone();t.rotate(),t.cells.every((function(t){var n=e._map.getCell(t.position);return e._map.isInMap(t.position)&&(!n||n&&e._movingShape.isPartOfShape(n))}))&&this._map.rotateShape(this._movingShape)},e.prototype.lowerShape=function(){var e=this,t=this._movingShape.cells.some((function(t){var n=t.position.addY(1),r=e._map.getCell(n);return n.Y===e._map.height||r&&!e._movingShape.isPartOfShape(r)}));return t||this._map.moveShape(this._movingShape,0,1),t},e.prototype.handleFilledLines=function(){var e=this._map.removeFilledLines();e>0&&(this.increaseScore(e*r.GAME_CONFIG.FILLED_LINE_BONUS),this._updateEveryXFrames>0&&this._updateEveryXFrames--)},e.prototype.checkForGameOver=function(){return this._map.anyFilledOnRow(0)},e.prototype.generateRandomShapeType=function(){var e=Math.floor(Math.random()*this._shapeTypes.length);return this._shapeTypes[e]},e.prototype.buildShape=function(e){var t=Math.floor(Math.random()*this._shapeTypes.length),n=r.GAME_CONFIG.SHAPE_COLORS[t];return this._shapeFactory.createShape(e,new i.Vector2(Math.floor(this._map.width/2),-3),n)},e.prototype.init=function(){this._gameOver=!1,this._score=0,this._frame=0,this._updateEveryXFrames=r.GAME_CONFIG.UPDATE_AFTER_X_FRAMES,this._map.init();var e=this.generateRandomShapeType();this._shapeTypesQueue=[e],this._movingShape=this.buildShape(this.generateRandomShapeType()),this._map.addShape(this._movingShape)},e.prototype.update=function(){if(this.handleInput(),!(++this._frame%this._updateEveryXFrames)&&this.lowerShape()&&(this.handleFilledLines(),this._gameOver=this.checkForGameOver(),!this._gameOver)){var e=this.generateRandomShapeType();this._shapeTypesQueue.unshift(e),this._movingShape=this.buildShape(this._shapeTypesQueue.pop()),this._map.addShape(this._movingShape)}},e.prototype.draw=function(){},e}();t.GameWorld=c},38:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGContext=void 0;var r=n(540),o=function(){function e(e){this._shapes=new Map,this._svg=e}return e.prototype.clear=function(){this._svg.innerHTML=""},e.prototype.drawShape=function(e,t){if(this._shapes.has(e))return this._shapes.get(e);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.cells.forEach((function(r){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",(r.coords.X*t).toString()),o.setAttribute("y",(r.coords.Y*t).toString()),o.setAttribute("width",t.toString()),o.setAttribute("height",t.toString()),o.setAttribute("fill",e.color),n.appendChild(o)})),r.GAME_CONFIG.SHOW_ORIGINS){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",(e.origin.X*t).toString()),o.setAttribute("cy",(e.origin.Y*t).toString()),o.setAttribute("r","5"),o.setAttribute("fill","#FFFFFF"),n.appendChild(o)}return n.setAttribute("x",(e.position.X*t).toString()),n.setAttribute("y",(e.position.Y*t).toString()),this._svg.appendChild(n),this._shapes.set(e,n),n},e.prototype.updateShape=function(e,t){if(this._shapes.has(e)){var n=this._shapes.get(e);n.setAttribute("y",(e.position.Y*t).toString()),n.setAttribute("x",(e.position.X*t).toString())}},e.prototype.destroyShape=function(e){this._shapes.has(e)&&(this._shapes.get(e).remove(),this._shapes.delete(e))},e.prototype.redrawShape=function(e,t){if(this._shapes.has(e)){var n=this._shapes.get(e);if(n.innerHTML="",e.cells.forEach((function(r){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",(r.coords.X*t).toString()),o.setAttribute("y",(r.coords.Y*t).toString()),o.setAttribute("width",t.toString()),o.setAttribute("height",t.toString()),o.setAttribute("fill",e.color),n.appendChild(o)})),r.GAME_CONFIG.SHOW_ORIGINS){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",(e.origin.X*t).toString()),o.setAttribute("cy",(e.origin.Y*t).toString()),o.setAttribute("r","5"),o.setAttribute("fill","#FFFFFF"),n.appendChild(o)}n.setAttribute("x",(e.position.X*t).toString()),n.setAttribute("y",(e.position.Y*t).toString())}},e}(),i=document.getElementById("game");t.SVGContext=new o(i)},540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_CONFIG=void 0,t.GAME_CONFIG={SHOW_ORIGINS:!1,UPDATE_AFTER_X_FRAMES:40,GAME_WIDTH:15,GAME_HEIGHT:20,CANVAS_MIN_WIDTH:300,CANVAS_MIN_HEIGHT:400,CELL_SIZE:20,NEXT_SHAPE_CELL_SIZE:5,STROKE_WIDTH:.5,BACKGROUND_COLOR:"#28363B",STROKE_COLOR:"black",SHAPE_COLORS:["#F9B38F","#BF6C86","#84AF9C","#6D5C80","#FFA3D0","#439F9E","#EF5F3C"],SCORE_LABEL_FONT:"10px Comic Sans MS",NEXT_SHAPE_LABEL_FONT:"10px Comic Sans MS",GAME_OVER_LABEL_FONT:"25px Comic Sans MS",GAME_OVER_YOUR_SCORE_LABEL_FONT:"15px Comic Sans MS",FONT_COLOR:"white",SCORE_LABEL:"Score: ",NEXT_SHAPE_LABEL:"Next Shape: ",GAME_OVER_LABEL:"Game Over!",GAME_OVER_YOUR_SCORE_LABEL:"Your Score: ",NEXT_SHAPE_POSITION:{X:283,Y:6},SCORE_LABEL_POSITION:{X:5,Y:13,ALIGNMENT:"left"},NEXT_SHAPE_LABEL_POSITION:{X:215,Y:13,ALIGNMENT:"left"},GAME_OVER_LABEL_POSITION:{X:150,Y:200,ALIGNMENT:"center"},GAME_OVER_YOUR_SCORE_LABEL_POSITION:{X:150,Y:235,ALIGNMENT:"center"},START_KEY:32,LEFT_KEY:37,RIGHT_KEY:39,UP_KEY:38,DOWN_KEY:40,DROP:13,FILLED_LINE_BONUS:100,DROPPED_SHAPE_BONUS:2,LOWERED_SHAPE_BONUS:1}},105:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var n=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Zero",{get:function(){return new e(0,0)},enumerable:!1,configurable:!0}),e.prototype.addX=function(t){return new e(this._x,this._y).addToX(t)},e.prototype.addY=function(t){return new e(this._x,this._y).addToY(t)},e.prototype.addToX=function(e){return this._x+=e,this},e.prototype.addToY=function(e){return this._y+=e,this},e.prototype.add=function(e,t){return this.addToX(e),this.addToY(t),this},e}();t.Vector2=n},215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.keyboard=void 0;var n=function(){function e(){var e=this;this._keysPressed=[],document.addEventListener("keydown",(function(t){e.keyDown(t)}))}return e.prototype.keyDown=function(e){this._keysPressed[e.keyCode]=!0},e.prototype.reset=function(){this._keysPressed=[]},e.prototype.isPressed=function(e){return this._keysPressed[e]},e}();t.keyboard=new n},728:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameMap=void 0;var i=function(e){function t(t,n){var r=e.call(this)||this;return r._shapes=[],r.init(),r._width=t,r._height=n,r}return o(t,e),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._map=[];for(var e=0;e<this._height;e++){this._map[e]=[];for(var t=0;t<this._width;t++)this._map[e][t]=void 0}},t.prototype.addShape=function(e){this._shapes.push(e),this.emit("newShape",e),this.cacheShapeCells(e)},t.prototype.isInMap=function(e){var t=[e.X,e.Y],n=t[0],r=t[1];return n>=0&&n<this._width&&r>=0&&r<this._height},t.prototype.getCell=function(e){if(this.isInMap(e)&&void 0!==this._map[e.Y][e.X])return this._map[e.Y][e.X]},t.prototype.isCellFilled=function(e){return!!this.getCell(e)},t.prototype.moveShape=function(e,t,n){this.clearShapeCache(e),e.move(t,n),this.cacheShapeCells(e),this.emit("moveShape",e)},t.prototype.clearShapeCache=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=void 0)}))},t.prototype.cacheShapeCells=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=e)}))},t.prototype.anyFilledOnRow=function(e){return this._map[e].some((function(e){return void 0!==e}))},t.prototype.removeFilledLines=function(){for(var e=this,t=0,n=0;n<this._map.length;n++)if(this._map[n].every((function(e){return void 0!==e}))){t++,this._map[n].forEach((function(t){var n=e._shapes.find((function(e){return e.cells.includes(t)}));n.removeCell(t),e.emit("changeShape",n),0===n.cells.length&&(e.removeShape(n),e.emit("destroyShape",n))}));for(var r=0;r<n;r++)this._map[r].forEach((function(t){t&&(t.coords.addToY(1),e.emit("changeShape",t.shape))}));this._map.splice(n,1);for(var o=[],i=0;i<this._width;i++)o[i]=void 0;this._map.unshift(o)}return t},t.prototype.rotateShape=function(e){this.clearShapeCache(e),e.rotate(),this.cacheShapeCells(e),this.emit("rotateShape",e)},t.prototype.removeShape=function(e){var t=this._shapes.indexOf(e,0);t>-1&&(this.clearShapeCache(e),this._shapes.splice(t,1))},t}(n(187).EventEmitter);t.GameMap=i},185:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;var r=n(105),o=function(){function e(e,t){this._shape=t,this._coords=e}return Object.defineProperty(e.prototype,"coords",{get:function(){return this._coords},set:function(e){this._coords=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new r.Vector2(this.X,this.Y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){return this._shape.position.X+this._coords.X},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._shape.position.Y+this._coords.Y},enumerable:!1,configurable:!0}),e}();t.Cell=o},189:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var r=n(105),o=n(185),i=function(){function e(e,t,n,o){void 0===o&&(o=new r.Vector2(.5,.5));var i=this;this._cells=[],this._color="",this._position=null,this._origin=null,this._cells=e,this._cells.forEach((function(e){return e.shape=i})),this._position=t,this._color=n,this._origin=o}return Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},set:function(e){this._cells=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),e.prototype.rotate=function(){var e=this;this._cells.forEach((function(t){var n=t.coords.X,o=t.coords.Y+e._origin.X-e._origin.Y,i=e._origin.X+e._origin.Y-n-1;t.coords=new r.Vector2(o,i)}))},e.prototype.removeCell=function(e){var t=this._cells.indexOf(e,0);t>-1&&this._cells.splice(t,1)},e.prototype.isPartOfShape=function(e){return this._cells.includes(e)},e.prototype.clone=function(){return new e(this._cells.map((function(e){return new o.Cell(e.coords)})),this._position,this._color,this._origin)},e.prototype.move=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._position.addToX(e).addToY(t)},e}();t.Shape=i},847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory=void 0;var r=n(808),o=n(105),i=n(189),s=n(185),a=function(){function e(){}return e.prototype.createShape=function(e,t,n){var a,p=[];switch(e){case r.ShapeType.I:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(0,2)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.J:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.L:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.O:p=[new o.Vector2(-1,0),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.S:p=[new o.Vector2(0,0),new o.Vector2(1,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.Z:p=[new o.Vector2(0,0),new o.Vector2(-1,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.T:p=[new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(.5,1.5)}return new i.Shape(p,new o.Vector2(t.X,t.Y),n,a)},e}();t.ShapeFactory=a},808:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeType=void 0,(n=t.ShapeType||(t.ShapeType={}))[n.I=0]="I",n[n.J=1]="J",n[n.L=2]="L",n[n.S=3]="S",n[n.Z=4]="Z",n[n.O=5]="O",n[n.T=6]="T"}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,s),n.exports}t=s(352),n=s(215),r=s(540),e=new t.GameWorld(r.GAME_CONFIG.GAME_WIDTH,r.GAME_CONFIG.GAME_HEIGHT),function t(){e.gameOver||(e.update(),e.draw()),n.keyboard.reset(),requestAnimationFrame(t)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBVTdTLEtBQUthLEVBQU9DLFFBQVNELEVBQVFBLEVBQU9DLFFBQVM4UixHQUdwRS9SLEVBQU9DLFFackJmLFNBQ0EsU0FDQSxTQUtJekIsRUFBUyxJQUFJLEVBQUFxTixVQUFVLEVBQUFsRSxZQUFZNEYsV0FBWSxFQUFBNUYsWUFBWTZGLGFBc0MvRCxTQUFTMkUsSUFDRjNULEVBQU80VCxXQVZWNVQsRUFBT21OLFNBTVBuTixFQUFPb04sUUFXUCxFQUFBbkQsU0FBU2tILFFBQ1QwQyxzQkFBc0JGLEdBOUN0QkEsSSIsInNvdXJjZXMiOlsid2VicGFjazovL1RldHJpcy8uL3NyYy9HYW1lLnRzIiwid2VicGFjazovL1RldHJpcy8uL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9HYW1lV29ybGQudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL1NWRy50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvZ2FtZS5jb25maWcudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL2dlb20vVmVjdG9yMi50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvaW5wdXQvS2V5Ym9hcmQudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL21hcC9HYW1lTWFwLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9DZWxsLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9TaGFwZS50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvc2hhcGUvU2hhcGVGYWN0b3J5LnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9zaGFwZS9TaGFwZVR5cGUudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzL3dlYnBhY2svYm9vdHN0cmFwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVXb3JsZCB9IGZyb20gJy4vR2FtZVdvcmxkJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9pbnB1dC9LZXlib2FyZCc7XG5pbXBvcnQgeyBHQU1FX0NPTkZJRyB9IGZyb20gJy4vZ2FtZS5jb25maWcnO1xuXG5sZXQgdGV0cmlzOiBHYW1lV29ybGQ7XG5cbmZ1bmN0aW9uIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRldHJpcyA9IG5ldyBHYW1lV29ybGQoR0FNRV9DT05GSUcuR0FNRV9XSURUSCwgR0FNRV9DT05GSUcuR0FNRV9IRUlHSFQpO1xuICAgIGdhbWVMb29wKCk7XG59XG5cbmZ1bmN0aW9uIGdhbWVPdmVyU2NyZWVuKCk6IHZvaWQge1xuICAgIC8vIGNhbnZhczJELmNsZWFyKCk7XG4gICAgLy8gY2FudmFzMkQuZHJhd0JhY2tncm91bmQoR0FNRV9DT05GSUcuQkFDS0dST1VORF9DT0xPUik7XG4gICAgLy8gY2FudmFzMkQuZHJhd1RleHQoXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTCwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTF9QT1NJVElPTixcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX0xBQkVMX1BPU0lUSU9OLkFMSUdOTUVOVFxuICAgIC8vICk7XG5cbiAgICAvLyBjYW52YXMyRC5kcmF3VGV4dChcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUwgKyB0ZXRyaXMuc2NvcmUsIFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX1BPU0lUSU9OLFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfTEFCRUxfUE9TSVRJT04uQUxJR05NRU5UXG4gICAgLy8gKTtcblxuICAgIC8vIGlmKGtleWJvYXJkLmlzUHJlc3NlZChHQU1FX0NPTkZJRy5TVEFSVF9LRVkpKSB7XG4gICAgLy8gICAgIHRldHJpcy5pbml0KCk7XG4gICAgLy8gfVxufVxuXG5mdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB7XG4gICAgdGV0cmlzLnVwZGF0ZSgpO1xufVxuXG5mdW5jdGlvbiBkcmF3KCk6IHZvaWQge1xuICAgIC8vIGNhbnZhczJELmNsZWFyKCk7XG4gICAgLy8gY2FudmFzMkQuZHJhd0JhY2tncm91bmQoR0FNRV9DT05GSUcuQkFDS0dST1VORF9DT0xPUik7XG4gICAgdGV0cmlzLmRyYXcoKTtcbn1cblxuZnVuY3Rpb24gZ2FtZUxvb3AoKTogdm9pZCB7XG4gICAgaWYodGV0cmlzLmdhbWVPdmVyKSB7XG4gICAgICAgIGdhbWVPdmVyU2NyZWVuKCk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICBkcmF3KCk7XG4gICAgfVxuICAgIGtleWJvYXJkLnJlc2V0KCk7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGdhbWVMb29wKTtcbn1cblxuc3RhcnQoKTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tICcuL2dhbWUuY29uZmlnJztcbmltcG9ydCB7IGtleWJvYXJkIH0gZnJvbSAnLi9pbnB1dC9LZXlib2FyZCc7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi9nZW9tL1ZlY3RvcjInO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuL3NoYXBlL1NoYXBlJztcbmltcG9ydCB7IFNoYXBlVHlwZSB9IGZyb20gJy4vc2hhcGUvU2hhcGVUeXBlJztcbmltcG9ydCB7IEdhbWVNYXAgfSBmcm9tICcuL21hcC9HYW1lTWFwJztcbmltcG9ydCB7IFNoYXBlRmFjdG9yeSB9IGZyb20gJy4vc2hhcGUvU2hhcGVGYWN0b3J5JztcbmltcG9ydCB7IFNWR0NvbnRleHQgfSBmcm9tICcuL1NWRyc7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSAnLi9zaGFwZS9DZWxsJztcblxuZXhwb3J0IGNsYXNzIEdhbWVXb3JsZCB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfbWFwOiBHYW1lTWFwO1xuICAgIHByaXZhdGUgX3VwZGF0ZUV2ZXJ5WEZyYW1lczogbnVtYmVyO1xuICAgIHByaXZhdGUgX2ZyYW1lOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfc2hhcGVUeXBlc1F1ZXVlOiBTaGFwZVR5cGVbXSA9IFtdO1xuICAgIHByaXZhdGUgX3Njb3JlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfZ2FtZU92ZXIgOiBib29sZWFuO1xuICAgIHByaXZhdGUgX3NoYXBlRmFjdG9yeTogU2hhcGVGYWN0b3J5O1xuICAgIHByaXZhdGUgX21vdmluZ1NoYXBlOiBTaGFwZSA9IG51bGw7XG5cbiAgICBwcml2YXRlIF9zaGFwZVR5cGVzOiBTaGFwZVR5cGVbXSA9IFtcbiAgICAgICAgU2hhcGVUeXBlLkksXG4gICAgICAgIFNoYXBlVHlwZS5KLFxuICAgICAgICBTaGFwZVR5cGUuTCxcbiAgICAgICAgU2hhcGVUeXBlLk8sXG4gICAgICAgIFNoYXBlVHlwZS5TLFxuICAgICAgICBTaGFwZVR5cGUuWixcbiAgICAgICAgU2hhcGVUeXBlLlRcbiAgICBdO1xuXG4gICAgLy8tLS0tLS1Qcm9wZXJ0aWVzLS0tLS0tLy9cbiAgICBcbiAgICBwdWJsaWMgZ2V0IGdhbWVPdmVyKCkgOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWVPdmVyO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgc2NvcmUoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY29yZTtcbiAgICB9XG4gICAgXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9zaGFwZUZhY3RvcnkgPSBuZXcgU2hhcGVGYWN0b3J5KCk7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBHYW1lTWFwKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLl9tYXAub24oJ25ld1NoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC5kcmF3U2hhcGUoc2hhcGUsIEdBTUVfQ09ORklHLkNFTExfU0laRSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tYXAub24oJ21vdmVTaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQudXBkYXRlU2hhcGUoc2hhcGUsIEdBTUVfQ09ORklHLkNFTExfU0laRSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tYXAub24oJ3JvdGF0ZVNoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC5yZWRyYXdTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbignY2hhbmdlU2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LnJlZHJhd1NoYXBlKHNoYXBlLCBHQU1FX0NPTkZJRy5DRUxMX1NJWkUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdkZXN0cm95U2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LmRlc3Ryb3lTaGFwZShzaGFwZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVByaXZhdGUgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIGluY3JlYXNlU2NvcmUodG9BZGQ6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fc2NvcmUgKz0gdG9BZGQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkcm9wU2hhcGUoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IG51bU9mQ2VsbHMgPSAwO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUoIXRoaXMubG93ZXJTaGFwZSgpKXtcbiAgICAgICAgICAgIG51bU9mQ2VsbHMrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtT2ZDZWxscztcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUlucHV0KCk6IHZvaWQge1xuXG4gICAgICAgIGxldCB0b01vdmVYID0gMDtcblxuICAgICAgICBpZihrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuRFJPUCkpIHtcbiAgICAgICAgICAgIGxldCBjZWxsc0Ryb3BwZWQgPSB0aGlzLmRyb3BTaGFwZSgpO1xuICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVNjb3JlKGNlbGxzRHJvcHBlZCAqIEdBTUVfQ09ORklHLkRST1BQRURfU0hBUEVfQk9OVVMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLlVQX0tFWSkpIHtcbiAgICAgICAgICAgIHRoaXMucm90YXRlU2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuRE9XTl9LRVkpKSB7XG4gICAgICAgICAgICB0aGlzLmxvd2VyU2hhcGUoKTtcbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTY29yZShHQU1FX0NPTkZJRy5MT1dFUkVEX1NIQVBFX0JPTlVTKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuTEVGVF9LRVkpKSB7XG4gICAgICAgICAgICB0b01vdmVYID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLlJJR0hUX0tFWSkpIHtcbiAgICAgICAgICAgIHRvTW92ZVggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodG9Nb3ZlWCAhPT0gMCl7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRCb3JkZXIgPSB0aGlzLl9tb3ZpbmdTaGFwZS5jZWxscy5zb21lKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IGNlbGwucG9zaXRpb24uYWRkWCh0b01vdmVYKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvbkNlbGwgPSB0aGlzLl9tYXAuZ2V0Q2VsbChuZXdQb3MpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Bvcy5YIDwgMCB8fCBuZXdQb3MuWCA9PT0gdGhpcy5fbWFwLndpZHRoIHx8IGNvbGxpc2lvbkNlbGwgJiYgIXRoaXMuX21vdmluZ1NoYXBlLmlzUGFydE9mU2hhcGUoY29sbGlzaW9uQ2VsbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYoIXJlYWNoZWRCb3JkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAubW92ZVNoYXBlKHRoaXMuX21vdmluZ1NoYXBlLCB0b01vdmVYLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcm90YXRlU2hhcGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHByb3BhYmxlU2hhcGUgPSB0aGlzLl9tb3ZpbmdTaGFwZS5jbG9uZSgpO1xuICAgICAgICBwcm9wYWJsZVNoYXBlLnJvdGF0ZSgpO1xuXG4gICAgICAgIGxldCBwb3NzaWJsZVJvdGF0aW9uID0gcHJvcGFibGVTaGFwZS5jZWxscy5ldmVyeShjZWxsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvbkNlbGwgPSB0aGlzLl9tYXAuZ2V0Q2VsbChjZWxsLnBvc2l0aW9uKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5pc0luTWFwKGNlbGwucG9zaXRpb24pICYmICghY29sbGlzaW9uQ2VsbCB8fCBjb2xsaXNpb25DZWxsICYmIHRoaXMuX21vdmluZ1NoYXBlLmlzUGFydE9mU2hhcGUoY29sbGlzaW9uQ2VsbCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZihwb3NzaWJsZVJvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXAucm90YXRlU2hhcGUodGhpcy5fbW92aW5nU2hhcGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsb3dlclNoYXBlKCk6IGJvb2xlYW4ge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVhY2hlZEJvdHRvbSA9IHRoaXMuX21vdmluZ1NoYXBlLmNlbGxzLnNvbWUoY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdQb3MgPSBjZWxsLnBvc2l0aW9uLmFkZFkoMSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbGxpc2lvbkNlbGwgPSB0aGlzLl9tYXAuZ2V0Q2VsbChuZXdQb3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3UG9zLlkgPT09IHRoaXMuX21hcC5oZWlnaHQgfHwgKGNvbGxpc2lvbkNlbGwgJiYgIXRoaXMuX21vdmluZ1NoYXBlLmlzUGFydE9mU2hhcGUoY29sbGlzaW9uQ2VsbCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZighcmVhY2hlZEJvdHRvbSkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLm1vdmVTaGFwZSh0aGlzLl9tb3ZpbmdTaGFwZSwgMCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVhY2hlZEJvdHRvbTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZpbGxlZExpbmVzKCk6IHZvaWQge1xuICAgICAgICBcbiAgICAgICAgbGV0IGZpbGxlZExpbmVzQ291bnQgPSB0aGlzLl9tYXAucmVtb3ZlRmlsbGVkTGluZXMoKTtcblxuICAgICAgICBpZihmaWxsZWRMaW5lc0NvdW50ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVNjb3JlKGZpbGxlZExpbmVzQ291bnQgKiBHQU1FX0NPTkZJRy5GSUxMRURfTElORV9CT05VUyk7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuX3VwZGF0ZUV2ZXJ5WEZyYW1lcyA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVFdmVyeVhGcmFtZXMtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY2hlY2tGb3JHYW1lT3ZlcigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5hbnlGaWxsZWRPblJvdygwKTtcbiAgICB9IFxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVJhbmRvbVNoYXBlVHlwZSgpOiBTaGFwZVR5cGUge1xuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX3NoYXBlVHlwZXMubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZVR5cGVzW2luZGV4XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkU2hhcGUodHlwZTogU2hhcGVUeXBlKTogU2hhcGUge1xuICAgICAgICBjb25zdCByYW5kb21TaGFwZVR5cGVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX3NoYXBlVHlwZXMubGVuZ3RoKTtcbiAgICAgICAgbGV0IHNoYXBlQ29sb3IgPSBHQU1FX0NPTkZJRy5TSEFQRV9DT0xPUlNbcmFuZG9tU2hhcGVUeXBlSW5kZXhdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlRmFjdG9yeS5jcmVhdGVTaGFwZShcbiAgICAgICAgICAgICAgICAgICAgdHlwZSwgXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKE1hdGguZmxvb3IodGhpcy5fbWFwLndpZHRoIC8gMiksIC0zKSxcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVDb2xvclxuICAgICAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gcHJpdmF0ZSBkcmF3U2hhcGVzSW5RdWV1ZSgpOiB2b2lkIHtcbiAgICAvLyAgICAgY2FudmFzMkQuZHJhd1RleHQoXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9MQUJFTCwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9MQUJFTF9GT05ULCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5GT05UX0NPTE9SLCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0xBQkVMX1BPU0lUSU9OLFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfTEFCRUxfUE9TSVRJT04uQUxJR05NRU5UXG4gICAgLy8gICAgICAgICApO1xuICAgICAgICBcbiAgICAvLyAgICAgZm9yKGxldCBpID0gdGhpcy5fc2hhcGVUeXBlc1F1ZXVlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXtcbiAgICAvLyAgICAgICAgIGxldCBzaGFwZVR5cGUgPSB0aGlzLl9zaGFwZVR5cGVzUXVldWVbaV07XG4gICAgLy8gICAgICAgICBsZXQgaW5kZXhGcm9tRW5kID0gdGhpcy5fc2hhcGVUeXBlc1F1ZXVlLmxlbmd0aCAtIDEgLSBpO1xuICAgIC8vICAgICAgICAgbGV0IGRlbW9TaGFwZSA9IHRoaXMuX3NoYXBlRmFjdG9yeS5jcmVhdGVTaGFwZShcbiAgICAvLyAgICAgICAgICAgICAgICAgc2hhcGVUeXBlLCBcbiAgICAvLyAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX1BPU0lUSU9OLlggKyBpbmRleEZyb21FbmQgKiA0ICogR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9DRUxMX1NJWkUsIFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9QT1NJVElPTi5ZKSxcbiAgICAvLyAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuU0hBUEVfQ09MT1JTW3NoYXBlVHlwZV0sXG4gICAgLy8gICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfQ0VMTF9TSVpFXG4gICAgLy8gICAgICAgICAgICAgKTtcblxuICAgIC8vICAgICAgICAgZGVtb1NoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiBcbiAgICAvLyAgICAgICAgICAgICBjYW52YXMyRC5kcmF3UmVjdChcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29vcmRzLCBcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGRlbW9TaGFwZS5jb2xvciwgXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TVFJPS0VfQ09MT1IsIFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9DRUxMX1NJWkUsXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0NFTExfU0laRVxuICAgIC8vICAgICAgICAgICAgICAgICApXG4gICAgLy8gICAgICAgICAgICAgKTtcbiAgICAvLyAgICAgfVxuICAgIC8vIH1cblxuICAgIC8vIHByaXZhdGUgZHJhd1Njb3JlKCk6IHZvaWQge1xuICAgIC8vICAgICBjYW52YXMyRC5kcmF3VGV4dChcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TQ09SRV9MQUJFTCArIHRoaXMuX3Njb3JlLnRvU3RyaW5nKCksIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNDT1JFX0xBQkVMX0ZPTlQsIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLkZPTlRfQ09MT1IsIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNDT1JFX0xBQkVMX1BPU0lUSU9OLFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNDT1JFX0xBQkVMX1BPU0lUSU9OLkFMSUdOTUVOVFxuICAgIC8vICAgICAgICAgKTtcbiAgICAvLyB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBpbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zY29yZSA9IDA7XG4gICAgICAgIHRoaXMuX2ZyYW1lID0gMDsgXG4gICAgICAgIHRoaXMuX3VwZGF0ZUV2ZXJ5WEZyYW1lcyA9IEdBTUVfQ09ORklHLlVQREFURV9BRlRFUl9YX0ZSQU1FUztcbiAgICAgICAgdGhpcy5fbWFwLmluaXQoKTtcbiAgICAgICAgY29uc3QgbmV3U2hhcGVUeXBlOiBTaGFwZVR5cGUgPSB0aGlzLmdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlKCk7XG4gICAgICAgIHRoaXMuX3NoYXBlVHlwZXNRdWV1ZSA9IFtuZXdTaGFwZVR5cGVdO1xuICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IHRoaXMuYnVpbGRTaGFwZSh0aGlzLmdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlKCkpO1xuXG4gICAgICAgIHRoaXMuX21hcC5hZGRTaGFwZSh0aGlzLl9tb3ZpbmdTaGFwZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dCgpO1xuICAgICAgICBpZigrK3RoaXMuX2ZyYW1lICUgdGhpcy5fdXBkYXRlRXZlcnlYRnJhbWVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVhY2hlZEJvdHRvbSA9IHRoaXMubG93ZXJTaGFwZSgpO1xuICAgICAgICBpZihyZWFjaGVkQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUZpbGxlZExpbmVzKCk7XG4gICAgICAgICAgICB0aGlzLl9nYW1lT3ZlciA9IHRoaXMuY2hlY2tGb3JHYW1lT3ZlcigpO1xuICAgICAgICAgICAgaWYoIXRoaXMuX2dhbWVPdmVyKXtcbiAgICAgICAgICAgICAgICBsZXQgbmV3U2hhcGVUeXBlOiBTaGFwZVR5cGUgPSB0aGlzLmdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2hhcGVUeXBlc1F1ZXVlLnVuc2hpZnQobmV3U2hhcGVUeXBlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IHRoaXMuYnVpbGRTaGFwZSh0aGlzLl9zaGFwZVR5cGVzUXVldWUucG9wKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5hZGRTaGFwZSh0aGlzLl9tb3ZpbmdTaGFwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhpcy5kcmF3U2NvcmUoKTtcbiAgICAgICAgLy8gdGhpcy5kcmF3U2hhcGVzSW5RdWV1ZSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBHQU1FX0NPTkZJRyB9IGZyb20gJy4vZ2FtZS5jb25maWcnO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gJy4vZ2VvbS9WZWN0b3IyJztcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi9zaGFwZS9TaGFwZSc7XG5cbmNsYXNzIFNWRyB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfc3ZnIDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfc2hhcGVzID0gbmV3IE1hcDxTaGFwZSwgU1ZHRWxlbWVudD4oKVxuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3RvcihzdmcgOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9zdmcgPSBzdmc7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgY2xlYXIoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLl9zdmcuaW5uZXJIVE1MID0gJyc7XG4gICAgfVxuXG4gICAgcHVibGljIGRyYXdTaGFwZShzaGFwZTogU2hhcGUsIGNlbGxTaXplOiBudW1iZXIpIHtcbiAgICAgICAgaWYodGhpcy5fc2hhcGVzLmhhcyhzaGFwZSkpIHsgcmV0dXJuIHRoaXMuX3NoYXBlcy5nZXQoc2hhcGUpIH1cblxuICAgICAgICBjb25zdCBncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuXG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChjZWxsLmNvb3Jkcy5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChjZWxsLmNvb3Jkcy5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBjZWxsU2l6ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGNlbGxTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIHNoYXBlLmNvbG9yKTtcblxuICAgICAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQocmVjdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKEdBTUVfQ09ORklHLlNIT1dfT1JJR0lOUykge1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJjaXJjbGVcIik7XG4gICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiY3hcIiwgKHNoYXBlLm9yaWdpbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcImN5XCIsIChzaGFwZS5vcmlnaW4uWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJyXCIsICc1Jyk7XG4gICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiZmlsbFwiLCAnI0ZGRkZGRicpO1xuXG4gICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChvcmlnaW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieFwiLCAoc2hhcGUucG9zaXRpb24uWCAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieVwiLCAoc2hhcGUucG9zaXRpb24uWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcblxuICAgICAgICB0aGlzLl9zdmcuYXBwZW5kQ2hpbGQoZ3JvdXApO1xuXG4gICAgICAgIHRoaXMuX3NoYXBlcy5zZXQoc2hhcGUsIGdyb3VwKTtcblxuICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZVNoYXBlKHNoYXBlOiBTaGFwZSwgY2VsbFNpemU6IG51bWJlcikge1xuICAgICAgICBpZih0aGlzLl9zaGFwZXMuaGFzKHNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLl9zaGFwZXMuZ2V0KHNoYXBlKTtcbiAgICAgICAgICAgIGdyb3VwLnNldEF0dHJpYnV0ZShcInlcIiwgKHNoYXBlLnBvc2l0aW9uLlkgKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChzaGFwZS5wb3NpdGlvbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3lTaGFwZShzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgaWYodGhpcy5fc2hhcGVzLmhhcyhzaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5fc2hhcGVzLmdldChzaGFwZSk7XG4gICAgICAgICAgICBncm91cC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX3NoYXBlcy5kZWxldGUoc2hhcGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHJlZHJhd1NoYXBlKHNoYXBlOiBTaGFwZSwgY2VsbFNpemU6IG51bWJlcikge1xuICAgICAgICBpZih0aGlzLl9zaGFwZXMuaGFzKHNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLl9zaGFwZXMuZ2V0KHNoYXBlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZ3JvdXAuaW5uZXJIVE1MID0gJydcblxuICAgICAgICAgICAgc2hhcGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpO1xuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwieFwiLCAoY2VsbC5jb29yZHMuWCAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInlcIiwgKGNlbGwuY29vcmRzLlkgKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBjZWxsU2l6ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBjZWxsU2l6ZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgc2hhcGUuY29sb3IpO1xuICAgIFxuICAgICAgICAgICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKHJlY3QpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmKEdBTUVfQ09ORklHLlNIT1dfT1JJR0lOUykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiY2lyY2xlXCIpO1xuICAgICAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJjeFwiLCAoc2hhcGUub3JpZ2luLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcImN5XCIsIChzaGFwZS5vcmlnaW4uWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiclwiLCAnNScpO1xuICAgICAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsICcjRkZGRkZGJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKG9yaWdpbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdyb3VwLnNldEF0dHJpYnV0ZShcInhcIiwgKHNoYXBlLnBvc2l0aW9uLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChzaGFwZS5wb3NpdGlvbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBzdmdFbGVtZW50IDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZScpIGFzIEhUTUxFbGVtZW50O1xuZXhwb3J0IGNvbnN0IFNWR0NvbnRleHQgPSBuZXcgU1ZHKHN2Z0VsZW1lbnQpO1xuIiwiZXhwb3J0IGNvbnN0IEdBTUVfQ09ORklHIDogYW55ID0ge1xuICAgIC8vIENPTkZJR1NcbiAgICBTSE9XX09SSUdJTlM6IGZhbHNlLFxuXG4gICAgLy8gUEhZU0lDU1xuICAgIFVQREFURV9BRlRFUl9YX0ZSQU1FUzogNDAsXG5cbiAgICAvLyBTSVpJTkdcbiAgICBHQU1FX1dJRFRIOiAxNSxcbiAgICBHQU1FX0hFSUdIVDogMjAsXG4gICAgQ0FOVkFTX01JTl9XSURUSDogMzAwLFxuICAgIENBTlZBU19NSU5fSEVJR0hUOiA0MDAsXG4gICAgQ0VMTF9TSVpFOiAyMCxcbiAgICBORVhUX1NIQVBFX0NFTExfU0laRTogNSxcbiAgICBTVFJPS0VfV0lEVEg6IDAuNSxcblxuICAgIC8vIENPTE9SU1xuICAgIEJBQ0tHUk9VTkRfQ09MT1I6ICcjMjgzNjNCJyxcbiAgICBTVFJPS0VfQ09MT1I6ICdibGFjaycsXG4gICAgU0hBUEVfQ09MT1JTOiBbXCIjRjlCMzhGXCIsIFwiI0JGNkM4NlwiLCBcIiM4NEFGOUNcIiwgXCIjNkQ1QzgwXCIsIFwiI0ZGQTNEMFwiLCBcIiM0MzlGOUVcIiwgXCIjRUY1RjNDXCJdLFxuICAgIFxuICAgIC8vIFRFWFRTXG4gICAgU0NPUkVfTEFCRUxfRk9OVDogJzEwcHggQ29taWMgU2FucyBNUycsXG4gICAgTkVYVF9TSEFQRV9MQUJFTF9GT05UOiAnMTBweCBDb21pYyBTYW5zIE1TJyxcbiAgICBHQU1FX09WRVJfTEFCRUxfRk9OVDogJzI1cHggQ29taWMgU2FucyBNUycsXG4gICAgR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUxfRk9OVDogJzE1cHggQ29taWMgU2FucyBNUycsXG4gICAgRk9OVF9DT0xPUjogJ3doaXRlJyxcbiAgICBTQ09SRV9MQUJFTDogJ1Njb3JlOiAnLFxuICAgIE5FWFRfU0hBUEVfTEFCRUw6ICdOZXh0IFNoYXBlOiAnLFxuICAgIEdBTUVfT1ZFUl9MQUJFTDogJ0dhbWUgT3ZlciEnLFxuICAgIEdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMOiAnWW91ciBTY29yZTogJyxcblxuICAgIC8vIFBPU0lUSU9OU1xuICAgIE5FWFRfU0hBUEVfUE9TSVRJT046IHtYOiAyODMsIFk6IDZ9LFxuICAgIFNDT1JFX0xBQkVMX1BPU0lUSU9OOiB7WDogNSwgWTogMTMsIEFMSUdOTUVOVDogJ2xlZnQnfSxcbiAgICBORVhUX1NIQVBFX0xBQkVMX1BPU0lUSU9OOiB7WDogMjE1LCBZOiAxMywgQUxJR05NRU5UOiAnbGVmdCd9LFxuICAgIEdBTUVfT1ZFUl9MQUJFTF9QT1NJVElPTjoge1g6IDE1MCwgWTogMjAwLCBBTElHTk1FTlQ6ICdjZW50ZXInfSxcbiAgICBHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9QT1NJVElPTjoge1g6IDE1MCwgWTogMjM1LCBBTElHTk1FTlQ6ICdjZW50ZXInfSxcblxuICAgIC8vIEtFWVNcbiAgICBTVEFSVF9LRVk6IDMyLFxuICAgIExFRlRfS0VZOiAzNyxcbiAgICBSSUdIVF9LRVk6IDM5LFxuICAgIFVQX0tFWTogMzgsXG4gICAgRE9XTl9LRVk6IDQwLFxuICAgIERST1A6IDEzLFxuXG4gICAgLy8gUlVMRVNcbiAgICBGSUxMRURfTElORV9CT05VUzogMTAwLFxuICAgIERST1BQRURfU0hBUEVfQk9OVVM6IDIsXG4gICAgTE9XRVJFRF9TSEFQRV9CT05VUzogMSxcbn07XG4iLCJcbmV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF94OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfeTogbnVtYmVyO1xuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1Qcm9wZXJ0aWVzLS0tLS0tLy9cblxuICAgIGdldCBYKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5feDtcbiAgICB9XG4gICAgXG4gICAgZ2V0IFkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl95O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgWmVybygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKDAsIDApO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIGFkZFgoeDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLl94LCB0aGlzLl95KS5hZGRUb1goeCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFkoeTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLl94LCB0aGlzLl95KS5hZGRUb1koeSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFRvWCh4OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICAgICAgdGhpcy5feCArPSB4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVG9ZKHk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgICAgICB0aGlzLl95ICs9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGQoeCA6IG51bWJlciwgeTogbnVtYmVyKTogVmVjdG9yMntcbiAgICAgICAgdGhpcy5hZGRUb1goeCk7XG4gICAgICAgIHRoaXMuYWRkVG9ZKHkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59IiwiXG5jbGFzcyBLZXlib2FyZCB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgX2tleXNQcmVzc2VkIDogYm9vbGVhbltdID0gW107XG4gICAgXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7dGhpcy5rZXlEb3duKGUpIH0pO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHJpdmF0ZSBNZXRob2RzLS0tLS0tLy9cblxuICAgIHByaXZhdGUga2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkgOiB2b2lke1xuICAgICAgICB0aGlzLl9rZXlzUHJlc3NlZFtldmVudC5rZXlDb2RlXSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgcmVzZXQoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLl9rZXlzUHJlc3NlZCA9IFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1ByZXNzZWQoa2V5Q29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXlzUHJlc3NlZFtrZXlDb2RlXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBrZXlib2FyZCA9IG5ldyBLZXlib2FyZCgpOyIsImltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi8uLi9zaGFwZS9TaGFwZSc7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4uL3NoYXBlL0NlbGxcIjtcbmltcG9ydCBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKTtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tICcuLi9nZW9tL1ZlY3RvcjInO1xuXG5leHBvcnQgY2xhc3MgR2FtZU1hcCBleHRlbmRzIGV2ZW50cy5FdmVudEVtaXR0ZXIge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgX21hcDogQ2VsbFtdW107XG4gICAgcHJpdmF0ZSBfc2hhcGVzOiBTaGFwZVtdID0gW107XG4gICAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG4gICAgXG4gICAgcHVibGljIGdldCBoZWlnaHQoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgd2lkdGgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9XG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgaW5pdCgpOiB2b2lke1xuICAgICAgICB0aGlzLl9tYXAgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaTogbnVtYmVyID0gMCA7IGkgPCB0aGlzLl9oZWlnaHQgOyBpKysgKXtcbiAgICAgICAgICAgIHRoaXMuX21hcFtpXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IobGV0IGo6IG51bWJlciA9IDAgOyBqIDwgdGhpcy5fd2lkdGggOyBqKyspe1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcFtpXVtqXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTaGFwZShzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5fc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgICAgICB0aGlzLmVtaXQoJ25ld1NoYXBlJywgc2hhcGUpO1xuICAgICAgICB0aGlzLmNhY2hlU2hhcGVDZWxscyhzaGFwZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzSW5NYXAoY29vcmRzOiBWZWN0b3IyKSB7XG4gICAgICAgIGNvbnN0IFt4LCB5XSA9IFtjb29yZHMuWCwgY29vcmRzLlldO1xuXG4gICAgICAgIHJldHVybiB4ID49IDAgJiYgeCA8IHRoaXMuX3dpZHRoICYmIHkgPj0gMCAmJiB5IDwgdGhpcy5faGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDZWxsKGNvb3JkczogVmVjdG9yMikgOiBDZWxsIHtcbiAgICAgICAgaWYodGhpcy5pc0luTWFwKGNvb3JkcykgJiYgdHlwZW9mIHRoaXMuX21hcFtjb29yZHMuWV1bY29vcmRzLlhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcFtjb29yZHMuWV1bY29vcmRzLlhdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzQ2VsbEZpbGxlZChjb29yZHM6IFZlY3RvcjIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZWxsKGNvb3Jkcyk7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdmVTaGFwZShzaGFwZTogU2hhcGUsIHhfZGlmZjogbnVtYmVyLCB5X2RpZmY6IG51bWJlcikge1xuICAgICAgICB0aGlzLmNsZWFyU2hhcGVDYWNoZShzaGFwZSk7XG4gICAgICAgIHNoYXBlLm1vdmUoeF9kaWZmLCB5X2RpZmYpO1xuICAgICAgICB0aGlzLmNhY2hlU2hhcGVDZWxscyhzaGFwZSk7XG5cbiAgICAgICAgdGhpcy5lbWl0KCdtb3ZlU2hhcGUnLCBzaGFwZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhclNoYXBlQ2FjaGUoc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLmlzSW5NYXAoY2VsbC5wb3NpdGlvbikpIHsgXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2NlbGwuWV1bY2VsbC5YXSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhY2hlU2hhcGVDZWxscyhzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgc2hhcGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNJbk1hcChjZWxsLnBvc2l0aW9uKSkgeyBcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBbY2VsbC5ZXVtjZWxsLlhdID0gY2VsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYW55RmlsbGVkT25Sb3cocm93OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcFtyb3ddLnNvbWUoY2VsbCA9PiB0eXBlb2YgY2VsbCAhPT0gJ3VuZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVGaWxsZWRMaW5lcygpOiBudW1iZXIge1xuICAgICAgICAgICAgXG4gICAgICAgIGxldCBmaWxsZWRMaW5lc0NvdW50ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCB0aGlzLl9tYXAubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxsZWRMaW5lIDogYm9vbGVhbiA9IHRoaXMuX21hcFtpXS5ldmVyeShjZWxsID0+IHR5cGVvZiBjZWxsICE9PSAndW5kZWZpbmVkJyk7XG5cbiAgICAgICAgICAgIGlmKGZpbGxlZExpbmUpIHtcbiAgICAgICAgICAgICAgICBmaWxsZWRMaW5lc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2ldLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxTaGFwZSA9IHRoaXMuX3NoYXBlcy5maW5kKHNoYXBlID0+IHNoYXBlLmNlbGxzLmluY2x1ZGVzKGNlbGwpKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbFNoYXBlLnJlbW92ZUNlbGwoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlU2hhcGUnLCBjZWxsU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYoY2VsbFNoYXBlLmNlbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTaGFwZShjZWxsU2hhcGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Rlc3Ryb3lTaGFwZScsIGNlbGxTaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZvcihsZXQgbGluZSA9IDA7IGxpbmUgPCBpOyBsaW5lKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwW2xpbmVdLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjZWxsKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY29vcmRzLmFkZFRvWSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZVNoYXBlJywgY2VsbC5zaGFwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5zcGxpY2UoaSwxKTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Um93OiB1bmRlZmluZWRbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCB0aGlzLl93aWR0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1Jvd1tqXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnVuc2hpZnQobmV3Um93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWxsZWRMaW5lc0NvdW50O1xuICAgIH1cblxuICAgIHB1YmxpYyByb3RhdGVTaGFwZShzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5jbGVhclNoYXBlQ2FjaGUoc2hhcGUpO1xuICAgICAgICBzaGFwZS5yb3RhdGUoKTtcbiAgICAgICAgdGhpcy5jYWNoZVNoYXBlQ2VsbHMoc2hhcGUpO1xuICAgICAgICB0aGlzLmVtaXQoJ3JvdGF0ZVNoYXBlJywgc2hhcGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVTaGFwZShzaGFwZTogU2hhcGUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9zaGFwZXMuaW5kZXhPZihzaGFwZSwgMCk7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTaGFwZUNhY2hlKHNoYXBlKTtcbiAgICAgICAgICAgIHRoaXMuX3NoYXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi4vZ2VvbS9WZWN0b3IyXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuLi9zaGFwZS9TaGFwZVwiO1xuXG5leHBvcnQgY2xhc3MgQ2VsbCB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfY29vcmRzIDogVmVjdG9yMjtcbiAgICBwcml2YXRlIF9zaGFwZSA6IFNoYXBlO1xuXG4gICAgLy8tLS0tLS1Qcm9wZXJ0aWVzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBnZXQgY29vcmRzKCkgOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvb3JkcztcbiAgICB9XG4gICAgcHVibGljIHNldCBjb29yZHModiA6IFZlY3RvcjIpIHtcbiAgICAgICAgdGhpcy5fY29vcmRzID0gdjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHNoYXBlKCkgOiBTaGFwZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZTtcbiAgICB9XG4gICAgcHVibGljIHNldCBzaGFwZSh2IDogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5fc2hhcGUgPSB2O1xuICAgIH1cblxuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG5cbiAgICBjb25zdHJ1Y3Rvcihjb29yZHM6IFZlY3RvcjIsIHNoYXBlPzogU2hhcGUpIHtcbiAgICAgICAgdGhpcy5fc2hhcGUgPSBzaGFwZTtcbiAgICAgICAgdGhpcy5fY29vcmRzID0gY29vcmRzO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIGdldCBwb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuWCwgdGhpcy5ZKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IFgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZS5wb3NpdGlvbi5YICsgdGhpcy5fY29vcmRzLlg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBZKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hhcGUucG9zaXRpb24uWSArIHRoaXMuX2Nvb3Jkcy5ZO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi8uLi9nZW9tL1ZlY3RvcjInO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gJy4vQ2VsbCc7XG5cbmV4cG9ydCBjbGFzcyBTaGFwZSB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfY2VsbHM6IENlbGxbXSA9IFtdO1xuICAgIHByaXZhdGUgX2NvbG9yOiBzdHJpbmcgPSAnJztcbiAgICBwcml2YXRlIF9wb3NpdGlvbjogVmVjdG9yMiA9IG51bGw7XG4gICAgcHJpdmF0ZSBfb3JpZ2luOiBWZWN0b3IyID0gbnVsbDtcblxuICAgIC8vLS0tLS0tUHJvcGVydGllcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgZ2V0IGNlbGxzKCkgOiBDZWxsW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VsbHM7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgY2VsbHMoY2VsbHMgOiBDZWxsW10pIHtcbiAgICAgICAgdGhpcy5fY2VsbHMgPSBjZWxscztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHBvc2l0aW9uKCkgOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0IGNvbG9yKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgb3JpZ2luKCkgOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29yaWdpbjtcbiAgICB9XG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cbiAgICBcbiAgICBjb25zdHJ1Y3RvcihjZWxsczogQ2VsbFtdLCBwb3NpdGlvbjogVmVjdG9yMiwgY29sb3I6IHN0cmluZywgb3JpZ2luOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoMC41LCAwLjUpKSB7XG4gICAgICAgIHRoaXMuX2NlbGxzID0gY2VsbHM7XG4gICAgICAgIHRoaXMuX2NlbGxzLmZvckVhY2goY2VsbCA9PiBjZWxsLnNoYXBlID0gdGhpcyk7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XG4gICAgICAgIHRoaXMuX29yaWdpbiA9IG9yaWdpbjtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyByb3RhdGUoKSB7XG4gICAgICAgIHRoaXMuX2NlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB4ID0gY2VsbC5jb29yZHMuWDtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBjZWxsLmNvb3Jkcy5ZO1xuXG4gICAgICAgICAgICBsZXQgbmV3WCA9ICh5ICsgdGhpcy5fb3JpZ2luLlggLSB0aGlzLl9vcmlnaW4uWSk7XG4gICAgICAgICAgICBsZXQgbmV3WSA9ICh0aGlzLl9vcmlnaW4uWCArIHRoaXMuX29yaWdpbi5ZIC0geCAtIDEpO1xuXG4gICAgICAgICAgICBjZWxsLmNvb3JkcyA9IG5ldyBWZWN0b3IyKG5ld1gsIG5ld1kpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlQ2VsbChjZWxsOiBDZWxsKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fY2VsbHMuaW5kZXhPZihjZWxsLCAwKTtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5fY2VsbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc1BhcnRPZlNoYXBlKGNlbGw6IENlbGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxzLmluY2x1ZGVzKGNlbGwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9uZSgpOiBTaGFwZSB7XG4gICAgICAgIGNvbnN0IG5ld0NlbGxzID0gdGhpcy5fY2VsbHMubWFwKGNlbGwgPT4gbmV3IENlbGwoY2VsbC5jb29yZHMpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgU2hhcGUobmV3Q2VsbHMsIHRoaXMuX3Bvc2l0aW9uLCB0aGlzLl9jb2xvciwgdGhpcy5fb3JpZ2luKTsgXG4gICAgfVxuXG4gICAgcHVibGljIG1vdmUoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xuICAgICAgICB0aGlzLl9wb3NpdGlvbi5hZGRUb1goeCkuYWRkVG9ZKHkpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBTaGFwZVR5cGUgfSBmcm9tIFwiLi9TaGFwZVR5cGVcIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi4vZ2VvbS9WZWN0b3IyXCI7XG5pbXBvcnQgeyBTaGFwZSB9IGZyb20gXCIuL1NoYXBlXCI7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSBcIi4vQ2VsbFwiO1xuXG5leHBvcnQgY2xhc3MgU2hhcGVGYWN0b3J5IHtcblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIGNyZWF0ZVNoYXBlKHNoYXBlVHlwZTogU2hhcGVUeXBlLCBwb3NpdGlvbjogVmVjdG9yMiwgY29sb3I6IHN0cmluZyk6IFNoYXBlIHtcbiAgICAgICAgbGV0IHNoYXBlQ2VsbHM6IENlbGxbXSA9IFtdO1xuICAgICAgICBsZXQgb3JpZ2luOiBWZWN0b3IyO1xuXG4gICAgICAgIHN3aXRjaChzaGFwZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLkk6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgLTEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDIpXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuXG4gICAgICAgICAgICAgICAgb3JpZ2luID0gbmV3IFZlY3RvcjIoMCwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5KOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIC0xKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuTDpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAtMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMSwgMSksXG4gICAgICAgICAgICAgICAgXS5tYXAoY29vcmRzID0+IG5ldyBDZWxsKGNvb3JkcykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuTzpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMCksIFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG4gICAgICAgICAgICAgICAgb3JpZ2luID0gbmV3IFZlY3RvcjIoMCwgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5TOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigxLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5aOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigxLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5UOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigxLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG5cbiAgICAgICAgICAgICAgICBvcmlnaW4gPSBuZXcgVmVjdG9yMigwLjUsIDEuNSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7ICBcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgU2hhcGUoc2hhcGVDZWxscywgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSksIGNvbG9yLCBvcmlnaW4pO1xuICAgIH1cbn0iLCJleHBvcnQgZW51bSBTaGFwZVR5cGUge1xuICAgIEksXG4gICAgSixcbiAgICBMLFxuICAgIFMsXG4gICAgWixcbiAgICBPLFxuICAgIFRcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIl0sIm5hbWVzIjpbInRldHJpcyIsIlJlZmxlY3RPd25LZXlzIiwiUiIsIlJlZmxlY3QiLCJSZWZsZWN0QXBwbHkiLCJhcHBseSIsInRhcmdldCIsInJlY2VpdmVyIiwiYXJncyIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiY2FsbCIsIm93bktleXMiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY29uY2F0IiwiTnVtYmVySXNOYU4iLCJOdW1iZXIiLCJpc05hTiIsInZhbHVlIiwiRXZlbnRFbWl0dGVyIiwiaW5pdCIsInRoaXMiLCJtb2R1bGUiLCJleHBvcnRzIiwib25jZSIsImVtaXR0ZXIiLCJuYW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlcnJvckxpc3RlbmVyIiwiZXJyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZXNvbHZlciIsInNsaWNlIiwiYXJndW1lbnRzIiwiZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyIiwiaGFuZGxlciIsImZsYWdzIiwib24iLCJhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlciIsIl9ldmVudHMiLCJ1bmRlZmluZWQiLCJfZXZlbnRzQ291bnQiLCJfbWF4TGlzdGVuZXJzIiwiZGVmYXVsdE1heExpc3RlbmVycyIsImNoZWNrTGlzdGVuZXIiLCJsaXN0ZW5lciIsIlR5cGVFcnJvciIsIl9nZXRNYXhMaXN0ZW5lcnMiLCJ0aGF0IiwiX2FkZExpc3RlbmVyIiwidHlwZSIsInByZXBlbmQiLCJtIiwiZXZlbnRzIiwiZXhpc3RpbmciLCJ3YXJuaW5nIiwiY3JlYXRlIiwibmV3TGlzdGVuZXIiLCJlbWl0IiwidW5zaGlmdCIsInB1c2giLCJsZW5ndGgiLCJ3YXJuZWQiLCJ3IiwiRXJyb3IiLCJTdHJpbmciLCJjb3VudCIsImNvbnNvbGUiLCJ3YXJuIiwib25jZVdyYXBwZXIiLCJmaXJlZCIsIndyYXBGbiIsIl9vbmNlV3JhcCIsInN0YXRlIiwid3JhcHBlZCIsImJpbmQiLCJfbGlzdGVuZXJzIiwidW53cmFwIiwiZXZsaXN0ZW5lciIsImFyciIsInJldCIsIkFycmF5IiwiaSIsInVud3JhcExpc3RlbmVycyIsImFycmF5Q2xvbmUiLCJsaXN0ZW5lckNvdW50IiwibiIsImNvcHkiLCJhZGRFdmVudExpc3RlbmVyIiwid3JhcExpc3RlbmVyIiwiYXJnIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInNldCIsIlJhbmdlRXJyb3IiLCJnZXRQcm90b3R5cGVPZiIsInNldE1heExpc3RlbmVycyIsImdldE1heExpc3RlbmVycyIsImRvRXJyb3IiLCJlcnJvciIsImVyIiwibWVzc2FnZSIsImNvbnRleHQiLCJsZW4iLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0IiwicG9zaXRpb24iLCJvcmlnaW5hbExpc3RlbmVyIiwic2hpZnQiLCJpbmRleCIsInBvcCIsInNwbGljZU9uZSIsIm9mZiIsInJlbW92ZUFsbExpc3RlbmVycyIsImtleSIsImtleXMiLCJyYXdMaXN0ZW5lcnMiLCJldmVudE5hbWVzIiwid2lkdGgiLCJoZWlnaHQiLCJfc2hhcGVUeXBlc1F1ZXVlIiwiX21vdmluZ1NoYXBlIiwiX3NoYXBlVHlwZXMiLCJTaGFwZVR5cGUiLCJJIiwiSiIsIkwiLCJPIiwiUyIsIloiLCJUIiwiX3NoYXBlRmFjdG9yeSIsIlNoYXBlRmFjdG9yeSIsIl9tYXAiLCJHYW1lTWFwIiwic2hhcGUiLCJTVkdDb250ZXh0IiwiZHJhd1NoYXBlIiwiR0FNRV9DT05GSUciLCJDRUxMX1NJWkUiLCJ1cGRhdGVTaGFwZSIsInJlZHJhd1NoYXBlIiwiZGVzdHJveVNoYXBlIiwiX2dhbWVPdmVyIiwiX3Njb3JlIiwiaW5jcmVhc2VTY29yZSIsInRvQWRkIiwiZHJvcFNoYXBlIiwibnVtT2ZDZWxscyIsImxvd2VyU2hhcGUiLCJoYW5kbGVJbnB1dCIsInRvTW92ZVgiLCJrZXlib2FyZCIsImlzUHJlc3NlZCIsIkRST1AiLCJjZWxsc0Ryb3BwZWQiLCJEUk9QUEVEX1NIQVBFX0JPTlVTIiwiVVBfS0VZIiwicm90YXRlU2hhcGUiLCJET1dOX0tFWSIsIkxPV0VSRURfU0hBUEVfQk9OVVMiLCJMRUZUX0tFWSIsIlJJR0hUX0tFWSIsImNlbGxzIiwic29tZSIsImNlbGwiLCJuZXdQb3MiLCJhZGRYIiwiY29sbGlzaW9uQ2VsbCIsImdldENlbGwiLCJYIiwiaXNQYXJ0T2ZTaGFwZSIsIm1vdmVTaGFwZSIsInByb3BhYmxlU2hhcGUiLCJjbG9uZSIsInJvdGF0ZSIsImV2ZXJ5IiwiaXNJbk1hcCIsInJlYWNoZWRCb3R0b20iLCJhZGRZIiwiWSIsImhhbmRsZUZpbGxlZExpbmVzIiwiZmlsbGVkTGluZXNDb3VudCIsInJlbW92ZUZpbGxlZExpbmVzIiwiRklMTEVEX0xJTkVfQk9OVVMiLCJfdXBkYXRlRXZlcnlYRnJhbWVzIiwiY2hlY2tGb3JHYW1lT3ZlciIsImFueUZpbGxlZE9uUm93IiwiZ2VuZXJhdGVSYW5kb21TaGFwZVR5cGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJidWlsZFNoYXBlIiwicmFuZG9tU2hhcGVUeXBlSW5kZXgiLCJzaGFwZUNvbG9yIiwiU0hBUEVfQ09MT1JTIiwiY3JlYXRlU2hhcGUiLCJWZWN0b3IyIiwiX2ZyYW1lIiwiVVBEQVRFX0FGVEVSX1hfRlJBTUVTIiwibmV3U2hhcGVUeXBlIiwiYWRkU2hhcGUiLCJ1cGRhdGUiLCJkcmF3IiwiR2FtZVdvcmxkIiwic3ZnIiwiX3NoYXBlcyIsIk1hcCIsIl9zdmciLCJjbGVhciIsImlubmVySFRNTCIsImNlbGxTaXplIiwiaGFzIiwiZ3JvdXAiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsImZvckVhY2giLCJyZWN0Iiwic2V0QXR0cmlidXRlIiwiY29vcmRzIiwidG9TdHJpbmciLCJjb2xvciIsImFwcGVuZENoaWxkIiwiU0hPV19PUklHSU5TIiwib3JpZ2luIiwicmVtb3ZlIiwiZGVsZXRlIiwic3ZnRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiU1ZHIiwiR0FNRV9XSURUSCIsIkdBTUVfSEVJR0hUIiwiQ0FOVkFTX01JTl9XSURUSCIsIkNBTlZBU19NSU5fSEVJR0hUIiwiTkVYVF9TSEFQRV9DRUxMX1NJWkUiLCJTVFJPS0VfV0lEVEgiLCJCQUNLR1JPVU5EX0NPTE9SIiwiU1RST0tFX0NPTE9SIiwiU0NPUkVfTEFCRUxfRk9OVCIsIk5FWFRfU0hBUEVfTEFCRUxfRk9OVCIsIkdBTUVfT1ZFUl9MQUJFTF9GT05UIiwiR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUxfRk9OVCIsIkZPTlRfQ09MT1IiLCJTQ09SRV9MQUJFTCIsIk5FWFRfU0hBUEVfTEFCRUwiLCJHQU1FX09WRVJfTEFCRUwiLCJHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTCIsIk5FWFRfU0hBUEVfUE9TSVRJT04iLCJTQ09SRV9MQUJFTF9QT1NJVElPTiIsIkFMSUdOTUVOVCIsIk5FWFRfU0hBUEVfTEFCRUxfUE9TSVRJT04iLCJHQU1FX09WRVJfTEFCRUxfUE9TSVRJT04iLCJHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9QT1NJVElPTiIsIlNUQVJUX0tFWSIsIngiLCJ5IiwiX3giLCJfeSIsImFkZFRvWCIsImFkZFRvWSIsImFkZCIsIl9rZXlzUHJlc3NlZCIsImUiLCJrZXlEb3duIiwiZXZlbnQiLCJrZXlDb2RlIiwicmVzZXQiLCJLZXlib2FyZCIsIl93aWR0aCIsIl9oZWlnaHQiLCJqIiwiY2FjaGVTaGFwZUNlbGxzIiwiaXNDZWxsRmlsbGVkIiwieF9kaWZmIiwieV9kaWZmIiwiY2xlYXJTaGFwZUNhY2hlIiwibW92ZSIsInJvdyIsImNlbGxTaGFwZSIsImZpbmQiLCJpbmNsdWRlcyIsInJlbW92ZUNlbGwiLCJyZW1vdmVTaGFwZSIsImxpbmUiLCJzcGxpY2UiLCJuZXdSb3ciLCJpbmRleE9mIiwiX3NoYXBlIiwiX2Nvb3JkcyIsInYiLCJDZWxsIiwiX2NlbGxzIiwiX2NvbG9yIiwiX3Bvc2l0aW9uIiwiX29yaWdpbiIsIm5ld1giLCJuZXdZIiwiU2hhcGUiLCJtYXAiLCJzaGFwZVR5cGUiLCJzaGFwZUNlbGxzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImdhbWVMb29wIiwiZ2FtZU92ZXIiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiXSwic291cmNlUm9vdCI6IiJ9