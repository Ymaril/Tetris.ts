(()=>{"use strict";var e,t,n,r,o={187:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var o,i,s,c;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=p(e))>0&&s.length>o&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=s.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):_(o,o.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function _(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return p(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var p=i[e];if(void 0===p)return!1;if("function"==typeof p)r(p,this,t);else{var c=p.length,h=_(p,c);for(n=0;n<c;++n)r(h[n],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},352:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameWorld=void 0;var r=n(540),o=n(215),i=n(105),s=n(808),a=n(728),p=n(847),c=n(38),h=function(){function e(e,t){this._shapeTypesQueue=[],this._movingShape=null,this._shapeTypes=[s.ShapeType.I,s.ShapeType.J,s.ShapeType.L,s.ShapeType.O,s.ShapeType.S,s.ShapeType.Z,s.ShapeType.T],this._shapeFactory=new p.ShapeFactory,this._map=new a.GameMap(e,t),this._map.on("newShape",(function(e){c.SVGContext.drawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("leftShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("rightShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("downShape",(function(e){c.SVGContext.updateShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("rotateShape",(function(e){c.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("changeShape",(function(e){c.SVGContext.redrawShape(e,r.GAME_CONFIG.CELL_SIZE)})),this._map.on("destroyShape",(function(e){c.SVGContext.destroyShape(e)})),this.init()}return Object.defineProperty(e.prototype,"gameOver",{get:function(){return this._gameOver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),e.prototype.increaseScore=function(e){this._score+=e},e.prototype.handleInput=function(){o.keyboard.isPressed(r.GAME_CONFIG.UP_KEY)?this._map.doShapeAction(this._movingShape,"rotate"):o.keyboard.isPressed(r.GAME_CONFIG.DOWN_KEY)?(this._map.doShapeAction(this._movingShape,"down"),this.increaseScore(r.GAME_CONFIG.LOWERED_SHAPE_BONUS)):o.keyboard.isPressed(r.GAME_CONFIG.LEFT_KEY)?this._map.doShapeAction(this._movingShape,"left"):o.keyboard.isPressed(r.GAME_CONFIG.RIGHT_KEY)&&this._map.doShapeAction(this._movingShape,"right")},e.prototype.handleFilledLines=function(){var e=this._map.removeFilledLines();e>0&&(this.increaseScore(e*r.GAME_CONFIG.FILLED_LINE_BONUS),this._updateEveryXFrames>0&&this._updateEveryXFrames--)},e.prototype.generateRandomShapeType=function(){var e=Math.floor(Math.random()*this._shapeTypes.length);return this._shapeTypes[e]},e.prototype.buildShape=function(e){var t=Math.floor(Math.random()*this._shapeTypes.length),n=r.GAME_CONFIG.SHAPE_COLORS[t];return this._shapeFactory.createShape(e,new i.Vector2(Math.floor(this._map.width/2),3),n)},e.prototype.init=function(){this._gameOver=!1,this._score=0,this._frame=0,this._updateEveryXFrames=r.GAME_CONFIG.UPDATE_AFTER_X_FRAMES,this._map.init();var e=this.generateRandomShapeType();this._shapeTypesQueue=[e],this._movingShape=this.buildShape(this.generateRandomShapeType()),this._map.addShape(this._movingShape)},e.prototype.update=function(){if(this.handleInput(),!(++this._frame%this._updateEveryXFrames||this._map.doShapeAction(this._movingShape,"down"))){this.handleFilledLines();var e=this.generateRandomShapeType();this._shapeTypesQueue.unshift(e),this._movingShape=this.buildShape(this._shapeTypesQueue.pop()),this._gameOver=!this._map.addShape(this._movingShape)}},e.prototype.draw=function(){},e}();t.GameWorld=h},38:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGContext=void 0;var r=n(540),o=function(){function e(e){this._shapes=new Map,this._svg=e}return e.prototype.clear=function(){this._svg.innerHTML=""},e.prototype.drawShape=function(e,t){if(this._shapes.has(e))return this._shapes.get(e);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.cells.forEach((function(r){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",(r.coords.X*t).toString()),o.setAttribute("y",(r.coords.Y*t).toString()),o.setAttribute("width",t.toString()),o.setAttribute("height",t.toString()),o.setAttribute("fill",e.color),n.appendChild(o)})),r.GAME_CONFIG.SHOW_ORIGINS){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",(e.origin.X*t).toString()),o.setAttribute("cy",(e.origin.Y*t).toString()),o.setAttribute("r","5"),o.setAttribute("fill","#FFFFFF"),n.appendChild(o)}return n.setAttribute("x",(e.position.X*t).toString()),n.setAttribute("y",(e.position.Y*t).toString()),this._svg.appendChild(n),this._shapes.set(e,n),n},e.prototype.updateShape=function(e,t){if(this._shapes.has(e)){var n=this._shapes.get(e);n.setAttribute("y",(e.position.Y*t).toString()),n.setAttribute("x",(e.position.X*t).toString())}},e.prototype.destroyShape=function(e){this._shapes.has(e)&&(this._shapes.get(e).remove(),this._shapes.delete(e))},e.prototype.redrawShape=function(e,t){if(this._shapes.has(e)){var n=this._shapes.get(e);if(n.innerHTML="",e.cells.forEach((function(r){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",(r.coords.X*t).toString()),o.setAttribute("y",(r.coords.Y*t).toString()),o.setAttribute("width",t.toString()),o.setAttribute("height",t.toString()),o.setAttribute("fill",e.color),n.appendChild(o)})),r.GAME_CONFIG.SHOW_ORIGINS){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("cx",(e.origin.X*t).toString()),o.setAttribute("cy",(e.origin.Y*t).toString()),o.setAttribute("r","5"),o.setAttribute("fill","#FFFFFF"),n.appendChild(o)}n.setAttribute("x",(e.position.X*t).toString()),n.setAttribute("y",(e.position.Y*t).toString())}},e}(),i=document.getElementById("game");t.SVGContext=new o(i)},540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_CONFIG=void 0,t.GAME_CONFIG={SHOW_ORIGINS:!1,UPDATE_AFTER_X_FRAMES:40,GAME_WIDTH:15,GAME_HEIGHT:20,CANVAS_MIN_WIDTH:300,CANVAS_MIN_HEIGHT:400,CELL_SIZE:20,NEXT_SHAPE_CELL_SIZE:5,STROKE_WIDTH:.5,BACKGROUND_COLOR:"#28363B",STROKE_COLOR:"black",SHAPE_COLORS:["#F9B38F","#BF6C86","#84AF9C","#6D5C80","#FFA3D0","#439F9E","#EF5F3C"],SCORE_LABEL_FONT:"10px Comic Sans MS",NEXT_SHAPE_LABEL_FONT:"10px Comic Sans MS",GAME_OVER_LABEL_FONT:"25px Comic Sans MS",GAME_OVER_YOUR_SCORE_LABEL_FONT:"15px Comic Sans MS",FONT_COLOR:"white",SCORE_LABEL:"Score: ",NEXT_SHAPE_LABEL:"Next Shape: ",GAME_OVER_LABEL:"Game Over!",GAME_OVER_YOUR_SCORE_LABEL:"Your Score: ",NEXT_SHAPE_POSITION:{X:283,Y:6},SCORE_LABEL_POSITION:{X:5,Y:13,ALIGNMENT:"left"},NEXT_SHAPE_LABEL_POSITION:{X:215,Y:13,ALIGNMENT:"left"},GAME_OVER_LABEL_POSITION:{X:150,Y:200,ALIGNMENT:"center"},GAME_OVER_YOUR_SCORE_LABEL_POSITION:{X:150,Y:235,ALIGNMENT:"center"},START_KEY:32,LEFT_KEY:37,RIGHT_KEY:39,UP_KEY:38,DOWN_KEY:40,DROP:13,FILLED_LINE_BONUS:100,DROPPED_SHAPE_BONUS:2,LOWERED_SHAPE_BONUS:1}},105:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;var n=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Zero",{get:function(){return new e(0,0)},enumerable:!1,configurable:!0}),e.prototype.addX=function(t){return new e(this._x,this._y).addToX(t)},e.prototype.addY=function(t){return new e(this._x,this._y).addToY(t)},e.prototype.addToX=function(e){return this._x+=e,this},e.prototype.addToY=function(e){return this._y+=e,this},e.prototype.add=function(e,t){return this.addToX(e),this.addToY(t),this},e}();t.Vector2=n},215:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.keyboard=void 0;var n=function(){function e(){var e=this;this._keysPressed=[],document.addEventListener("keydown",(function(t){e.keyDown(t)}))}return e.prototype.keyDown=function(e){this._keysPressed[e.keyCode]=!0},e.prototype.reset=function(){this._keysPressed=[]},e.prototype.isPressed=function(e){return this._keysPressed[e]},e}();t.keyboard=new n},728:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.GameMap=void 0;var i=function(e){function t(t,n){var r=e.call(this)||this;return r._shapes=[],r._width=t,r._height=n,r.init(),r}return o(t,e),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._map=[];for(var e=0;e<this._height;e++){this._map[e]=[];for(var t=0;t<this._width;t++)this._map[e][t]=void 0}},t.prototype.addShape=function(e){return!!this.isShapeValidPlace(e)&&(this._shapes.push(e),this.emit("newShape",e),this.cacheShapeCells(e),!0)},t.prototype.doShapeAction=function(e,t){var n=e.clone();return n.do(t),!!this.isShapeValidPlace(n,e)&&(this.clearShapeCache(e),e.do(t),this.cacheShapeCells(e),this.emit("".concat(t,"Shape"),e),!0)},t.prototype.removeShape=function(e){var t=this._shapes.indexOf(e,0);t>-1&&(this.clearShapeCache(e),this._shapes.splice(t,1))},t.prototype.isInMap=function(e){var t=[e.X,e.Y],n=t[0],r=t[1];return n>=0&&n<this._width&&r>=0&&r<this._height},t.prototype.getCell=function(e){if(this.isInMap(e)&&void 0!==this._map[e.Y][e.X])return this._map[e.Y][e.X]},t.prototype.isCellFilled=function(e){return!!this.getCell(e)},t.prototype.clearShapeCache=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=void 0)}))},t.prototype.cacheShapeCells=function(e){var t=this;e.cells.forEach((function(e){t.isInMap(e.position)&&(t._map[e.Y][e.X]=e)}))},t.prototype.anyFilledOnRow=function(e){return this._map[e].some((function(e){return void 0!==e}))},t.prototype.isShapeValidPlace=function(e,t){var n=this;return e.cells.every((function(e){if(!n.isInMap(e.position))return!1;var r=n.getCell(e.position);return!r||!!t&&t.isPartOfShape(r)}))},t.prototype.removeFilledLines=function(){for(var e=this,t=0,n=0;n<this._map.length;n++)if(this._map[n].every((function(e){return void 0!==e}))){t++,this._map[n].forEach((function(t){var n=e._shapes.find((function(e){return e.cells.includes(t)}));n.removeCell(t),0===n.cells.length?(e.removeShape(n),e.emit("destroyShape",n)):e.emit("changeShape",n)}));for(var r=0;r<n;r++)this._map[r].forEach((function(t){t&&(t.coords.addToY(1),e.emit("changeShape",t.shape))}));this._map.splice(n,1);for(var o=[],i=0;i<this._width;i++)o[i]=void 0;this._map.unshift(o)}return t},t}(n(187).EventEmitter);t.GameMap=i},185:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;var r=n(105),o=function(){function e(e,t){this._shape=t,this._coords=e}return Object.defineProperty(e.prototype,"coords",{get:function(){return this._coords},set:function(e){this._coords=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new r.Vector2(this.X,this.Y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"X",{get:function(){return this._shape.position.X+this._coords.X},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._shape.position.Y+this._coords.Y},enumerable:!1,configurable:!0}),e}();t.Cell=o},189:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=void 0;var i=n(105),s=n(185),a=function(){function e(){}return e.prototype.move=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),e.position.addToX(t).addToY(n)},e}(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="down",t}return o(t,e),t.prototype.do=function(e){this.move(e,0,1)},t}(a),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="right",t}return o(t,e),t.prototype.do=function(e){this.move(e,1,0)},t}(a),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="left",t}return o(t,e),t.prototype.do=function(e){this.move(e,-1,0)},t}(a),u=function(){function e(){this.name="rotate"}return e.prototype.do=function(e){e.cells.forEach((function(t){var n=t.coords.X,r=t.coords.Y+e.origin.X-e.origin.Y,o=e.origin.X+e.origin.Y-n-1;t.coords=new i.Vector2(r,o)}))},e}(),f=function(){function e(e,t,n,r){void 0===r&&(r=new i.Vector2(.5,.5));var o=this;this._cells=[],this._color="",this._position=null,this._origin=null,this._actions=[new p,new h,new c,new u],this._cells=e,this._cells.forEach((function(e){return e.shape=o})),this._position=t,this._color=n,this._origin=r}return Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},set:function(e){this._cells=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),e.prototype.do=function(e){this._actions.find((function(t){return t.name===e})).do(this)},e.prototype.removeCell=function(e){var t=this._cells.indexOf(e,0);t>-1&&this._cells.splice(t,1)},e.prototype.isPartOfShape=function(e){return this._cells.includes(e)},e.prototype.clone=function(){return new e(this._cells.map((function(e){return new s.Cell(e.coords)})),new i.Vector2(this._position.X,this._position.Y),this._color,new i.Vector2(this._origin.X,this._origin.Y))},e}();t.Shape=f},847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeFactory=void 0;var r=n(808),o=n(105),i=n(189),s=n(185),a=function(){function e(){}return e.prototype.createShape=function(e,t,n){var a,p=[];switch(e){case r.ShapeType.I:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(0,2)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.J:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.L:p=[new o.Vector2(0,-1),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.O:p=[new o.Vector2(-1,0),new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(0,1);break;case r.ShapeType.S:p=[new o.Vector2(0,0),new o.Vector2(1,0),new o.Vector2(0,1),new o.Vector2(-1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.Z:p=[new o.Vector2(0,0),new o.Vector2(-1,0),new o.Vector2(0,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)}));break;case r.ShapeType.T:p=[new o.Vector2(0,0),new o.Vector2(0,1),new o.Vector2(-1,1),new o.Vector2(1,1)].map((function(e){return new s.Cell(e)})),a=new o.Vector2(.5,1.5)}return new i.Shape(p,new o.Vector2(t.X,t.Y),n,a)},e}();t.ShapeFactory=a},808:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeType=void 0,(n=t.ShapeType||(t.ShapeType={}))[n.I=0]="I",n[n.J=1]="J",n[n.L=2]="L",n[n.S=3]="S",n[n.Z=4]="Z",n[n.O=5]="O",n[n.T=6]="T"}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,s),n.exports}t=s(352),n=s(215),r=s(540),e=new t.GameWorld(r.GAME_CONFIG.GAME_WIDTH,r.GAME_CONFIG.GAME_HEIGHT),function t(){e.gameOver||(e.update(),e.draw()),n.keyboard.reset(),requestAnimationFrame(t)}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT0EsRUFBYS9SLFFBR3JCLElBQUlELEVBQVM2UixFQUF5QkUsR0FBWSxDQUdqRDlSLFFBQVMsSUFPVixPQUhBZ1MsRUFBb0JGLEdBQVU1UyxLQUFLYSxFQUFPQyxRQUFTRCxFQUFRQSxFQUFPQyxRQUFTNlIsR0FHcEU5UixFQUFPQyxRWnJCZixTQUNBLFNBQ0EsU0FLSXpCLEVBQVMsSUFBSSxFQUFBMEwsVUFBVSxFQUFBdkMsWUFBWXFFLFdBQVksRUFBQXJFLFlBQVlzRSxhQXNDL0QsU0FBU2lHLElBQ0YxVCxFQUFPMlQsV0FWVjNULEVBQU93TCxTQU1QeEwsRUFBT3lMLFFBV1AsRUFBQTVCLFNBQVNtRyxRQUNUNEQsc0JBQXNCRixHQTlDdEJBLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvR2FtZVdvcmxkLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9TVkcudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL2dhbWUuY29uZmlnLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9nZW9tL1ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL2lucHV0L0tleWJvYXJkLnRzIiwid2VicGFjazovL1RldHJpcy8uL3NyYy9tYXAvR2FtZU1hcC50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvc2hhcGUvQ2VsbC50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvc2hhcGUvU2hhcGUudHMiLCJ3ZWJwYWNrOi8vVGV0cmlzLy4vc3JjL3NoYXBlL1NoYXBlRmFjdG9yeS50cyIsIndlYnBhY2s6Ly9UZXRyaXMvLi9zcmMvc2hhcGUvU2hhcGVUeXBlLnRzIiwid2VicGFjazovL1RldHJpcy93ZWJwYWNrL2Jvb3RzdHJhcCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lV29ybGQgfSBmcm9tICcuL0dhbWVXb3JsZCc7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4vaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgR0FNRV9DT05GSUcgfSBmcm9tICcuL2dhbWUuY29uZmlnJztcblxubGV0IHRldHJpczogR2FtZVdvcmxkO1xuXG5mdW5jdGlvbiBzdGFydCgpOiB2b2lkIHtcbiAgICB0ZXRyaXMgPSBuZXcgR2FtZVdvcmxkKEdBTUVfQ09ORklHLkdBTUVfV0lEVEgsIEdBTUVfQ09ORklHLkdBTUVfSEVJR0hUKTtcbiAgICBnYW1lTG9vcCgpO1xufVxuXG5mdW5jdGlvbiBnYW1lT3ZlclNjcmVlbigpOiB2b2lkIHtcbiAgICAvLyBjYW52YXMyRC5jbGVhcigpO1xuICAgIC8vIGNhbnZhczJELmRyYXdCYWNrZ3JvdW5kKEdBTUVfQ09ORklHLkJBQ0tHUk9VTkRfQ09MT1IpO1xuICAgIC8vIGNhbnZhczJELmRyYXdUZXh0KFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfTEFCRUwsIFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfTEFCRUxfRk9OVCwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkZPTlRfQ09MT1IsIFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfTEFCRUxfUE9TSVRJT04sXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9MQUJFTF9QT1NJVElPTi5BTElHTk1FTlRcbiAgICAvLyApO1xuXG4gICAgLy8gY2FudmFzMkQuZHJhd1RleHQoXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMICsgdGV0cmlzLnNjb3JlLCBcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUxfRk9OVCwgXG4gICAgLy8gICAgIEdBTUVfQ09ORklHLkZPTlRfQ09MT1IsIFxuICAgIC8vICAgICBHQU1FX0NPTkZJRy5HQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9QT1NJVElPTixcbiAgICAvLyAgICAgR0FNRV9DT05GSUcuR0FNRV9PVkVSX0xBQkVMX1BPU0lUSU9OLkFMSUdOTUVOVFxuICAgIC8vICk7XG5cbiAgICAvLyBpZihrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuU1RBUlRfS0VZKSkge1xuICAgIC8vICAgICB0ZXRyaXMuaW5pdCgpO1xuICAgIC8vIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlKCk6IHZvaWQge1xuICAgIHRldHJpcy51cGRhdGUoKTtcbn1cblxuZnVuY3Rpb24gZHJhdygpOiB2b2lkIHtcbiAgICAvLyBjYW52YXMyRC5jbGVhcigpO1xuICAgIC8vIGNhbnZhczJELmRyYXdCYWNrZ3JvdW5kKEdBTUVfQ09ORklHLkJBQ0tHUk9VTkRfQ09MT1IpO1xuICAgIHRldHJpcy5kcmF3KCk7XG59XG5cbmZ1bmN0aW9uIGdhbWVMb29wKCk6IHZvaWQge1xuICAgIGlmKHRldHJpcy5nYW1lT3Zlcikge1xuICAgICAgICBnYW1lT3ZlclNjcmVlbigpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgZHJhdygpO1xuICAgIH1cbiAgICBrZXlib2FyZC5yZXNldCgpO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XG59XG5cbnN0YXJ0KCk7IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgcmVzb2x2ZXIpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHtcbiAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgJ2Vycm9yJywgaGFuZGxlciwgZmxhZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCBsaXN0ZW5lciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGVcbiAgICAvLyBFdmVudEVtaXR0ZXJzLCB3ZSBkbyBub3QgbGlzdGVuIGZvciBgZXJyb3JgIGV2ZW50cyBoZXJlLlxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbiB3cmFwTGlzdGVuZXIoYXJnKSB7XG4gICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlXG4gICAgICAvLyBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5LlxuICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcihhcmcpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7XG4gIH1cbn1cbiIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSAnLi9nYW1lLmNvbmZpZyc7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4vaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gJy4vZ2VvbS9WZWN0b3IyJztcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSAnLi9zaGFwZS9TaGFwZSc7XG5pbXBvcnQgeyBTaGFwZVR5cGUgfSBmcm9tICcuL3NoYXBlL1NoYXBlVHlwZSc7XG5pbXBvcnQgeyBHYW1lTWFwIH0gZnJvbSAnLi9tYXAvR2FtZU1hcCc7XG5pbXBvcnQgeyBTaGFwZUZhY3RvcnkgfSBmcm9tICcuL3NoYXBlL1NoYXBlRmFjdG9yeSc7XG5pbXBvcnQgeyBTVkdDb250ZXh0IH0gZnJvbSAnLi9TVkcnO1xuXG5leHBvcnQgY2xhc3MgR2FtZVdvcmxkIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF9tYXA6IEdhbWVNYXA7XG4gICAgcHJpdmF0ZSBfdXBkYXRlRXZlcnlYRnJhbWVzOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfZnJhbWU6IG51bWJlcjtcbiAgICBwcml2YXRlIF9zaGFwZVR5cGVzUXVldWU6IFNoYXBlVHlwZVtdID0gW107XG4gICAgcHJpdmF0ZSBfc2NvcmU6IG51bWJlcjtcbiAgICBwcml2YXRlIF9nYW1lT3ZlciA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfc2hhcGVGYWN0b3J5OiBTaGFwZUZhY3Rvcnk7XG4gICAgcHJpdmF0ZSBfbW92aW5nU2hhcGU6IFNoYXBlID0gbnVsbDtcblxuICAgIHByaXZhdGUgX3NoYXBlVHlwZXM6IFNoYXBlVHlwZVtdID0gW1xuICAgICAgICBTaGFwZVR5cGUuSSxcbiAgICAgICAgU2hhcGVUeXBlLkosXG4gICAgICAgIFNoYXBlVHlwZS5MLFxuICAgICAgICBTaGFwZVR5cGUuTyxcbiAgICAgICAgU2hhcGVUeXBlLlMsXG4gICAgICAgIFNoYXBlVHlwZS5aLFxuICAgICAgICBTaGFwZVR5cGUuVFxuICAgIF07XG5cbiAgICAvLy0tLS0tLVByb3BlcnRpZXMtLS0tLS0vL1xuICAgIFxuICAgIHB1YmxpYyBnZXQgZ2FtZU92ZXIoKSA6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZU92ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzY29yZSgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Njb3JlO1xuICAgIH1cbiAgICBcbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3NoYXBlRmFjdG9yeSA9IG5ldyBTaGFwZUZhY3RvcnkoKTtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IEdhbWVNYXAod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMuX21hcC5vbignbmV3U2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LmRyYXdTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbignbGVmdFNoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC51cGRhdGVTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbigncmlnaHRTaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQudXBkYXRlU2hhcGUoc2hhcGUsIEdBTUVfQ09ORklHLkNFTExfU0laRSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tYXAub24oJ2Rvd25TaGFwZScsIChzaGFwZTogU2hhcGUpID0+IHtcbiAgICAgICAgICAgIFNWR0NvbnRleHQudXBkYXRlU2hhcGUoc2hhcGUsIEdBTUVfQ09ORklHLkNFTExfU0laRSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tYXAub24oJ3JvdGF0ZVNoYXBlJywgKHNoYXBlOiBTaGFwZSkgPT4ge1xuICAgICAgICAgICAgU1ZHQ29udGV4dC5yZWRyYXdTaGFwZShzaGFwZSwgR0FNRV9DT05GSUcuQ0VMTF9TSVpFKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21hcC5vbignY2hhbmdlU2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LnJlZHJhd1NoYXBlKHNoYXBlLCBHQU1FX0NPTkZJRy5DRUxMX1NJWkUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWFwLm9uKCdkZXN0cm95U2hhcGUnLCAoc2hhcGU6IFNoYXBlKSA9PiB7XG4gICAgICAgICAgICBTVkdDb250ZXh0LmRlc3Ryb3lTaGFwZShzaGFwZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVByaXZhdGUgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIGluY3JlYXNlU2NvcmUodG9BZGQ6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fc2NvcmUgKz0gdG9BZGQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVJbnB1dCgpOiB2b2lkIHtcbiAgICAgICAgaWYoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLlVQX0tFWSkpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcC5kb1NoYXBlQWN0aW9uKHRoaXMuX21vdmluZ1NoYXBlLCAncm90YXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLkRPV05fS0VZKSkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLmRvU2hhcGVBY3Rpb24odGhpcy5fbW92aW5nU2hhcGUsICdkb3duJyk7XG4gICAgICAgICAgICB0aGlzLmluY3JlYXNlU2NvcmUoR0FNRV9DT05GSUcuTE9XRVJFRF9TSEFQRV9CT05VUyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLkxFRlRfS0VZKSkge1xuICAgICAgICAgICAgdGhpcy5fbWFwLmRvU2hhcGVBY3Rpb24odGhpcy5fbW92aW5nU2hhcGUsICdsZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLlJJR0hUX0tFWSkpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcC5kb1NoYXBlQWN0aW9uKHRoaXMuX21vdmluZ1NoYXBlLCAncmlnaHQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRmlsbGVkTGluZXMoKTogdm9pZCB7XG4gICAgICAgIFxuICAgICAgICBsZXQgZmlsbGVkTGluZXNDb3VudCA9IHRoaXMuX21hcC5yZW1vdmVGaWxsZWRMaW5lcygpO1xuXG4gICAgICAgIGlmKGZpbGxlZExpbmVzQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlYXNlU2NvcmUoZmlsbGVkTGluZXNDb3VudCAqIEdBTUVfQ09ORklHLkZJTExFRF9MSU5FX0JPTlVTKTtcblxuICAgICAgICAgICAgaWYodGhpcy5fdXBkYXRlRXZlcnlYRnJhbWVzID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUV2ZXJ5WEZyYW1lcy0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVJhbmRvbVNoYXBlVHlwZSgpOiBTaGFwZVR5cGUge1xuICAgICAgICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX3NoYXBlVHlwZXMubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZVR5cGVzW2luZGV4XTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkU2hhcGUodHlwZTogU2hhcGVUeXBlKTogU2hhcGUge1xuICAgICAgICBjb25zdCByYW5kb21TaGFwZVR5cGVJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuX3NoYXBlVHlwZXMubGVuZ3RoKTtcbiAgICAgICAgbGV0IHNoYXBlQ29sb3IgPSBHQU1FX0NPTkZJRy5TSEFQRV9DT0xPUlNbcmFuZG9tU2hhcGVUeXBlSW5kZXhdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlRmFjdG9yeS5jcmVhdGVTaGFwZShcbiAgICAgICAgICAgICAgICAgICAgdHlwZSwgXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKE1hdGguZmxvb3IodGhpcy5fbWFwLndpZHRoIC8gMiksIDMpLFxuICAgICAgICAgICAgICAgICAgICBzaGFwZUNvbG9yXG4gICAgICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBwcml2YXRlIGRyYXdTaGFwZXNJblF1ZXVlKCk6IHZvaWQge1xuICAgIC8vICAgICBjYW52YXMyRC5kcmF3VGV4dChcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0xBQkVMLCBcbiAgICAvLyAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0xBQkVMX0ZPTlQsIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLkZPTlRfQ09MT1IsIFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfTEFCRUxfUE9TSVRJT04sXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9MQUJFTF9QT1NJVElPTi5BTElHTk1FTlRcbiAgICAvLyAgICAgICAgICk7XG4gICAgICAgIFxuICAgIC8vICAgICBmb3IobGV0IGkgPSB0aGlzLl9zaGFwZVR5cGVzUXVldWUubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pe1xuICAgIC8vICAgICAgICAgbGV0IHNoYXBlVHlwZSA9IHRoaXMuX3NoYXBlVHlwZXNRdWV1ZVtpXTtcbiAgICAvLyAgICAgICAgIGxldCBpbmRleEZyb21FbmQgPSB0aGlzLl9zaGFwZVR5cGVzUXVldWUubGVuZ3RoIC0gMSAtIGk7XG4gICAgLy8gICAgICAgICBsZXQgZGVtb1NoYXBlID0gdGhpcy5fc2hhcGVGYWN0b3J5LmNyZWF0ZVNoYXBlKFxuICAgIC8vICAgICAgICAgICAgICAgICBzaGFwZVR5cGUsIFxuICAgIC8vICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfUE9TSVRJT04uWCArIGluZGV4RnJvbUVuZCAqIDQgKiBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0NFTExfU0laRSwgXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX1BPU0lUSU9OLlkpLFxuICAgIC8vICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5TSEFQRV9DT0xPUlNbc2hhcGVUeXBlXSxcbiAgICAvLyAgICAgICAgICAgICAgICAgR0FNRV9DT05GSUcuTkVYVF9TSEFQRV9DRUxMX1NJWkVcbiAgICAvLyAgICAgICAgICAgICApO1xuXG4gICAgLy8gICAgICAgICBkZW1vU2hhcGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IFxuICAgIC8vICAgICAgICAgICAgIGNhbnZhczJELmRyYXdSZWN0KFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgY2VsbC5jb29yZHMsIFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgZGVtb1NoYXBlLmNvbG9yLCBcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNUUk9LRV9DT0xPUiwgXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBHQU1FX0NPTkZJRy5ORVhUX1NIQVBFX0NFTExfU0laRSxcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIEdBTUVfQ09ORklHLk5FWFRfU0hBUEVfQ0VMTF9TSVpFXG4gICAgLy8gICAgICAgICAgICAgICAgIClcbiAgICAvLyAgICAgICAgICAgICApO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gcHJpdmF0ZSBkcmF3U2NvcmUoKTogdm9pZCB7XG4gICAgLy8gICAgIGNhbnZhczJELmRyYXdUZXh0KFxuICAgIC8vICAgICAgICAgICAgIEdBTUVfQ09ORklHLlNDT1JFX0xBQkVMICsgdGhpcy5fc2NvcmUudG9TdHJpbmcoKSwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuU0NPUkVfTEFCRUxfRk9OVCwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuRk9OVF9DT0xPUiwgXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuU0NPUkVfTEFCRUxfUE9TSVRJT04sXG4gICAgLy8gICAgICAgICAgICAgR0FNRV9DT05GSUcuU0NPUkVfTEFCRUxfUE9TSVRJT04uQUxJR05NRU5UXG4gICAgLy8gICAgICAgICApO1xuICAgIC8vIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIGluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2dhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Njb3JlID0gMDtcbiAgICAgICAgdGhpcy5fZnJhbWUgPSAwOyBcbiAgICAgICAgdGhpcy5fdXBkYXRlRXZlcnlYRnJhbWVzID0gR0FNRV9DT05GSUcuVVBEQVRFX0FGVEVSX1hfRlJBTUVTO1xuICAgICAgICB0aGlzLl9tYXAuaW5pdCgpO1xuICAgICAgICBjb25zdCBuZXdTaGFwZVR5cGU6IFNoYXBlVHlwZSA9IHRoaXMuZ2VuZXJhdGVSYW5kb21TaGFwZVR5cGUoKTtcbiAgICAgICAgdGhpcy5fc2hhcGVUeXBlc1F1ZXVlID0gW25ld1NoYXBlVHlwZV07XG4gICAgICAgIHRoaXMuX21vdmluZ1NoYXBlID0gdGhpcy5idWlsZFNoYXBlKHRoaXMuZ2VuZXJhdGVSYW5kb21TaGFwZVR5cGUoKSk7XG5cbiAgICAgICAgdGhpcy5fbWFwLmFkZFNoYXBlKHRoaXMuX21vdmluZ1NoYXBlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmhhbmRsZUlucHV0KCk7XG4gICAgICAgIGlmKCsrdGhpcy5fZnJhbWUgJSB0aGlzLl91cGRhdGVFdmVyeVhGcmFtZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZighdGhpcy5fbWFwLmRvU2hhcGVBY3Rpb24odGhpcy5fbW92aW5nU2hhcGUsICdkb3duJykpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsbGVkTGluZXMoKTtcblxuICAgICAgICAgICAgY29uc3QgbmV3U2hhcGVUeXBlOiBTaGFwZVR5cGUgPSB0aGlzLmdlbmVyYXRlUmFuZG9tU2hhcGVUeXBlKCk7XG4gICAgICAgICAgICB0aGlzLl9zaGFwZVR5cGVzUXVldWUudW5zaGlmdChuZXdTaGFwZVR5cGUpO1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUgPSB0aGlzLmJ1aWxkU2hhcGUodGhpcy5fc2hhcGVUeXBlc1F1ZXVlLnBvcCgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fZ2FtZU92ZXIgPSAhdGhpcy5fbWFwLmFkZFNoYXBlKHRoaXMuX21vdmluZ1NoYXBlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xuICAgICAgICAvLyB0aGlzLmRyYXdTY29yZSgpO1xuICAgICAgICAvLyB0aGlzLmRyYXdTaGFwZXNJblF1ZXVlKCk7XG4gICAgfVxufSIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSAnLi9nYW1lLmNvbmZpZyc7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi9nZW9tL1ZlY3RvcjInO1xuaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuL3NoYXBlL1NoYXBlJztcblxuY2xhc3MgU1ZHIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF9zdmcgOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9zaGFwZXMgPSBuZXcgTWFwPFNoYXBlLCBTVkdFbGVtZW50PigpXG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKHN2ZyA6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX3N2ZyA9IHN2ZztcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBjbGVhcigpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuX3N2Zy5pbm5lckhUTUwgPSAnJztcbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhd1NoYXBlKHNoYXBlOiBTaGFwZSwgY2VsbFNpemU6IG51bWJlcikge1xuICAgICAgICBpZih0aGlzLl9zaGFwZXMuaGFzKHNoYXBlKSkgeyByZXR1cm4gdGhpcy5fc2hhcGVzLmdldChzaGFwZSkgfVxuXG4gICAgICAgIGNvbnN0IGdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG5cbiAgICAgICAgc2hhcGUuY2VsbHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIik7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInhcIiwgKGNlbGwuY29vcmRzLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInlcIiwgKGNlbGwuY29vcmRzLlkgKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGNlbGxTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgY2VsbFNpemUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgc2hhcGUuY29sb3IpO1xuXG4gICAgICAgICAgICBncm91cC5hcHBlbmRDaGlsZChyZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoR0FNRV9DT05GSUcuU0hPV19PUklHSU5TKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKTtcbiAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJjeFwiLCAoc2hhcGUub3JpZ2luLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiY3lcIiwgKHNoYXBlLm9yaWdpbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcInJcIiwgJzUnKTtcbiAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsICcjRkZGRkZGJyk7XG5cbiAgICAgICAgICAgIGdyb3VwLmFwcGVuZENoaWxkKG9yaWdpbik7XG4gICAgICAgIH1cblxuICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChzaGFwZS5wb3NpdGlvbi5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICBncm91cC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIChzaGFwZS5wb3NpdGlvbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIHRoaXMuX3N2Zy5hcHBlbmRDaGlsZChncm91cCk7XG5cbiAgICAgICAgdGhpcy5fc2hhcGVzLnNldChzaGFwZSwgZ3JvdXApO1xuXG4gICAgICAgIHJldHVybiBncm91cDtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlU2hhcGUoc2hhcGU6IFNoYXBlLCBjZWxsU2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIGlmKHRoaXMuX3NoYXBlcy5oYXMoc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuX3NoYXBlcy5nZXQoc2hhcGUpO1xuICAgICAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieVwiLCAoc2hhcGUucG9zaXRpb24uWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGdyb3VwLnNldEF0dHJpYnV0ZShcInhcIiwgKHNoYXBlLnBvc2l0aW9uLlggKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveVNoYXBlKHNoYXBlOiBTaGFwZSkge1xuICAgICAgICBpZih0aGlzLl9zaGFwZXMuaGFzKHNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLl9zaGFwZXMuZ2V0KHNoYXBlKTtcbiAgICAgICAgICAgIGdyb3VwLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5fc2hhcGVzLmRlbGV0ZShzaGFwZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVkcmF3U2hhcGUoc2hhcGU6IFNoYXBlLCBjZWxsU2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIGlmKHRoaXMuX3NoYXBlcy5oYXMoc2hhcGUpKSB7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuX3NoYXBlcy5nZXQoc2hhcGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBncm91cC5pbm5lckhUTUwgPSAnJ1xuXG4gICAgICAgICAgICBzaGFwZS5jZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIik7XG4gICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChjZWxsLmNvb3Jkcy5YICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwieVwiLCAoY2VsbC5jb29yZHMuWSAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGNlbGxTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGNlbGxTaXplLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBzaGFwZS5jb2xvcik7XG4gICAgXG4gICAgICAgICAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQocmVjdCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYoR0FNRV9DT05GSUcuU0hPV19PUklHSU5TKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJjaXJjbGVcIik7XG4gICAgICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcImN4XCIsIChzaGFwZS5vcmlnaW4uWCAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4uc2V0QXR0cmlidXRlKFwiY3lcIiwgKHNoYXBlLm9yaWdpbi5ZICogY2VsbFNpemUpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIG9yaWdpbi5zZXRBdHRyaWJ1dGUoXCJyXCIsICc1Jyk7XG4gICAgICAgICAgICAgICAgb3JpZ2luLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgJyNGRkZGRkYnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgZ3JvdXAuYXBwZW5kQ2hpbGQob3JpZ2luKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ3JvdXAuc2V0QXR0cmlidXRlKFwieFwiLCAoc2hhcGUucG9zaXRpb24uWCAqIGNlbGxTaXplKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGdyb3VwLnNldEF0dHJpYnV0ZShcInlcIiwgKHNoYXBlLnBvc2l0aW9uLlkgKiBjZWxsU2l6ZSkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IHN2Z0VsZW1lbnQgOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lJykgYXMgSFRNTEVsZW1lbnQ7XG5leHBvcnQgY29uc3QgU1ZHQ29udGV4dCA9IG5ldyBTVkcoc3ZnRWxlbWVudCk7XG4iLCJleHBvcnQgY29uc3QgR0FNRV9DT05GSUcgOiBhbnkgPSB7XG4gICAgLy8gQ09ORklHU1xuICAgIFNIT1dfT1JJR0lOUzogZmFsc2UsXG5cbiAgICAvLyBQSFlTSUNTXG4gICAgVVBEQVRFX0FGVEVSX1hfRlJBTUVTOiA0MCxcblxuICAgIC8vIFNJWklOR1xuICAgIEdBTUVfV0lEVEg6IDE1LFxuICAgIEdBTUVfSEVJR0hUOiAyMCxcbiAgICBDQU5WQVNfTUlOX1dJRFRIOiAzMDAsXG4gICAgQ0FOVkFTX01JTl9IRUlHSFQ6IDQwMCxcbiAgICBDRUxMX1NJWkU6IDIwLFxuICAgIE5FWFRfU0hBUEVfQ0VMTF9TSVpFOiA1LFxuICAgIFNUUk9LRV9XSURUSDogMC41LFxuXG4gICAgLy8gQ09MT1JTXG4gICAgQkFDS0dST1VORF9DT0xPUjogJyMyODM2M0InLFxuICAgIFNUUk9LRV9DT0xPUjogJ2JsYWNrJyxcbiAgICBTSEFQRV9DT0xPUlM6IFtcIiNGOUIzOEZcIiwgXCIjQkY2Qzg2XCIsIFwiIzg0QUY5Q1wiLCBcIiM2RDVDODBcIiwgXCIjRkZBM0QwXCIsIFwiIzQzOUY5RVwiLCBcIiNFRjVGM0NcIl0sXG4gICAgXG4gICAgLy8gVEVYVFNcbiAgICBTQ09SRV9MQUJFTF9GT05UOiAnMTBweCBDb21pYyBTYW5zIE1TJyxcbiAgICBORVhUX1NIQVBFX0xBQkVMX0ZPTlQ6ICcxMHB4IENvbWljIFNhbnMgTVMnLFxuICAgIEdBTUVfT1ZFUl9MQUJFTF9GT05UOiAnMjVweCBDb21pYyBTYW5zIE1TJyxcbiAgICBHQU1FX09WRVJfWU9VUl9TQ09SRV9MQUJFTF9GT05UOiAnMTVweCBDb21pYyBTYW5zIE1TJyxcbiAgICBGT05UX0NPTE9SOiAnd2hpdGUnLFxuICAgIFNDT1JFX0xBQkVMOiAnU2NvcmU6ICcsXG4gICAgTkVYVF9TSEFQRV9MQUJFTDogJ05leHQgU2hhcGU6ICcsXG4gICAgR0FNRV9PVkVSX0xBQkVMOiAnR2FtZSBPdmVyIScsXG4gICAgR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUw6ICdZb3VyIFNjb3JlOiAnLFxuXG4gICAgLy8gUE9TSVRJT05TXG4gICAgTkVYVF9TSEFQRV9QT1NJVElPTjoge1g6IDI4MywgWTogNn0sXG4gICAgU0NPUkVfTEFCRUxfUE9TSVRJT046IHtYOiA1LCBZOiAxMywgQUxJR05NRU5UOiAnbGVmdCd9LFxuICAgIE5FWFRfU0hBUEVfTEFCRUxfUE9TSVRJT046IHtYOiAyMTUsIFk6IDEzLCBBTElHTk1FTlQ6ICdsZWZ0J30sXG4gICAgR0FNRV9PVkVSX0xBQkVMX1BPU0lUSU9OOiB7WDogMTUwLCBZOiAyMDAsIEFMSUdOTUVOVDogJ2NlbnRlcid9LFxuICAgIEdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX1BPU0lUSU9OOiB7WDogMTUwLCBZOiAyMzUsIEFMSUdOTUVOVDogJ2NlbnRlcid9LFxuXG4gICAgLy8gS0VZU1xuICAgIFNUQVJUX0tFWTogMzIsXG4gICAgTEVGVF9LRVk6IDM3LFxuICAgIFJJR0hUX0tFWTogMzksXG4gICAgVVBfS0VZOiAzOCxcbiAgICBET1dOX0tFWTogNDAsXG4gICAgRFJPUDogMTMsXG5cbiAgICAvLyBSVUxFU1xuICAgIEZJTExFRF9MSU5FX0JPTlVTOiAxMDAsXG4gICAgRFJPUFBFRF9TSEFQRV9CT05VUzogMixcbiAgICBMT1dFUkVEX1NIQVBFX0JPTlVTOiAxLFxufTtcbiIsIlxuZXhwb3J0IGNsYXNzIFZlY3RvcjIge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgX3g6IG51bWJlcjtcbiAgICBwcml2YXRlIF95OiBudW1iZXI7XG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICB0aGlzLl95ID0geTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVByb3BlcnRpZXMtLS0tLS0vL1xuXG4gICAgZ2V0IFgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl94O1xuICAgIH1cbiAgICBcbiAgICBnZXQgWSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3k7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBaZXJvKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgYWRkWCh4OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuX3gsIHRoaXMuX3kpLmFkZFRvWCh4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkWSh5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuX3gsIHRoaXMuX3kpLmFkZFRvWSh5KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVG9YKHg6IG51bWJlcik6IFZlY3RvcjIge1xuICAgICAgICB0aGlzLl94ICs9IHg7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRUb1koeTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgICAgIHRoaXMuX3kgKz0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZCh4IDogbnVtYmVyLCB5OiBudW1iZXIpOiBWZWN0b3Iye1xuICAgICAgICB0aGlzLmFkZFRvWCh4KTtcbiAgICAgICAgdGhpcy5hZGRUb1koeSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn0iLCJcbmNsYXNzIEtleWJvYXJkIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBfa2V5c1ByZXNzZWQgOiBib29sZWFuW10gPSBbXTtcbiAgICBcbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHt0aGlzLmtleURvd24oZSkgfSk7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1Qcml2YXRlIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBrZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA6IHZvaWR7XG4gICAgICAgIHRoaXMuX2tleXNQcmVzc2VkW2V2ZW50LmtleUNvZGVdID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyByZXNldCgpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuX2tleXNQcmVzc2VkID0gW107XG4gICAgfVxuXG4gICAgcHVibGljIGlzUHJlc3NlZChrZXlDb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleXNQcmVzc2VkW2tleUNvZGVdO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IGtleWJvYXJkID0gbmV3IEtleWJvYXJkKCk7IiwiaW1wb3J0IHsgU2hhcGUgfSBmcm9tICcuLy4uL3NoYXBlL1NoYXBlJztcbmltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi4vc2hhcGUvQ2VsbFwiO1xuaW1wb3J0IGV2ZW50cyA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gJy4uL2dlb20vVmVjdG9yMic7XG5cbmV4cG9ydCBjbGFzcyBHYW1lTWFwIGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XG5cbiAgICAvLy0tLS0tLU1lbWJlcnMtLS0tLS0vL1xuXG4gICAgcHJpdmF0ZSBfbWFwOiBDZWxsW11bXTtcbiAgICBwcml2YXRlIF9zaGFwZXM6IFNoYXBlW10gPSBbXTtcbiAgICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF93aWR0aDogbnVtYmVyO1xuXG4gICAgLy8tLS0tLS1Qcm9wZXJ0aWVzLS0tLS0tLy9cbiAgICBcbiAgICBwdWJsaWMgZ2V0IGhlaWdodCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCB3aWR0aCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH1cblxuICAgIC8vLS0tLS0tQ29uc3RydWN0b3ItLS0tLS0vL1xuXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvLy0tLS0tLVB1YmxpYyBNZXRob2RzLS0tLS0tLy9cblxuICAgIHB1YmxpYyBpbml0KCk6IHZvaWR7XG4gICAgICAgIHRoaXMuX21hcCA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpOiBudW1iZXIgPSAwIDsgaSA8IHRoaXMuX2hlaWdodCA7IGkrKyApe1xuICAgICAgICAgICAgdGhpcy5fbWFwW2ldID0gW107XG5cbiAgICAgICAgICAgIGZvcihsZXQgajogbnVtYmVyID0gMCA7IGogPCB0aGlzLl93aWR0aCA7IGorKyl7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2ldW2pdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFNoYXBlKHNoYXBlOiBTaGFwZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZighdGhpcy5pc1NoYXBlVmFsaWRQbGFjZShzaGFwZSkpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgICAgICAgdGhpcy5fc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgICAgICB0aGlzLmVtaXQoJ25ld1NoYXBlJywgc2hhcGUpO1xuICAgICAgICB0aGlzLmNhY2hlU2hhcGVDZWxscyhzaGFwZSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZG9TaGFwZUFjdGlvbihzaGFwZTogU2hhcGUsIGFjdGlvbk5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBwcm9wYWJsZVNoYXBlID0gc2hhcGUuY2xvbmUoKTtcbiAgICAgICAgcHJvcGFibGVTaGFwZS5kbyhhY3Rpb25OYW1lKTtcblxuICAgICAgICBpZih0aGlzLmlzU2hhcGVWYWxpZFBsYWNlKHByb3BhYmxlU2hhcGUsIHNoYXBlKSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclNoYXBlQ2FjaGUoc2hhcGUpO1xuICAgICAgICAgICAgc2hhcGUuZG8oYWN0aW9uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2hhcGVDZWxscyhzaGFwZSk7XG4gICAgXG4gICAgICAgICAgICB0aGlzLmVtaXQoYCR7YWN0aW9uTmFtZX1TaGFwZWAsIHNoYXBlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlU2hhcGUoc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fc2hhcGVzLmluZGV4T2Yoc2hhcGUsIDApO1xuXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2hhcGVDYWNoZShzaGFwZSk7XG4gICAgICAgICAgICB0aGlzLl9zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc0luTWFwKGNvb3JkczogVmVjdG9yMikge1xuICAgICAgICBjb25zdCBbeCwgeV0gPSBbY29vcmRzLlgsIGNvb3Jkcy5ZXTtcblxuICAgICAgICByZXR1cm4geCA+PSAwICYmIHggPCB0aGlzLl93aWR0aCAmJiB5ID49IDAgJiYgeSA8IHRoaXMuX2hlaWdodDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2VsbChjb29yZHM6IFZlY3RvcjIpIDogQ2VsbCB7XG4gICAgICAgIGlmKHRoaXMuaXNJbk1hcChjb29yZHMpICYmIHR5cGVvZiB0aGlzLl9tYXBbY29vcmRzLlldW2Nvb3Jkcy5YXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBbY29vcmRzLlldW2Nvb3Jkcy5YXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc0NlbGxGaWxsZWQoY29vcmRzOiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuZ2V0Q2VsbChjb29yZHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYXJTaGFwZUNhY2hlKHNoYXBlOiBTaGFwZSkge1xuICAgICAgICBzaGFwZS5jZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgaWYodGhpcy5pc0luTWFwKGNlbGwucG9zaXRpb24pKSB7IFxuICAgICAgICAgICAgICAgIHRoaXMuX21hcFtjZWxsLlldW2NlbGwuWF0gPSB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWNoZVNoYXBlQ2VsbHMoc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHNoYXBlLmNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLmlzSW5NYXAoY2VsbC5wb3NpdGlvbikpIHsgXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2NlbGwuWV1bY2VsbC5YXSA9IGNlbGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFueUZpbGxlZE9uUm93KHJvdzogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXBbcm93XS5zb21lKGNlbGwgPT4gdHlwZW9mIGNlbGwgIT09ICd1bmRlZmluZWQnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzU2hhcGVWYWxpZFBsYWNlKHNoYXBlOiBTaGFwZSwgaWdub3JlU2hhcGU/OiBTaGFwZSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc2hhcGUuY2VsbHMuZXZlcnkoY2VsbCA9PiB7XG4gICAgICAgICAgICBpZighdGhpcy5pc0luTWFwKGNlbGwucG9zaXRpb24pKSB7IHJldHVybiBmYWxzZTsgfVxuXG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25DZWxsID0gdGhpcy5nZXRDZWxsKGNlbGwucG9zaXRpb24pO1xuXG4gICAgICAgICAgICBpZihjb2xsaXNpb25DZWxsKSB7XG4gICAgICAgICAgICAgICAgaWYoaWdub3JlU2hhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlnbm9yZVNoYXBlLmlzUGFydE9mU2hhcGUoY29sbGlzaW9uQ2VsbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVGaWxsZWRMaW5lcygpOiBudW1iZXIge1xuICAgICAgICAgICAgXG4gICAgICAgIGxldCBmaWxsZWRMaW5lc0NvdW50ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMCA7IGkgPCB0aGlzLl9tYXAubGVuZ3RoIDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxsZWRMaW5lIDogYm9vbGVhbiA9IHRoaXMuX21hcFtpXS5ldmVyeShjZWxsID0+IHR5cGVvZiBjZWxsICE9PSAndW5kZWZpbmVkJyk7XG5cbiAgICAgICAgICAgIGlmKGZpbGxlZExpbmUpIHtcbiAgICAgICAgICAgICAgICBmaWxsZWRMaW5lc0NvdW50Kys7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2ldLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxTaGFwZSA9IHRoaXMuX3NoYXBlcy5maW5kKHNoYXBlID0+IHNoYXBlLmNlbGxzLmluY2x1ZGVzKGNlbGwpKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbFNoYXBlLnJlbW92ZUNlbGwoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZihjZWxsU2hhcGUuY2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNoYXBlKGNlbGxTaGFwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVzdHJveVNoYXBlJywgY2VsbFNoYXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlU2hhcGUnLCBjZWxsU2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmb3IobGV0IGxpbmUgPSAwOyBsaW5lIDwgaTsgbGluZSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcFtsaW5lXS5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2VsbCkgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmNvb3Jkcy5hZGRUb1koMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjaGFuZ2VTaGFwZScsIGNlbGwuc2hhcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuc3BsaWNlKGksMSk7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JvdzogdW5kZWZpbmVkW10gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgdGhpcy5fd2lkdGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBuZXdSb3dbal0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX21hcC51bnNoaWZ0KG5ld1Jvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmlsbGVkTGluZXNDb3VudDtcbiAgICB9XG59IiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9nZW9tL1ZlY3RvcjJcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4uL3NoYXBlL1NoYXBlXCI7XG5cbmV4cG9ydCBjbGFzcyBDZWxsIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF9jb29yZHMgOiBWZWN0b3IyO1xuICAgIHByaXZhdGUgX3NoYXBlIDogU2hhcGU7XG5cbiAgICAvLy0tLS0tLVByb3BlcnRpZXMtLS0tLS0vL1xuXG4gICAgcHVibGljIGdldCBjb29yZHMoKSA6IFZlY3RvcjIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29vcmRzO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IGNvb3Jkcyh2IDogVmVjdG9yMikge1xuICAgICAgICB0aGlzLl9jb29yZHMgPSB2O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgc2hhcGUoKSA6IFNoYXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IHNoYXBlKHYgOiBTaGFwZSkge1xuICAgICAgICB0aGlzLl9zaGFwZSA9IHY7XG4gICAgfVxuXG5cbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKGNvb3JkczogVmVjdG9yMiwgc2hhcGU/OiBTaGFwZSkge1xuICAgICAgICB0aGlzLl9zaGFwZSA9IHNoYXBlO1xuICAgICAgICB0aGlzLl9jb29yZHMgPSBjb29yZHM7XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgZ2V0IHBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5YLCB0aGlzLlkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgWCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NoYXBlLnBvc2l0aW9uLlggKyB0aGlzLl9jb29yZHMuWDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IFkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaGFwZS5wb3NpdGlvbi5ZICsgdGhpcy5fY29vcmRzLlk7XG4gICAgfVxufSIsImltcG9ydCB7IFZlY3RvcjIgfSBmcm9tICcuLy4uL2dlb20vVmVjdG9yMic7XG5pbXBvcnQgeyBDZWxsIH0gZnJvbSAnLi9DZWxsJztcblxuaW50ZXJmYWNlIElTaGFwZUFjdGlvbiB7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGRvOiAoc2hhcGU6IFNoYXBlKSA9PiB2b2lkXG59XG5cbmFic3RyYWN0IGNsYXNzIFNoYXBlQWN0aW9uTW92ZSB7XG4gICAgbW92ZShzaGFwZTogU2hhcGUsIHg6IG51bWJlciA9IDAsIHk6IG51bWJlciA9IDApIHtcbiAgICAgICAgc2hhcGUucG9zaXRpb24uYWRkVG9YKHgpLmFkZFRvWSh5KTtcbiAgICB9XG59XG5cbmNsYXNzIFNoYXBlQWN0aW9uRG93biBleHRlbmRzIFNoYXBlQWN0aW9uTW92ZSB7XG4gICAgcHVibGljIG5hbWUgPSAnZG93bic7XG5cbiAgICBwdWJsaWMgZG8oc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHRoaXMubW92ZShzaGFwZSwgMCwgMSk7XG4gICAgfVxufVxuXG5jbGFzcyBTaGFwZUFjdGlvblJpZ2h0IGV4dGVuZHMgU2hhcGVBY3Rpb25Nb3ZlIHtcbiAgICBwdWJsaWMgbmFtZSA9ICdyaWdodCc7XG5cbiAgICBwdWJsaWMgZG8oc2hhcGU6IFNoYXBlKSB7XG4gICAgICAgIHRoaXMubW92ZShzaGFwZSwgMSwgMCk7XG4gICAgfVxufVxuXG5jbGFzcyBTaGFwZUFjdGlvbkxlZnQgZXh0ZW5kcyBTaGFwZUFjdGlvbk1vdmUge1xuICAgIHB1YmxpYyBuYW1lID0gJ2xlZnQnO1xuXG4gICAgcHVibGljIGRvKHNoYXBlOiBTaGFwZSkge1xuICAgICAgICB0aGlzLm1vdmUoc2hhcGUsIC0xLCAwKTtcbiAgICB9XG59XG5cbmNsYXNzIFNoYXBlQWN0aW9uUm90YXRlIHtcbiAgICBwdWJsaWMgbmFtZSA9ICdyb3RhdGUnO1xuXG4gICAgcHVibGljIGRvKHNoYXBlOiBTaGFwZSkge1xuICAgICAgICBzaGFwZS5jZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgY29uc3QgeCA9IGNlbGwuY29vcmRzLlg7XG4gICAgICAgICAgICBjb25zdCB5ID0gY2VsbC5jb29yZHMuWTtcblxuICAgICAgICAgICAgbGV0IG5ld1ggPSAoeSArIHNoYXBlLm9yaWdpbi5YIC0gc2hhcGUub3JpZ2luLlkpO1xuICAgICAgICAgICAgbGV0IG5ld1kgPSAoc2hhcGUub3JpZ2luLlggKyBzaGFwZS5vcmlnaW4uWSAtIHggLSAxKTtcblxuICAgICAgICAgICAgY2VsbC5jb29yZHMgPSBuZXcgVmVjdG9yMihuZXdYLCBuZXdZKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2hhcGUge1xuXG4gICAgLy8tLS0tLS1NZW1iZXJzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgX2NlbGxzOiBDZWxsW10gPSBbXTtcbiAgICBwcml2YXRlIF9jb2xvcjogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBfcG9zaXRpb246IFZlY3RvcjIgPSBudWxsO1xuICAgIHByaXZhdGUgX29yaWdpbjogVmVjdG9yMiA9IG51bGw7XG4gICAgcHJpdmF0ZSBfYWN0aW9uczogSVNoYXBlQWN0aW9uW10gPSBbXG4gICAgICAgIG5ldyBTaGFwZUFjdGlvbkRvd24oKSxcbiAgICAgICAgbmV3IFNoYXBlQWN0aW9uTGVmdCgpLFxuICAgICAgICBuZXcgU2hhcGVBY3Rpb25SaWdodCgpLFxuICAgICAgICBuZXcgU2hhcGVBY3Rpb25Sb3RhdGUoKVxuICAgIF07XG5cbiAgICAvLy0tLS0tLVByb3BlcnRpZXMtLS0tLS0vL1xuXG4gICAgcHVibGljIGdldCBjZWxscygpIDogQ2VsbFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxzO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IGNlbGxzKGNlbGxzIDogQ2VsbFtdKSB7XG4gICAgICAgIHRoaXMuX2NlbGxzID0gY2VsbHM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBwb3NpdGlvbigpIDogVmVjdG9yMiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBjb2xvcigpIDogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IG9yaWdpbigpIDogVmVjdG9yMiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vcmlnaW47XG4gICAgfVxuXG4gICAgLy8tLS0tLS1Db25zdHJ1Y3Rvci0tLS0tLS8vXG4gICAgXG4gICAgY29uc3RydWN0b3IoY2VsbHM6IENlbGxbXSwgcG9zaXRpb246IFZlY3RvcjIsIGNvbG9yOiBzdHJpbmcsIG9yaWdpbjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAuNSwgMC41KSkge1xuICAgICAgICB0aGlzLl9jZWxscyA9IGNlbGxzO1xuICAgICAgICB0aGlzLl9jZWxscy5mb3JFYWNoKGNlbGwgPT4gY2VsbC5zaGFwZSA9IHRoaXMpO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLl9jb2xvciA9IGNvbG9yO1xuICAgICAgICB0aGlzLl9vcmlnaW4gPSBvcmlnaW47XG4gICAgfVxuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgZG8oYWN0aW9uTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2FjdGlvbnMuZmluZChhY3Rpb24gPT4gYWN0aW9uLm5hbWUgPT09IGFjdGlvbk5hbWUpLmRvKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVDZWxsKGNlbGw6IENlbGwpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9jZWxscy5pbmRleE9mKGNlbGwsIDApO1xuXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9jZWxscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzUGFydE9mU2hhcGUoY2VsbDogQ2VsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VsbHMuaW5jbHVkZXMoY2VsbCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsb25lKCk6IFNoYXBlIHtcbiAgICAgICAgY29uc3QgbmV3Q2VsbHMgPSB0aGlzLl9jZWxscy5tYXAoY2VsbCA9PiBuZXcgQ2VsbChjZWxsLmNvb3JkcykpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBTaGFwZShcbiAgICAgICAgICAgIG5ld0NlbGxzLCBcbiAgICAgICAgICAgIG5ldyBWZWN0b3IyKHRoaXMuX3Bvc2l0aW9uLlgsIHRoaXMuX3Bvc2l0aW9uLlkpLCBcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yLCBcbiAgICAgICAgICAgIG5ldyBWZWN0b3IyKHRoaXMuX29yaWdpbi5YLCB0aGlzLl9vcmlnaW4uWSlcbiAgICAgICAgKTsgXG4gICAgfVxufSIsImltcG9ydCB7IFNoYXBlVHlwZSB9IGZyb20gXCIuL1NoYXBlVHlwZVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi9nZW9tL1ZlY3RvcjJcIjtcbmltcG9ydCB7IFNoYXBlIH0gZnJvbSBcIi4vU2hhcGVcIjtcbmltcG9ydCB7IENlbGwgfSBmcm9tIFwiLi9DZWxsXCI7XG5cbmV4cG9ydCBjbGFzcyBTaGFwZUZhY3Rvcnkge1xuXG4gICAgLy8tLS0tLS1QdWJsaWMgTWV0aG9kcy0tLS0tLS8vXG5cbiAgICBwdWJsaWMgY3JlYXRlU2hhcGUoc2hhcGVUeXBlOiBTaGFwZVR5cGUsIHBvc2l0aW9uOiBWZWN0b3IyLCBjb2xvcjogc3RyaW5nKTogU2hhcGUge1xuICAgICAgICBsZXQgc2hhcGVDZWxsczogQ2VsbFtdID0gW107XG4gICAgICAgIGxldCBvcmlnaW46IFZlY3RvcjI7XG5cbiAgICAgICAgc3dpdGNoKHNoYXBlVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuSTpcbiAgICAgICAgICAgICAgICBzaGFwZUNlbGxzID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAtMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMilcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG5cbiAgICAgICAgICAgICAgICBvcmlnaW4gPSBuZXcgVmVjdG9yMigwLCAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLko6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgLTEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5MOlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIC0xKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigxLCAxKSxcbiAgICAgICAgICAgICAgICBdLm1hcChjb29yZHMgPT4gbmV3IENlbGwoY29vcmRzKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5POlxuICAgICAgICAgICAgICAgIHNoYXBlQ2VsbHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAwKSwgXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcbiAgICAgICAgICAgICAgICBvcmlnaW4gPSBuZXcgVmVjdG9yMigwLCAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLlM6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDEsIDApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigwLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoLTEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLlo6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKC0xLCAwKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLlQ6XG4gICAgICAgICAgICAgICAgc2hhcGVDZWxscyA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIoMCwgMCksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDAsIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMigtMSwgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKDEsIDEpLFxuICAgICAgICAgICAgICAgIF0ubWFwKGNvb3JkcyA9PiBuZXcgQ2VsbChjb29yZHMpKTtcblxuICAgICAgICAgICAgICAgIG9yaWdpbiA9IG5ldyBWZWN0b3IyKDAuNSwgMS41KTtcbiAgICAgICAgICAgICAgICBicmVhazsgIFxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBTaGFwZShzaGFwZUNlbGxzLCBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZKSwgY29sb3IsIG9yaWdpbik7XG4gICAgfVxufSIsImV4cG9ydCBlbnVtIFNoYXBlVHlwZSB7XG4gICAgSSxcbiAgICBKLFxuICAgIEwsXG4gICAgUyxcbiAgICBaLFxuICAgIE8sXG4gICAgVFxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iXSwibmFtZXMiOlsidGV0cmlzIiwiUmVmbGVjdE93bktleXMiLCJSIiwiUmVmbGVjdCIsIlJlZmxlY3RBcHBseSIsImFwcGx5IiwidGFyZ2V0IiwicmVjZWl2ZXIiLCJhcmdzIiwiRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJjYWxsIiwib3duS2V5cyIsIk9iamVjdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsImdldE93blByb3BlcnR5TmFtZXMiLCJjb25jYXQiLCJOdW1iZXJJc05hTiIsIk51bWJlciIsImlzTmFOIiwidmFsdWUiLCJFdmVudEVtaXR0ZXIiLCJpbml0IiwidGhpcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJvbmNlIiwiZW1pdHRlciIsIm5hbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yTGlzdGVuZXIiLCJlcnIiLCJyZW1vdmVMaXN0ZW5lciIsInJlc29sdmVyIiwic2xpY2UiLCJhcmd1bWVudHMiLCJldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIiLCJoYW5kbGVyIiwiZmxhZ3MiLCJvbiIsImFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyIiwiX2V2ZW50cyIsInVuZGVmaW5lZCIsIl9ldmVudHNDb3VudCIsIl9tYXhMaXN0ZW5lcnMiLCJkZWZhdWx0TWF4TGlzdGVuZXJzIiwiY2hlY2tMaXN0ZW5lciIsImxpc3RlbmVyIiwiVHlwZUVycm9yIiwiX2dldE1heExpc3RlbmVycyIsInRoYXQiLCJfYWRkTGlzdGVuZXIiLCJ0eXBlIiwicHJlcGVuZCIsIm0iLCJldmVudHMiLCJleGlzdGluZyIsIndhcm5pbmciLCJjcmVhdGUiLCJuZXdMaXN0ZW5lciIsImVtaXQiLCJ1bnNoaWZ0IiwicHVzaCIsImxlbmd0aCIsIndhcm5lZCIsInciLCJFcnJvciIsIlN0cmluZyIsImNvdW50IiwiY29uc29sZSIsIndhcm4iLCJvbmNlV3JhcHBlciIsImZpcmVkIiwid3JhcEZuIiwiX29uY2VXcmFwIiwic3RhdGUiLCJ3cmFwcGVkIiwiYmluZCIsIl9saXN0ZW5lcnMiLCJ1bndyYXAiLCJldmxpc3RlbmVyIiwiYXJyIiwicmV0IiwiQXJyYXkiLCJpIiwidW53cmFwTGlzdGVuZXJzIiwiYXJyYXlDbG9uZSIsImxpc3RlbmVyQ291bnQiLCJuIiwiY29weSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3cmFwTGlzdGVuZXIiLCJhcmciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwic2V0IiwiUmFuZ2VFcnJvciIsImdldFByb3RvdHlwZU9mIiwic2V0TWF4TGlzdGVuZXJzIiwiZ2V0TWF4TGlzdGVuZXJzIiwiZG9FcnJvciIsImVycm9yIiwiZXIiLCJtZXNzYWdlIiwiY29udGV4dCIsImxlbiIsImxpc3RlbmVycyIsImFkZExpc3RlbmVyIiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3QiLCJwb3NpdGlvbiIsIm9yaWdpbmFsTGlzdGVuZXIiLCJzaGlmdCIsImluZGV4IiwicG9wIiwic3BsaWNlT25lIiwib2ZmIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwia2V5Iiwia2V5cyIsInJhd0xpc3RlbmVycyIsImV2ZW50TmFtZXMiLCJ3aWR0aCIsImhlaWdodCIsIl9zaGFwZVR5cGVzUXVldWUiLCJfbW92aW5nU2hhcGUiLCJfc2hhcGVUeXBlcyIsIlNoYXBlVHlwZSIsIkkiLCJKIiwiTCIsIk8iLCJTIiwiWiIsIlQiLCJfc2hhcGVGYWN0b3J5IiwiU2hhcGVGYWN0b3J5IiwiX21hcCIsIkdhbWVNYXAiLCJzaGFwZSIsIlNWR0NvbnRleHQiLCJkcmF3U2hhcGUiLCJHQU1FX0NPTkZJRyIsIkNFTExfU0laRSIsInVwZGF0ZVNoYXBlIiwicmVkcmF3U2hhcGUiLCJkZXN0cm95U2hhcGUiLCJfZ2FtZU92ZXIiLCJfc2NvcmUiLCJpbmNyZWFzZVNjb3JlIiwidG9BZGQiLCJoYW5kbGVJbnB1dCIsImtleWJvYXJkIiwiaXNQcmVzc2VkIiwiVVBfS0VZIiwiZG9TaGFwZUFjdGlvbiIsIkRPV05fS0VZIiwiTE9XRVJFRF9TSEFQRV9CT05VUyIsIkxFRlRfS0VZIiwiUklHSFRfS0VZIiwiaGFuZGxlRmlsbGVkTGluZXMiLCJmaWxsZWRMaW5lc0NvdW50IiwicmVtb3ZlRmlsbGVkTGluZXMiLCJGSUxMRURfTElORV9CT05VUyIsIl91cGRhdGVFdmVyeVhGcmFtZXMiLCJnZW5lcmF0ZVJhbmRvbVNoYXBlVHlwZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImJ1aWxkU2hhcGUiLCJyYW5kb21TaGFwZVR5cGVJbmRleCIsInNoYXBlQ29sb3IiLCJTSEFQRV9DT0xPUlMiLCJjcmVhdGVTaGFwZSIsIlZlY3RvcjIiLCJfZnJhbWUiLCJVUERBVEVfQUZURVJfWF9GUkFNRVMiLCJuZXdTaGFwZVR5cGUiLCJhZGRTaGFwZSIsInVwZGF0ZSIsImRyYXciLCJHYW1lV29ybGQiLCJzdmciLCJfc2hhcGVzIiwiTWFwIiwiX3N2ZyIsImNsZWFyIiwiaW5uZXJIVE1MIiwiY2VsbFNpemUiLCJoYXMiLCJncm91cCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY2VsbHMiLCJmb3JFYWNoIiwiY2VsbCIsInJlY3QiLCJzZXRBdHRyaWJ1dGUiLCJjb29yZHMiLCJYIiwidG9TdHJpbmciLCJZIiwiY29sb3IiLCJhcHBlbmRDaGlsZCIsIlNIT1dfT1JJR0lOUyIsIm9yaWdpbiIsInJlbW92ZSIsImRlbGV0ZSIsInN2Z0VsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIlNWRyIsIkdBTUVfV0lEVEgiLCJHQU1FX0hFSUdIVCIsIkNBTlZBU19NSU5fV0lEVEgiLCJDQU5WQVNfTUlOX0hFSUdIVCIsIk5FWFRfU0hBUEVfQ0VMTF9TSVpFIiwiU1RST0tFX1dJRFRIIiwiQkFDS0dST1VORF9DT0xPUiIsIlNUUk9LRV9DT0xPUiIsIlNDT1JFX0xBQkVMX0ZPTlQiLCJORVhUX1NIQVBFX0xBQkVMX0ZPTlQiLCJHQU1FX09WRVJfTEFCRUxfRk9OVCIsIkdBTUVfT1ZFUl9ZT1VSX1NDT1JFX0xBQkVMX0ZPTlQiLCJGT05UX0NPTE9SIiwiU0NPUkVfTEFCRUwiLCJORVhUX1NIQVBFX0xBQkVMIiwiR0FNRV9PVkVSX0xBQkVMIiwiR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUwiLCJORVhUX1NIQVBFX1BPU0lUSU9OIiwiU0NPUkVfTEFCRUxfUE9TSVRJT04iLCJBTElHTk1FTlQiLCJORVhUX1NIQVBFX0xBQkVMX1BPU0lUSU9OIiwiR0FNRV9PVkVSX0xBQkVMX1BPU0lUSU9OIiwiR0FNRV9PVkVSX1lPVVJfU0NPUkVfTEFCRUxfUE9TSVRJT04iLCJTVEFSVF9LRVkiLCJEUk9QIiwiRFJPUFBFRF9TSEFQRV9CT05VUyIsIngiLCJ5IiwiX3giLCJfeSIsImFkZFgiLCJhZGRUb1giLCJhZGRZIiwiYWRkVG9ZIiwiYWRkIiwiX2tleXNQcmVzc2VkIiwiZSIsImtleURvd24iLCJldmVudCIsImtleUNvZGUiLCJyZXNldCIsIktleWJvYXJkIiwiX3dpZHRoIiwiX2hlaWdodCIsImoiLCJpc1NoYXBlVmFsaWRQbGFjZSIsImNhY2hlU2hhcGVDZWxscyIsImFjdGlvbk5hbWUiLCJwcm9wYWJsZVNoYXBlIiwiY2xvbmUiLCJkbyIsImNsZWFyU2hhcGVDYWNoZSIsInJlbW92ZVNoYXBlIiwiaW5kZXhPZiIsInNwbGljZSIsImlzSW5NYXAiLCJnZXRDZWxsIiwiaXNDZWxsRmlsbGVkIiwiYW55RmlsbGVkT25Sb3ciLCJyb3ciLCJzb21lIiwiaWdub3JlU2hhcGUiLCJldmVyeSIsImNvbGxpc2lvbkNlbGwiLCJpc1BhcnRPZlNoYXBlIiwiY2VsbFNoYXBlIiwiZmluZCIsImluY2x1ZGVzIiwicmVtb3ZlQ2VsbCIsImxpbmUiLCJuZXdSb3ciLCJfc2hhcGUiLCJfY29vcmRzIiwidiIsIkNlbGwiLCJtb3ZlIiwiU2hhcGVBY3Rpb25Nb3ZlIiwibmV3WCIsIm5ld1kiLCJfY2VsbHMiLCJfY29sb3IiLCJfcG9zaXRpb24iLCJfb3JpZ2luIiwiX2FjdGlvbnMiLCJTaGFwZUFjdGlvbkRvd24iLCJTaGFwZUFjdGlvbkxlZnQiLCJTaGFwZUFjdGlvblJpZ2h0IiwiU2hhcGVBY3Rpb25Sb3RhdGUiLCJhY3Rpb24iLCJTaGFwZSIsIm1hcCIsInNoYXBlVHlwZSIsInNoYXBlQ2VsbHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2FtZUxvb3AiLCJnYW1lT3ZlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJzb3VyY2VSb290IjoiIn0=