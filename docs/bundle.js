!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_CONFIG={CELL_SIZE:40,BACKGROUND_COLOR:"#28363B",GRID_COLOR:"black",SHAPE_COLORS:["#F9B38F","#BF6C86","#84AF9C","#6D5C80","#FFA3D0","#439F9E","#EF5F3C"],LEFT_KEY:37,RIGHT_KEY:39,UP_KEY:38,DOWN_KEY:40}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.keysPressed=[],document.addEventListener("keydown",function(t){e.keyDown(t)})}return e.prototype.keyDown=function(e){this.keysPressed[e.keyCode]=!0},e.prototype.reset=function(){this.keysPressed=[]},e.prototype.isPressed=function(e){return this.keysPressed[e]},e}();t.keyboard=new n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"X",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Zero",{get:function(){return new e(0,0)},enumerable:!0,configurable:!0}),e.prototype.addX=function(t){return new e(this._x,this._y).addToX(t)},e.prototype.addY=function(t){return new e(this._x,this._y).addToY(t)},e.prototype.addToX=function(e){return this._x+=e,this},e.prototype.addToY=function(e){return this._y+=e,this},e.prototype.add=function(e,t){this.addToX(e),this.addToY(t)},e}();t.Vector2=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=o(2),r=n.GAME_CONFIG.CELL_SIZE,a=function(){function e(e){this._canvas=e,this._context=this._canvas.getContext("2d")}return Object.defineProperty(e.prototype,"Width",{get:function(){return this._canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Height",{get:function(){return this._canvas.height},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)},e.prototype.drawBackground=function(e){this._context.save(),this._context.fillStyle=e,this._context.fillRect(0,0,this._canvas.width,this._canvas.height),this._context.restore()},e.prototype.drawGrid=function(e){this._context.save(),this._context.strokeStyle=e;for(var t=0;t<this.Width/r;t++)this._context.beginPath(),this._context.moveTo(t*r,0),this._context.lineTo(t*r,this.Height),this._context.stroke();for(t=0;t<this.Height/r;t++)this._context.beginPath(),this._context.moveTo(0,t*r),this._context.lineTo(this.Width,t*r),this._context.stroke();this._context.restore()},e.prototype.drawRect=function(e,t,o,n){this._context.save(),this._context.fillStyle=t,this._context.fillRect(e.X,e.Y,o,n),this._context.restore()},e.prototype.drawRectAtCell=function(e,t,o){this.drawRect(new i.Vector2(t*r,e*r),o,r,r)},e}(),h=document.getElementById("screen");t.canvas2D=new a(h)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=o(5),r=o(1),a=o(3),h=o(0),s=a.canvas2D.Width/h.GAME_CONFIG.CELL_SIZE,c=a.canvas2D.Height/h.GAME_CONFIG.CELL_SIZE;function p(){n.update(),r.keyboard.reset(),a.canvas2D.clear(),a.canvas2D.drawBackground(h.GAME_CONFIG.BACKGROUND_COLOR),n.draw(),a.canvas2D.drawGrid(h.GAME_CONFIG.GRID_COLOR),requestAnimationFrame(p)}n=new i.GameWorld(s,c),p()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=o(1),r=o(2),a=o(3),h=o(6),s=o(7),c=function(){function e(e,t){this._refreshRate=15,this._frame=0,this._movingShape=[],this._shapeTypes=[s.ShapeType.I,s.ShapeType.J,s.ShapeType.L,s.ShapeType.O,s.ShapeType.S,s.ShapeType.Z,s.ShapeType.T],this._width=e,this._height=t,this.initMap(),this.generateRandomShape()}return e.prototype.initMap=function(){this._map=[];for(var e=0;e<this._height;e++){this._map[e]=[];for(var t=0;t<this._width;t++)this._map[e][t]=new h.Cell}},e.prototype.isCellFilled=function(e,t){return this._map[t][e].filled},e.prototype.clearCell=function(e,t){this._map[t][e].filled=!1},e.prototype.colorCell=function(e,t,o){this._map[t][e].filled=!0,this._map[t][e].color=o},e.prototype.isPartOfShape=function(e,t){return t.some(function(t){return t.X===e.X&&t.Y===e.Y})},e.prototype.handleInput=function(){var e=this;i.keyboard.isPressed(n.GAME_CONFIG.UP_KEY)&&this.rotateShape(),i.keyboard.isPressed(n.GAME_CONFIG.DOWN_KEY)&&this.lowerShape();var t=0;(i.keyboard.isPressed(n.GAME_CONFIG.LEFT_KEY)?t=-1:i.keyboard.isPressed(n.GAME_CONFIG.RIGHT_KEY)&&(t=1),0!==t)&&(this._movingShape.some(function(o){var n=o.X+t,i=e.isPartOfShape(o.addX(t),e._movingShape);return n<0||n===e._width||e.isCellFilled(n,o.Y)&&!i})||(this._movingShape.forEach(function(o){e.clearCell(o.X,o.Y),o.addToX(t)}),this._movingShapeOrigin&&this._movingShapeOrigin.addToX(t),this._movingShape.forEach(function(t){e.colorCell(t.X,t.Y,e._movingShapeColor)})))},e.prototype.rotateShape=function(){var e=this;if(this._movingShapeOrigin){for(var t=[],o=0;o<this._movingShape.length;o++){var n=this._movingShape[o],i=n.X-this._movingShapeOrigin.X,r=-(n.Y-this._movingShapeOrigin.Y),a=i,h=this._movingShapeOrigin.addX(r).addY(a);t.push(h)}t.every(function(t){var o=e.isPartOfShape(t,e._movingShape);return t.Y>=0&&t.X>=0&&t.X<e._width&&(!e.isCellFilled(t.X,t.Y)||o)})&&(this._movingShape.forEach(function(t){e.clearCell(t.X,t.Y)}),this._movingShape=t,this._movingShape.forEach(function(t){e.colorCell(t.X,t.Y,e._movingShapeColor)}))}},e.prototype.lowerShape=function(){var e=this,t=this._movingShape.some(function(t){var o=t.Y+1,n=e.isPartOfShape(t.addY(1),e._movingShape);return o===e._height||e.isCellFilled(t.X,o)&&!n});return t||(this._movingShape.forEach(function(t){e.clearCell(t.X,t.Y),t.addToY(1)}),this._movingShapeOrigin&&this._movingShapeOrigin.addToY(1),this._movingShape.forEach(function(t){e.colorCell(t.X,t.Y,e._movingShapeColor)})),t},e.prototype.handleFilledLines=function(){for(var e=0;e<this._map.length;e++){if(this._map[e].every(function(e){return e.filled})){this._map.splice(e,1);for(var t=[],o=0;o<this._width;o++)t[o]=new h.Cell;this._map.unshift(t)}}},e.prototype.checkForGameOver=function(){return this._map[0].some(function(e){return e.filled})},e.prototype.addShape=function(e){var t,o,i=this;switch(this._movingShape=[],e){case s.ShapeType.I:t=Math.floor(Math.random()*this._width),o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X,o.Y+2),new r.Vector2(o.X,o.Y+3)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1);break;case s.ShapeType.J:t=Math.floor(Math.random()*(this._width-1))+1,o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X,o.Y+2),new r.Vector2(o.X-1,o.Y+2)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1);break;case s.ShapeType.L:t=Math.floor(Math.random()*(this._width-1)),o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X,o.Y+2),new r.Vector2(o.X+1,o.Y+2)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1);break;case s.ShapeType.O:t=Math.floor(Math.random()*(this._width-1)),o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X+1,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X+1,o.Y+1)],this._movingShapeOrigin=null;break;case s.ShapeType.S:t=Math.floor(Math.random()*(this._width-2))+1,o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X+1,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X-1,o.Y+1)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1);break;case s.ShapeType.Z:t=Math.floor(Math.random()*(this._width-2))+1,o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X-1,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X+1,o.Y+1)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1);break;case s.ShapeType.T:t=Math.floor(Math.random()*(this._width-2))+1,o=new r.Vector2(t,0),this._movingShape=[new r.Vector2(o.X,o.Y),new r.Vector2(o.X,o.Y+1),new r.Vector2(o.X-1,o.Y+1),new r.Vector2(o.X+1,o.Y+1)],this._movingShapeOrigin=new r.Vector2(o.X,o.Y+1)}var a=this._shapeTypes.indexOf(e);this._movingShapeColor=n.GAME_CONFIG.SHAPE_COLORS[a],this._movingShape.forEach(function(e){i.colorCell(e.X,e.Y,i._movingShapeColor)})},e.prototype.generateRandomShape=function(){var e=Math.floor(Math.random()*this._shapeTypes.length);this.addShape(this._shapeTypes[e])},e.prototype.update=function(){(this.handleInput(),++this._frame%this._refreshRate)||this.lowerShape()&&(this.handleFilledLines(),this.checkForGameOver()?console.log("Game Over!"):this.generateRandomShape())},e.prototype.draw=function(){for(var e=0;e<this._map.length;e++)for(var t=0;t<this._map[e].length;t++){var o=this._map[e][t];o.filled&&a.canvas2D.drawRectAtCell(e,t,o.color)}},e}();t.GameWorld=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._filled=!1}return Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filled",{get:function(){return this._filled},set:function(e){this._filled=e},enumerable:!0,configurable:!0}),e}();t.Cell=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.I=0]="I",e[e.J=1]="J",e[e.L=2]="L",e[e.S=3]="S",e[e.Z=4]="Z",e[e.O=5]="O",e[e.T=6]="T"}(t.ShapeType||(t.ShapeType={}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUuY29uZmlnLnRzIiwid2VicGFjazovLy8uL3NyYy9pbnB1dC9LZXlib2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VvbS9WZWN0b3IyLnRzIiwid2VicGFjazovLy8uL3NyYy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dhbWVXb3JsZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFwL0NlbGwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXBlVHlwZS9TaGFwZVR5cGUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJHQU1FX0NPTkZJRyIsIkNFTExfU0laRSIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJHUklEX0NPTE9SIiwiU0hBUEVfQ09MT1JTIiwiTEVGVF9LRVkiLCJSSUdIVF9LRVkiLCJVUF9LRVkiLCJET1dOX0tFWSIsIktleWJvYXJkIiwiX3RoaXMiLCJ0aGlzIiwia2V5c1ByZXNzZWQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5RG93biIsImV2ZW50Iiwia2V5Q29kZSIsInJlc2V0IiwiaXNQcmVzc2VkIiwia2V5Ym9hcmQiLCJWZWN0b3IyIiwieCIsInkiLCJfeCIsIl95IiwiYWRkWCIsImFkZFRvWCIsImFkZFkiLCJhZGRUb1kiLCJhZGQiLCJnYW1lX2NvbmZpZ18xIiwiVmVjdG9yMl8xIiwiQ2FudmFzMkQiLCJjYW52YXMiLCJfY2FudmFzIiwiX2NvbnRleHQiLCJnZXRDb250ZXh0Iiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhciIsImNsZWFyUmVjdCIsImRyYXdCYWNrZ3JvdW5kIiwiYmFja2dyb3VuZENvbG9yIiwic2F2ZSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicmVzdG9yZSIsImRyYXdHcmlkIiwiZ3JpZENvbG9yIiwic3Ryb2tlU3R5bGUiLCJXaWR0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsIkhlaWdodCIsInN0cm9rZSIsImRyYXdSZWN0IiwicG9zaXRpb24iLCJjb2xvciIsIlgiLCJZIiwiZHJhd1JlY3RBdENlbGwiLCJqIiwiZ2V0RWxlbWVudEJ5SWQiLCJjYW52YXMyRCIsIm1hcCIsIkdhbWVXb3JsZF8xIiwiS2V5Ym9hcmRfMSIsIkNhbnZhc18xIiwiZ2FtZVdpZHRoIiwiZ2FtZUhlaWdodCIsImdhbWVMb29wIiwidXBkYXRlIiwiZHJhdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkdhbWVXb3JsZCIsIkNlbGxfMSIsIlNoYXBlVHlwZV8xIiwiX3JlZnJlc2hSYXRlIiwiX2ZyYW1lIiwiX21vdmluZ1NoYXBlIiwiX3NoYXBlVHlwZXMiLCJTaGFwZVR5cGUiLCJJIiwiSiIsIkwiLCJPIiwiUyIsIloiLCJUIiwiX3dpZHRoIiwiX2hlaWdodCIsImluaXRNYXAiLCJnZW5lcmF0ZVJhbmRvbVNoYXBlIiwiX21hcCIsIkNlbGwiLCJpc0NlbGxGaWxsZWQiLCJmaWxsZWQiLCJjbGVhckNlbGwiLCJjb2xvckNlbGwiLCJpc1BhcnRPZlNoYXBlIiwiY2VsbCIsInNoYXBlIiwic29tZSIsInNoYXBlQ2VsbCIsImhhbmRsZUlucHV0Iiwicm90YXRlU2hhcGUiLCJsb3dlclNoYXBlIiwidG9Nb3ZlWCIsIm5leHRYIiwicGFydE9mU2hhcGUiLCJmb3JFYWNoIiwiX21vdmluZ1NoYXBlT3JpZ2luIiwiX21vdmluZ1NoYXBlQ29sb3IiLCJuZXdTaGFwZSIsImxlbmd0aCIsIm5ld1giLCJuZXdZIiwibmV3Q2VsbCIsInB1c2giLCJldmVyeSIsInJlYWNoZWRCb3R0b20iLCJuZXh0WSIsImhhbmRsZUZpbGxlZExpbmVzIiwic3BsaWNlIiwibmV3Um93IiwidW5zaGlmdCIsImNoZWNrRm9yR2FtZU92ZXIiLCJhZGRTaGFwZSIsInNoYXBlVHlwZSIsInJhbmRvbVgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzaGFwZVR5cGVJbmRleCIsImluZGV4T2YiLCJyYW5kb21TaGFwZVR5cGVJbmRleCIsImNvbnNvbGUiLCJsb2ciLCJfZmlsbGVkIiwiX2NvbG9yIiwidiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEs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QSxJQUFBLFNBQ0FBLElBQUEsU0FDQUEsSUFBQSxTQUNBQSxJQUFBLFNBQ0FBLElBQUEsU0FDQUEsSUFBQSxTQVBKLENBQVl0SCxFQUFBc0gsWUFBQXRILEVBQUFzSCxVQUFTIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsImV4cG9ydCBjb25zdCBHQU1FX0NPTkZJRyA6IGFueSA9IHtcblxuICAgIC8vIFBIWVNJQ1NcblxuICAgIC8vIFNJWklOR1xuICAgIENFTExfU0laRTogNDAsXG5cbiAgICAvLyBDT0xPUlNcbiAgICBCQUNLR1JPVU5EX0NPTE9SOiAnIzI4MzYzQicsXG4gICAgR1JJRF9DT0xPUjogJ2JsYWNrJyxcbiAgICBTSEFQRV9DT0xPUlM6IFtcIiNGOUIzOEZcIiwgXCIjQkY2Qzg2XCIsIFwiIzg0QUY5Q1wiLCBcIiM2RDVDODBcIiwgXCIjRkZBM0QwXCIsIFwiIzQzOUY5RVwiLCBcIiNFRjVGM0NcIl0sXG5cbiAgICAvLyBLRVlTXG4gICAgTEVGVF9LRVk6IDM3LFxuICAgIFJJR0hUX0tFWTogMzksXG4gICAgVVBfS0VZOiAzOCxcbiAgICBET1dOX0tFWTogNDBcbn07XG4iLCJcbmNsYXNzIEtleWJvYXJkIHtcblxuICAgIGtleXNQcmVzc2VkIDogYm9vbGVhbltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7dGhpcy5rZXlEb3duKGUpIH0pO1xuICAgIH1cblxuICAgIGtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlzUHJlc3NlZFtldmVudC5rZXlDb2RlXSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmVzZXQoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLmtleXNQcmVzc2VkID0gW107XG4gICAgfVxuXG4gICAgaXNQcmVzc2VkKGtleUNvZGU6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzUHJlc3NlZFtrZXlDb2RlXTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBrZXlib2FyZCA9IG5ldyBLZXlib2FyZCgpOyIsIlxuZXhwb3J0IGNsYXNzIFZlY3RvcjIge1xuICAgIHByaXZhdGUgX3g6IG51bWJlcjtcbiAgICBwcml2YXRlIF95OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgfVxuXG4gICAgZ2V0IFgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl94O1xuICAgIH1cbiAgICBcbiAgICBnZXQgWSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3k7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBaZXJvKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIoMCwgMCk7XG4gICAgfVxuXG4gICAgYWRkWCh4OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuX3gsIHRoaXMuX3kpLmFkZFRvWCh4KTtcbiAgICB9XG5cbiAgICBhZGRZKHk6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy5feCwgdGhpcy5feSkuYWRkVG9ZKHkpO1xuICAgIH1cblxuICAgIGFkZFRvWCh4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5feCArPSB4O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhZGRUb1koeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3kgKz0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgYWRkKHggOiBudW1iZXIsIHk6IG51bWJlcikgOiB2b2lke1xuICAgICAgICB0aGlzLmFkZFRvWCh4KTtcbiAgICAgICAgdGhpcy5hZGRUb1koeSk7XG4gICAgfVxufSIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSAnLi9nYW1lLmNvbmZpZyc7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnLi9nZW9tL1ZlY3RvcjInO1xuY29uc3QgQ0VMTF9TSVpFID0gR0FNRV9DT05GSUcuQ0VMTF9TSVpFO1xuXG5jbGFzcyBDYW52YXMyRCB7XG5cbiAgICBwcml2YXRlIF9jYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIF9jb250ZXh0IDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3IoY2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY2FudmFzID0gY2FudmFzO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgfVxuXG4gICAgZ2V0IFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzLndpZHRoO1xuICAgIH1cbiAgICBcbiAgICBnZXQgSGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzLmhlaWdodDtcbiAgICB9XG5cbiAgICBjbGVhcigpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgfVxuXG4gICAgZHJhd0JhY2tncm91bmQoYmFja2dyb3VuZENvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5zYXZlKCk7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuZmlsbFN0eWxlID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGRyYXdHcmlkKGdyaWRDb2xvcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuc2F2ZSgpO1xuICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZVN0eWxlID0gZ3JpZENvbG9yO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgdGhpcy5XaWR0aCAvIENFTExfU0laRSA7IGkrKyl7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oaSAqIENFTExfU0laRSwgMCk7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyhpICogQ0VMTF9TSVpFLCB0aGlzLkhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLkhlaWdodCAvIENFTExfU0laRSA7IGkrKyl7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dC5tb3ZlVG8oMCwgaSAqIENFTExfU0laRSk7XG4gICAgICAgICAgICB0aGlzLl9jb250ZXh0LmxpbmVUbyh0aGlzLldpZHRoLCBpICogQ0VMTF9TSVpFKTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBkcmF3UmVjdChwb3NpdGlvbjogVmVjdG9yMiwgY29sb3I6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuc2F2ZSgpO1xuICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICB0aGlzLl9jb250ZXh0LmZpbGxSZWN0KHBvc2l0aW9uLlgsIHBvc2l0aW9uLlksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBkcmF3UmVjdEF0Q2VsbChpOiBudW1iZXIsIGo6IG51bWJlciwgY29sb3I6IHN0cmluZykgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kcmF3UmVjdChuZXcgVmVjdG9yMihqICogQ0VMTF9TSVpFLGkgKiBDRUxMX1NJWkUpLCBjb2xvciwgQ0VMTF9TSVpFLCBDRUxMX1NJWkUpO1xuICAgIH1cbn1cblxuY29uc3QgY2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NyZWVuJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5leHBvcnQgY29uc3QgY2FudmFzMkQgPSBuZXcgQ2FudmFzMkQoY2FudmFzKTsiLCJpbXBvcnQgeyBHYW1lV29ybGQgfSBmcm9tICcuL0dhbWVXb3JsZCc7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4vaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgY2FudmFzMkQgfSBmcm9tICcuL0NhbnZhcyc7XG5pbXBvcnQgeyBHQU1FX0NPTkZJRyB9IGZyb20gJy4vZ2FtZS5jb25maWcnO1xuXG5jb25zdCBnYW1lV2lkdGggPSBjYW52YXMyRC5XaWR0aCAvIEdBTUVfQ09ORklHLkNFTExfU0laRTtcbmNvbnN0IGdhbWVIZWlnaHQgPSBjYW52YXMyRC5IZWlnaHQgLyBHQU1FX0NPTkZJRy5DRUxMX1NJWkU7XG5cbmxldCBtYXA6IEdhbWVXb3JsZDtcblxuZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgbWFwID0gbmV3IEdhbWVXb3JsZChnYW1lV2lkdGgsIGdhbWVIZWlnaHQpO1xuICAgIGdhbWVMb29wKCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICBtYXAudXBkYXRlKCk7XG4gICAga2V5Ym9hcmQucmVzZXQoKTtcbn1cblxuZnVuY3Rpb24gZHJhdygpIHtcbiAgICBjYW52YXMyRC5jbGVhcigpO1xuICAgIGNhbnZhczJELmRyYXdCYWNrZ3JvdW5kKEdBTUVfQ09ORklHLkJBQ0tHUk9VTkRfQ09MT1IpO1xuICAgIG1hcC5kcmF3KCk7XG4gICAgY2FudmFzMkQuZHJhd0dyaWQoR0FNRV9DT05GSUcuR1JJRF9DT0xPUik7XG59XG5cbmZ1bmN0aW9uIGdhbWVMb29wKCkge1xuICAgIHVwZGF0ZSgpO1xuICAgIGRyYXcoKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xufVxuXG5zdGFydCgpOyIsImltcG9ydCB7IEdBTUVfQ09ORklHIH0gZnJvbSAnLi9nYW1lLmNvbmZpZyc7XG5pbXBvcnQgeyBrZXlib2FyZCB9IGZyb20gJy4vaW5wdXQvS2V5Ym9hcmQnO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gJy4vZ2VvbS9WZWN0b3IyJztcbmltcG9ydCB7IGNhbnZhczJEIH0gZnJvbSAnLi9DYW52YXMnO1xuaW1wb3J0IHsgQ2VsbCB9IGZyb20gXCIuL21hcC9DZWxsXCI7XG5pbXBvcnQgeyBTaGFwZVR5cGUgfSBmcm9tICcuL3NoYXBlVHlwZS9TaGFwZVR5cGUnO1xuXG5leHBvcnQgY2xhc3MgR2FtZVdvcmxkIHtcblxuICAgIC8vLS0tLS0tTWVtYmVycy0tLS0tLS8vXG5cbiAgICBwcml2YXRlIF9tYXA6IENlbGxbXVtdO1xuICAgIHByaXZhdGUgX3dpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXI7XG4gICAgcHJpdmF0ZSBfbW92aW5nU2hhcGVDb2xvcjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3JlZnJlc2hSYXRlOiBudW1iZXIgPSAxNTtcbiAgICBwcml2YXRlIF9mcmFtZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9tb3ZpbmdTaGFwZTogVmVjdG9yMltdID0gW107XG4gICAgcHJpdmF0ZSBfbW92aW5nU2hhcGVPcmlnaW46IFZlY3RvcjI7XG4gICAgcHJpdmF0ZSBfc2hhcGVUeXBlczogU2hhcGVUeXBlW10gPSBbXG4gICAgICAgIFNoYXBlVHlwZS5JLFxuICAgICAgICBTaGFwZVR5cGUuSixcbiAgICAgICAgU2hhcGVUeXBlLkwsXG4gICAgICAgIFNoYXBlVHlwZS5PLFxuICAgICAgICBTaGFwZVR5cGUuUyxcbiAgICAgICAgU2hhcGVUeXBlLlosXG4gICAgICAgIFNoYXBlVHlwZS5UXG4gICAgXTtcbiAgICBcbiAgICAvLy0tLS0tLUNvbnN0cnVjdG9yLS0tLS0tLy9cblxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5pbml0TWFwKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVSYW5kb21TaGFwZSgpO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHJpdmF0ZSBNZXRob2RzLS0tLS0tLy9cblxuICAgIHByaXZhdGUgaW5pdE1hcCgpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gW107XG5cbiAgICAgICAgZm9yKGxldCBpOiBudW1iZXIgPSAwIDsgaSA8IHRoaXMuX2hlaWdodCA7IGkrKyApe1xuICAgICAgICAgICAgdGhpcy5fbWFwW2ldID0gW107XG5cbiAgICAgICAgICAgIGZvcihsZXQgajogbnVtYmVyID0gMCA7IGogPCB0aGlzLl93aWR0aCA7IGorKyl7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwW2ldW2pdID0gbmV3IENlbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaXNDZWxsRmlsbGVkKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXBbeV1beF0uZmlsbGVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYXJDZWxsKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX21hcFt5XVt4XS5maWxsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbG9yQ2VsbCh4OiBudW1iZXIsIHk6IG51bWJlciwgY29sb3I6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLl9tYXBbeV1beF0uZmlsbGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fbWFwW3ldW3hdLmNvbG9yID0gY29sb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1BhcnRPZlNoYXBlKGNlbGw6IFZlY3RvcjIsIHNoYXBlOiBWZWN0b3IyW10pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlLnNvbWUoc2hhcGVDZWxsID0+IHNoYXBlQ2VsbC5YID09PSBjZWxsLlggJiYgc2hhcGVDZWxsLlkgPT09IGNlbGwuWSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVJbnB1dCgpOiB2b2lke1xuXG4gICAgICAgIGlmKGtleWJvYXJkLmlzUHJlc3NlZChHQU1FX0NPTkZJRy5VUF9LRVkpKSB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZVNoYXBlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLkRPV05fS0VZKSkge1xuICAgICAgICAgICAgdGhpcy5sb3dlclNoYXBlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdG9Nb3ZlWCA9IDA7XG4gICAgICAgIGlmIChrZXlib2FyZC5pc1ByZXNzZWQoR0FNRV9DT05GSUcuTEVGVF9LRVkpKSB7XG4gICAgICAgICAgICB0b01vdmVYID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5Ym9hcmQuaXNQcmVzc2VkKEdBTUVfQ09ORklHLlJJR0hUX0tFWSkpIHtcbiAgICAgICAgICAgIHRvTW92ZVggPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodG9Nb3ZlWCAhPT0gMCl7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRCb3JkZXIgPSB0aGlzLl9tb3ZpbmdTaGFwZS5zb21lKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRYID0gY2VsbC5YICsgdG9Nb3ZlWDtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0T2ZTaGFwZSA9IHRoaXMuaXNQYXJ0T2ZTaGFwZShjZWxsLmFkZFgodG9Nb3ZlWCksIHRoaXMuX21vdmluZ1NoYXBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFggPCAwIHx8IG5leHRYID09PSB0aGlzLl93aWR0aCB8fFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pc0NlbGxGaWxsZWQobmV4dFgsIGNlbGwuWSkgJiYgIXBhcnRPZlNoYXBlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZighcmVhY2hlZEJvcmRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKGNlbGwuWCwgY2VsbC5ZKTtcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5hZGRUb1godG9Nb3ZlWCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZih0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbil7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlT3JpZ2luLmFkZFRvWCh0b01vdmVYKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZS5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQ2VsbChjZWxsLlgsIGNlbGwuWSwgdGhpcy5fbW92aW5nU2hhcGVDb2xvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJvdGF0ZVNoYXBlKCk6IHZvaWQge1xuXG4gICAgICAgIGlmKCF0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbil7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmV3U2hhcGUgPSBbXTtcblxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IHRoaXMuX21vdmluZ1NoYXBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2VsbCA9IHRoaXMuX21vdmluZ1NoYXBlW2ldO1xuICAgICAgICAgICAgbGV0IHggPSBjZWxsLlggLSB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbi5YO1xuICAgICAgICAgICAgbGV0IHkgPSBjZWxsLlkgLSB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbi5ZO1xuICAgICAgICAgICAgbGV0IG5ld1ggPSAteTtcbiAgICAgICAgICAgIGxldCBuZXdZID0geDtcblxuICAgICAgICAgICAgbGV0IG5ld0NlbGwgPSB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbi5hZGRYKG5ld1gpLmFkZFkobmV3WSk7XG4gICAgICAgICAgICBuZXdTaGFwZS5wdXNoKG5ld0NlbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBvc3NpYmxlUm90YXRpb24gPSBuZXdTaGFwZS5ldmVyeShjZWxsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRPZlNoYXBlID0gdGhpcy5pc1BhcnRPZlNoYXBlKGNlbGwsIHRoaXMuX21vdmluZ1NoYXBlKTtcbiAgICAgICAgICAgIHJldHVybiBjZWxsLlkgPj0gMCAmJiBjZWxsLlggPj0gMCAmJiBjZWxsLlggPCB0aGlzLl93aWR0aCAmJlxuICAgICAgICAgICAgICAgICghdGhpcy5pc0NlbGxGaWxsZWQoY2VsbC5YLCBjZWxsLlkpIHx8IHBhcnRPZlNoYXBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYocG9zc2libGVSb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2VsbChjZWxsLlgsIGNlbGwuWSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUgPSBuZXdTaGFwZTtcblxuICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUuZm9yRWFjaChjZWxsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yQ2VsbChjZWxsLlgsIGNlbGwuWSwgdGhpcy5fbW92aW5nU2hhcGVDb2xvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbG93ZXJTaGFwZSgpOiBib29sZWFuIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlYWNoZWRCb3R0b20gPSB0aGlzLl9tb3ZpbmdTaGFwZS5zb21lKGNlbGwgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV4dFk6IG51bWJlciA9IGNlbGwuWSArIDE7XG4gICAgICAgICAgICBjb25zdCBwYXJ0T2ZTaGFwZSA9IHRoaXMuaXNQYXJ0T2ZTaGFwZShjZWxsLmFkZFkoMSksIHRoaXMuX21vdmluZ1NoYXBlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0WSA9PT0gdGhpcy5faGVpZ2h0IHx8XG4gICAgICAgICAgICAgICAgICAgKHRoaXMuaXNDZWxsRmlsbGVkKGNlbGwuWCwgbmV4dFkpICYmICFwYXJ0T2ZTaGFwZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCFyZWFjaGVkQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZS5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDZWxsKGNlbGwuWCwgY2VsbC5ZKTtcbiAgICAgICAgICAgICAgICBjZWxsLmFkZFRvWSgxKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZih0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbil7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGVPcmlnaW4uYWRkVG9ZKDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZS5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29sb3JDZWxsKGNlbGwuWCwgY2VsbC5ZLCB0aGlzLl9tb3ZpbmdTaGFwZUNvbG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlYWNoZWRCb3R0b207XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVGaWxsZWRMaW5lcygpOiB2b2lkIHtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IHRoaXMuX21hcC5sZW5ndGggOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGxlZExpbmUgOiBib29sZWFuID0gdGhpcy5fbWFwW2ldLmV2ZXJ5KGNlbGwgPT4gY2VsbC5maWxsZWQpO1xuXG4gICAgICAgICAgICBpZihmaWxsZWRMaW5lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnNwbGljZShpLDEpO1xuICAgICAgICAgICAgICAgIGxldCBuZXdSb3c6IENlbGxbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDwgdGhpcy5fd2lkdGggOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Um93W2pdID0gbmV3IENlbGwoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAudW5zaGlmdChuZXdSb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0ZvckdhbWVPdmVyKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwWzBdLnNvbWUoY2VsbCA9PiBjZWxsLmZpbGxlZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRTaGFwZShzaGFwZVR5cGU6IFNoYXBlVHlwZSk6IHZvaWQge1xuXG4gICAgICAgIGxldCByYW5kb21YOiBudW1iZXI7XG4gICAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMjtcbiAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUgPSBbXTtcblxuICAgICAgICBzd2l0Y2goc2hhcGVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5JOlxuICAgICAgICAgICAgICAgIHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLl93aWR0aCk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBuZXcgVmVjdG9yMihyYW5kb21YLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDIpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMylcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlT3JpZ2luID0gbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuSjpcbiAgICAgICAgICAgICAgICByYW5kb21YID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMuX3dpZHRoIC0gMSkpICsgMTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHJhbmRvbVgsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMiksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggLSAxLCBwb3NpdGlvbi5ZICsgMiksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbiA9IG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLkw6XG4gICAgICAgICAgICAgICAgcmFuZG9tWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLl93aWR0aCAtIDEpKTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHJhbmRvbVgsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDIpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YICsgMSwgcG9zaXRpb24uWSArIDIpLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGVPcmlnaW4gPSBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5POlxuICAgICAgICAgICAgICAgIHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5fd2lkdGggLSAxKSk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBuZXcgVmVjdG9yMihyYW5kb21YLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggKyAxLCBwb3NpdGlvbi5ZKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YICsgMSwgcG9zaXRpb24uWSArIDEpLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGVPcmlnaW4gPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTaGFwZVR5cGUuUzpcbiAgICAgICAgICAgICAgICByYW5kb21YID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMuX3dpZHRoIC0gMikpICsgMTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IG5ldyBWZWN0b3IyKHJhbmRvbVgsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1NoYXBlID0gW1xuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCArIDEsIHBvc2l0aW9uLlkpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggLSAxLCBwb3NpdGlvbi5ZICsgMSksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbiA9IG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2hhcGVUeXBlLlo6XG4gICAgICAgICAgICAgICAgcmFuZG9tWCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh0aGlzLl93aWR0aCAtIDIpKSArIDE7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSBuZXcgVmVjdG9yMihyYW5kb21YLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggLSAxLCBwb3NpdGlvbi5ZKSxcbiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24uWCwgcG9zaXRpb24uWSArIDEpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YICsgMSwgcG9zaXRpb24uWSArIDEpLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGVPcmlnaW4gPSBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNoYXBlVHlwZS5UOlxuICAgICAgICAgICAgICAgIHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5fd2lkdGggLSAyKSkgKyAxO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gbmV3IFZlY3RvcjIocmFuZG9tWCwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92aW5nU2hhcGUgPSBbXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yMihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZICsgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggLSAxLCBwb3NpdGlvbi5ZICsgMSksXG4gICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IyKHBvc2l0aW9uLlggKyAxLCBwb3NpdGlvbi5ZICsgMSksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZU9yaWdpbiA9IG5ldyBWZWN0b3IyKHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkgKyAxKTtcbiAgICAgICAgICAgICAgICBicmVhazsgIFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0cyBzaGFwZSBjb2xvclxuICAgICAgICBjb25zdCBzaGFwZVR5cGVJbmRleCA9IHRoaXMuX3NoYXBlVHlwZXMuaW5kZXhPZihzaGFwZVR5cGUpIFxuICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZUNvbG9yID0gR0FNRV9DT05GSUcuU0hBUEVfQ09MT1JTW3NoYXBlVHlwZUluZGV4XTtcblxuICAgICAgICB0aGlzLl9tb3ZpbmdTaGFwZS5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb2xvckNlbGwoY2VsbC5YLCBjZWxsLlksIHRoaXMuX21vdmluZ1NoYXBlQ29sb3IpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhdGVSYW5kb21TaGFwZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmFuZG9tU2hhcGVUeXBlSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLl9zaGFwZVR5cGVzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuYWRkU2hhcGUodGhpcy5fc2hhcGVUeXBlc1tyYW5kb21TaGFwZVR5cGVJbmRleF0pO1xuICAgIH1cblxuICAgIC8vLS0tLS0tUHVibGljIE1ldGhvZHMtLS0tLS0vL1xuXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dCgpO1xuICAgICAgICBpZigrK3RoaXMuX2ZyYW1lICUgdGhpcy5fcmVmcmVzaFJhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWFjaGVkQm90dG9tID0gdGhpcy5sb3dlclNoYXBlKCk7XG4gICAgICAgIGlmKHJlYWNoZWRCb3R0b20pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsbGVkTGluZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGdhbWVPdmVyOiBib29sZWFuID0gdGhpcy5jaGVja0ZvckdhbWVPdmVyKCk7XG4gICAgICAgICAgICBpZighZ2FtZU92ZXIpe1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSYW5kb21TaGFwZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdhbWUgT3ZlciFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhdygpOiB2b2lkIHtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCB0aGlzLl9tYXAubGVuZ3RoIDsgaSsrKXtcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDwgdGhpcy5fbWFwW2ldLmxlbmd0aCA7IGorKyl7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbDogQ2VsbCA9IHRoaXMuX21hcFtpXVtqXTtcbiAgICAgICAgICAgICAgICBpZihjZWxsLmZpbGxlZCl7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhczJELmRyYXdSZWN0QXRDZWxsKGksIGosIGNlbGwuY29sb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJcbmV4cG9ydCBjbGFzcyBDZWxsIHtcblxuICAgIHByaXZhdGUgX2ZpbGxlZCA6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfY29sb3IgOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgZ2V0IGNvbG9yKCkgOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gICAgfVxuICAgIHB1YmxpYyBzZXQgY29sb3IodiA6IHN0cmluZykge1xuICAgICAgICB0aGlzLl9jb2xvciA9IHY7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBmaWxsZWQoKSA6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsbGVkO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IGZpbGxlZCh2IDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9maWxsZWQgPSB2O1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9maWxsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgXG59IiwiZXhwb3J0IGVudW0gU2hhcGVUeXBlIHtcbiAgICBJLFxuICAgIEosXG4gICAgTCxcbiAgICBTLFxuICAgIFosXG4gICAgTyxcbiAgICBUXG59Il0sInNvdXJjZVJvb3QiOiIifQ==